[0m{"summary":{"changed":0,"unchanged":96,"matches":0,"duration":{"secs":0,"nanos":73394300},"scannerDuration":{"secs":0,"nanos":3564900},"errors":51,"warnings":6,"skipped":0,"suggestedFixesSkipped":0,"diagnosticsNotPrinted":0},"diagnostics":[{"category":"lint/style/useTemplate","severity":"information","description":"Template literals are preferred over string concatenation.","message":[{"elements":["Emphasis"],"content":"Template"},{"elements":[],"content":" literals are preferred over "},{"elements":["Emphasis"],"content":"string concatenation."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Unsafe fix: Use a "},{"elements":["Emphasis"],"content":"template literal"},{"elements":[],"content":"."}]]},{"diff":{"dictionary":"\"use client\";\n\nimport {  \n  const nameWithoutExt = lastDot > 0 ? name.slice(0, lastDot) : name;\n  return `${nameWithoutExt.slice(0, availableForName) + \"}...\" + ${extension}`;\n}\n  );\n}\n","ops":[{"diffOp":{"equal":{"range":[0,23]}}},{"equalLines":{"line_count":47}},{"diffOp":{"equal":{"range":[23,105]}}},{"diffOp":{"insert":{"range":[105,108]}}},{"diffOp":{"equal":{"range":[108,149]}}},{"diffOp":{"delete":{"range":[149,153]}}},{"diffOp":{"insert":{"range":[153,154]}}},{"diffOp":{"equal":{"range":[154,157]}}},{"diffOp":{"delete":{"range":[157,161]}}},{"diffOp":{"insert":{"range":[161,163]}}},{"diffOp":{"equal":{"range":[163,172]}}},{"diffOp":{"insert":{"range":[172,174]}}},{"diffOp":{"equal":{"range":[174,178]}}},{"equalLines":{"line_count":367}},{"diffOp":{"equal":{"range":[178,185]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\medias\\components\\image-uploader.tsx"},"span":[1373,1434],"sourceCode":"\"use client\";\n\nimport {\n  IconAlertCircle,\n  IconCheck,\n  IconFileDescription,\n  IconLoader2,\n  IconUpload,\n  IconX,\n} from \"@tabler/icons-react\";\nimport Image from \"next/image\";\nimport { useCallback, useRef, useState, useTransition } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { uploadImageAction } from \"../medias.actions\";\n\ninterface ImageFile {\n  file: File;\n  preview: string;\n  progress: number;\n  error: string | null;\n  uploaded: boolean;\n}\n\ninterface ImageUploaderProps {\n  maxSize?: number; // in MB\n}\n\n// Abbreviate long filenames: max 12 characters total\n// \"very_long_filename.png\" -> \"very...png\"\nfunction abbreviateFilename(name: string): string {\n  const maxLength = 12;\n  if (name.length <= maxLength) return name;\n  \n  const lastDot = name.lastIndexOf(\".\");\n  const extension = lastDot > 0 ? name.slice(lastDot) : \"\";\n  \n  // Calculate how many chars we can use from the name part\n  const availableForName = maxLength - extension.length - 3; // 3 for \"...\"\n  \n  if (availableForName <= 0) {\n    // If extension is too long, just truncate everything\n    return name.slice(0, maxLength);\n  }\n  \n  const nameWithoutExt = lastDot > 0 ? name.slice(0, lastDot) : name;\n  return nameWithoutExt.slice(0, availableForName) + \"...\" + extension;\n}\n\nexport function ImageUploader({ maxSize = 3 }: ImageUploaderProps) {\n  const [isDragging, setIsDragging] = useState(false);\n  const [uploadedFiles, setUploadedFiles] = useState<ImageFile[]>([]);\n  const [isPending, startTransition] = useTransition();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const validateFile = useCallback(\n    (file: File) => {\n      if (!file.type.startsWith(\"image/\")) {\n        return \"Only image files are allowed\";\n      }\n      if (file.size > maxSize * 1024 * 1024) {\n        return `File size must be less than ${maxSize}MB`;\n      }\n      return null;\n    },\n    [maxSize],\n  );\n\n  const handleFiles = useCallback(\n    (files: FileList) => {\n      const fileArray = Array.from(files);\n      fileArray.forEach((file) => {\n        const error = validateFile(file);\n        if (error) {\n          setUploadedFiles((prev) => [\n            ...prev,\n            {\n              file,\n              preview: \"\",\n              progress: 0,\n              error,\n              uploaded: false,\n            },\n          ]);\n          return;\n        }\n\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          const dataUrl = e.target?.result as string;\n          setUploadedFiles((prev) => [\n            ...prev,\n            {\n              file,\n              preview: dataUrl,\n              progress: 0,\n              error: null,\n              uploaded: false,\n            },\n          ]);\n        };\n        reader.readAsDataURL(file);\n      });\n    },\n    [validateFile],\n  );\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n    if (e.dataTransfer.files) {\n      handleFiles(e.dataTransfer.files);\n    }\n  };\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(true);\n  };\n\n  const handleDragLeave = () => {\n    setIsDragging(false);\n  };\n\n  const handleFileInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files) {\n      handleFiles(e.target.files);\n      e.target.value = \"\";\n    }\n  };\n\n  const handleUpload = (imageFile: ImageFile) => {\n    startTransition(async () => {\n      try {\n        const result = await uploadImageAction(imageFile.file);\n        if (result.success) {\n          setUploadedFiles((prev) =>\n            prev.map((f) =>\n              f.file === imageFile.file\n                ? { ...f, progress: 100, uploaded: true }\n                : f,\n            ),\n          );\n\n          // Remove from list after 2 seconds and trigger complete callback\n          setTimeout(() => {\n            setUploadedFiles((prev) => {\n              const updated = prev.filter((f) => f.file !== imageFile.file);\n              return updated;\n            });\n          }, 2000);\n        } else {\n          setUploadedFiles((prev) =>\n            prev.map((f) =>\n              f.file === imageFile.file ? { ...f, error: result.error } : f,\n            ),\n          );\n        }\n      } catch (error) {\n        setUploadedFiles((prev) =>\n          prev.map((f) =>\n            f.file === imageFile.file\n              ? {\n                  ...f,\n                  error:\n                    error instanceof Error ? error.message : \"Failed to upload\",\n                }\n              : f,\n          ),\n        );\n      }\n    });\n  };\n\n  const handleRetry = (imageFile: ImageFile) => {\n    // Reset error state and progress\n    setUploadedFiles((prev) =>\n      prev.map((f) =>\n        f.file === imageFile.file ? { ...f, error: null, progress: 0 } : f,\n      ),\n    );\n    // Start upload\n    handleUpload(imageFile);\n  };\n\n  const removeFile = (file: File) => {\n    setUploadedFiles((prev) => prev.filter((f) => f.file !== file));\n  };\n\n  const clearAllFiles = () => {\n    setUploadedFiles([]);\n  };\n\n  return (\n    <TooltipProvider>\n      <div className=\"space-y-6\">\n        {/* Drop Zone */}\n        <button\n          type=\"button\"\n          onDrop={handleDrop}\n          onDragOver={handleDragOver}\n          onDragLeave={handleDragLeave}\n          onClick={() => fileInputRef.current?.click()}\n          className={`relative w-full rounded-2xl border-2 border-dashed transition-all cursor-pointer p-10 text-center group ${\n            isDragging\n              ? \"border-primary bg-primary/5 ring-4 ring-primary/5\"\n              : \"border-muted-foreground/20 hover:border-primary/40 hover:bg-muted/30\"\n          }`}\n        >\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            multiple\n            accept=\"image/*\"\n            onChange={handleFileInput}\n            disabled={isPending}\n            className=\"hidden\"\n          />\n\n          <div className=\"flex flex-col items-center gap-4\">\n            <div\n              className={`rounded-2xl p-4 transition-colors ${isDragging ? \"bg-primary/20\" : \"bg-muted/60 group-hover:bg-primary/15\"}`}\n            >\n              <IconUpload\n                className={`size-8 transition-colors ${isDragging ? \"text-primary animate-bounce\" : \"text-muted-foreground group-hover:text-primary\"}`}\n              />\n            </div>\n            <div className=\"space-y-1\">\n              <p className=\"text-base font-semibold text-foreground\">\n                {isDragging ? \"Drop to upload\" : \"Click or drag images here\"}\n              </p>\n              <p className=\"text-xs text-muted-foreground\">\n                Supports JPG, PNG, GIF, SVG, WebP (Max {maxSize}MB)\n              </p>\n            </div>\n          </div>\n        </button>\n\n        {uploadedFiles.length > 0 && (\n          <div className=\"space-y-4 max-w-full\">\n            <div className=\"flex items-center justify-between px-1\">\n              <h3 className=\"text-xs font-bold uppercase tracking-wider text-muted-foreground\">\n                Upload Queue ({uploadedFiles.length})\n              </h3>\n              <div className=\"flex gap-2\">\n                {uploadedFiles.some((f) => !f.uploaded && !f.error) && (\n                  <Button\n                    onClick={() => {\n                      const toUpload = uploadedFiles.filter(\n                        (f) => !f.uploaded && !f.error,\n                      );\n                      toUpload.forEach((f) => {\n                        handleUpload(f);\n                      });\n                    }}\n                    disabled={isPending}\n                    size=\"sm\"\n                    variant=\"secondary\"\n                    className=\"h-8 gap-2 text-xs rounded-lg\"\n                  >\n                    <IconUpload className=\"size-3.5\" />\n                    Upload All\n                  </Button>\n                )}\n                <Button\n                  onClick={clearAllFiles}\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"h-8 gap-2 text-xs text-muted-foreground hover:text-destructive rounded-lg\"\n                >\n                  <IconX className=\"size-3.5\" />\n                  Clear All\n                </Button>\n              </div>\n            </div>\n\n            <div className=\"max-h-96 overflow-y-auto pr-2 pb-4 [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-track]:bg-muted/30 [&::-webkit-scrollbar-thumb]:bg-muted-foreground/30 [&::-webkit-scrollbar-thumb]:rounded-full hover:[&::-webkit-scrollbar-thumb]:bg-muted-foreground/50\">\n              <div className=\"grid gap-3\">\n              {uploadedFiles.map((item) => (\n                <div\n                  key={item.file.name + item.file.lastModified}\n                  className=\"group relative flex items-center gap-3 rounded-xl border bg-card p-3 shadow-sm transition-all hover:shadow-md\"\n                >\n                  <div className=\"relative size-16 shrink-0 overflow-hidden rounded-lg bg-muted border\">\n                    {item.preview ? (\n                      <Image\n                        src={item.preview}\n                        alt={item.file.name}\n                        fill\n                        unoptimized\n                        className=\"object-cover\"\n                      />\n                    ) : (\n                      <div className=\"flex h-full w-full items-center justify-center\">\n                        <IconFileDescription className=\"size-6 text-muted-foreground/40\" />\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"flex-1 min-w-0 space-y-1.5 overflow-hidden\">\n                    <div className=\"min-w-0\">\n                      <p className=\"text-sm font-bold truncate leading-none mb-1\" title={item.file.name}>\n                        {abbreviateFilename(item.file.name)}\n                      </p>\n                      <p className=\"text-[10px] font-medium text-muted-foreground\">\n                        {(item.file.size / 1024 / 1024).toFixed(2)} MB\n                      </p>\n                    </div>\n\n                    <div className=\"flex items-center gap-1.5 flex-wrap\">\n                      {item.uploaded && (\n                        <Badge\n                          variant=\"secondary\"\n                          className=\"bg-green-500/10 text-green-600 border-green-500/20 gap-1 px-1.5 py-0 h-5 text-[10px] whitespace-nowrap\"\n                        >\n                          <IconCheck className=\"size-3\" />\n                          Done\n                          </Badge>\n                        )}\n                        {item.error && (\n                          <Badge\n                            variant=\"destructive\"\n                            className=\"gap-1 px-1.5 py-0 h-5 text-[10px] whitespace-nowrap\"\n                          >\n                            <IconAlertCircle className=\"size-3\" />\n                            Error\n                          </Badge>\n                        )}\n                    </div>\n\n                    {(item.progress > 0 ||\n                      (isPending && !item.uploaded && !item.error)) && (\n                      <div className=\"h-1.5 w-full overflow-hidden rounded-full bg-muted\">\n                        <div\n                          className={`h-full transition-all duration-500 ${\n                            item.error\n                              ? \"bg-destructive\"\n                              : item.progress === 100\n                                ? \"bg-green-500\"\n                                : \"bg-primary animate-pulse\"\n                          }`}\n                          style={{\n                            width: `${item.progress || (isPending ? 40 : 0)}%`,\n                          }}\n                        />\n                      </div>\n                    )}\n\n                    {item.error && (\n                      <p className=\"text-[10px] font-medium text-destructive\">\n                        {item.error}\n                      </p>\n                    )}\n                  </div>\n\n                  <div className=\"flex items-center gap-1 shrink-0 ml-auto\">\n                    {!item.uploaded && !item.error && (\n                      <Tooltip>\n                        <TooltipTrigger asChild>\n                          <Button\n                            onClick={() => handleUpload(item)}\n                            disabled={isPending}\n                            size=\"icon\"\n                            variant=\"ghost\"\n                            className=\"size-8 rounded-lg text-primary hover:bg-primary/10 shrink-0\"\n                          >\n                            {isPending ? (\n                              <IconLoader2 className=\"size-4 animate-spin\" />\n                            ) : (\n                              <IconUpload className=\"size-4\" />\n                            )}\n                          </Button>\n                        </TooltipTrigger>\n                        <TooltipContent>Upload</TooltipContent>\n                      </Tooltip>\n                    )}\n\n                    {item.error && (\n                      <Tooltip>\n                        <TooltipTrigger asChild>\n                          <Button\n                            onClick={() => handleRetry(item)}\n                            disabled={isPending}\n                            size=\"icon\"\n                            variant=\"ghost\"\n                            className=\"size-8 rounded-lg text-primary hover:bg-primary/10 shrink-0\"\n                          >\n                            <IconUpload className=\"size-4\" />\n                          </Button>\n                        </TooltipTrigger>\n                        <TooltipContent>Retry</TooltipContent>\n                      </Tooltip>\n                    )}\n\n                    <Tooltip>\n                      <TooltipTrigger asChild>\n                        <Button\n                          onClick={() => removeFile(item.file)}\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          className=\"size-8 rounded-lg text-muted-foreground hover:text-destructive hover:bg-destructive/10 shrink-0\"\n                        >\n                          <IconX className=\"size-4\" />\n                        </Button>\n                      </TooltipTrigger>\n                      <TooltipContent>Remove</TooltipContent>\n                    </Tooltip>\n                  </div>\n                </div>\n              ))}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </TooltipProvider>\n  );\n}\n"},"tags":["fixable"],"source":null},{"category":"lint/style/noDescendingSpecificity","severity":"warning","description":"Descending specificity selector found. This selector specificity is (0, 1, 0)","message":[{"elements":[],"content":"Descending specificity selector found. This selector specificity is (0, 1, 0)"}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"This selector specificity is (0, 2, 0)"}]]},{"frame":{"path":null,"span":[8374,8392],"sourceCode":"@import \"tailwindcss\";\n@import \"tw-animate-css\";\n@import \"shadcn/tailwind.css\";\n\n@custom-variant dark (&:is(.dark *));\n\n@theme inline {\n  --color-background: var(--background);\n  --color-foreground: var(--foreground);\n  --font-sans: var(--font-sans);\n  --font-mono: var(--font-geist-mono);\n  --color-sidebar-ring: var(--sidebar-ring);\n  --color-sidebar-border: var(--sidebar-border);\n  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);\n  --color-sidebar-accent: var(--sidebar-accent);\n  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);\n  --color-sidebar-primary: var(--sidebar-primary);\n  --color-sidebar-foreground: var(--sidebar-foreground);\n  --color-sidebar: var(--sidebar);\n  --color-chart-5: var(--chart-5);\n  --color-chart-4: var(--chart-4);\n  --color-chart-3: var(--chart-3);\n  --color-chart-2: var(--chart-2);\n  --color-chart-1: var(--chart-1);\n  --color-ring: var(--ring);\n  --color-input: var(--input);\n  --color-border: var(--border);\n  --color-destructive: var(--destructive);\n  --color-accent-foreground: var(--accent-foreground);\n  --color-accent: var(--accent);\n  --color-muted-foreground: var(--muted-foreground);\n  --color-muted: var(--muted);\n  --color-secondary-foreground: var(--secondary-foreground);\n  --color-secondary: var(--secondary);\n  --color-primary-foreground: var(--primary-foreground);\n  --color-primary: var(--primary);\n  --color-popover-foreground: var(--popover-foreground);\n  --color-popover: var(--popover);\n  --color-card-foreground: var(--card-foreground);\n  --color-card: var(--card);\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n  --radius-2xl: calc(var(--radius) + 8px);\n  --radius-3xl: calc(var(--radius) + 12px);\n  --radius-4xl: calc(var(--radius) + 16px);\n}\n\n:root {\n  --background: oklch(1 0 0);\n  --foreground: oklch(0.145 0 0);\n  --card: oklch(1 0 0);\n  --card-foreground: oklch(0.145 0 0);\n  --popover: oklch(1 0 0);\n  --popover-foreground: oklch(0.145 0 0);\n  --primary: oklch(0.205 0 0);\n  --primary-foreground: oklch(0.985 0 0);\n  --secondary: oklch(0.97 0 0);\n  --secondary-foreground: oklch(0.205 0 0);\n  --muted: oklch(0.97 0 0);\n  --muted-foreground: oklch(0.556 0 0);\n  --accent: oklch(0.97 0 0);\n  --accent-foreground: oklch(0.205 0 0);\n  --destructive: oklch(0.58 0.22 27);\n  --border: oklch(0.922 0 0);\n  --input: oklch(0.922 0 0);\n  --ring: oklch(0.708 0 0);\n  --chart-1: oklch(0.809 0.105 251.813);\n  --chart-2: oklch(0.623 0.214 259.815);\n  --chart-3: oklch(0.546 0.245 262.881);\n  --chart-4: oklch(0.488 0.243 264.376);\n  --chart-5: oklch(0.424 0.199 265.638);\n  --radius: 0.225rem;\n  --sidebar: oklch(0.985 0 0);\n  --sidebar-foreground: oklch(0.145 0 0);\n  --sidebar-primary: oklch(0.205 0 0);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.97 0 0);\n  --sidebar-accent-foreground: oklch(0.205 0 0);\n  --sidebar-border: oklch(0.922 0 0);\n  --sidebar-ring: oklch(0.708 0 0);\n}\n\n.dark {\n  --background: oklch(0.145 0 0);\n  --foreground: oklch(0.95 0 0);\n  --card: oklch(0.205 0 0);\n  --card-foreground: oklch(0.985 0 0);\n  --popover: oklch(0.205 0 0);\n  --popover-foreground: oklch(0.985 0 0);\n  --primary: oklch(0.87 0 0);\n  --primary-foreground: oklch(0.205 0 0);\n  --secondary: oklch(0.269 0 0);\n  --secondary-foreground: oklch(0.985 0 0);\n  --muted: oklch(0.269 0 0);\n  --muted-foreground: oklch(0.708 0 0);\n  --accent: oklch(0.371 0 0);\n  --accent-foreground: oklch(0.985 0 0);\n  --destructive: oklch(0.704 0.191 22.216);\n  --border: oklch(1 0 0 / 10%);\n  --input: oklch(1 0 0 / 15%);\n  --ring: oklch(0.556 0 0);\n  --chart-1: oklch(0.809 0.105 251.813);\n  --chart-2: oklch(0.623 0.214 259.815);\n  --chart-3: oklch(0.546 0.245 262.881);\n  --chart-4: oklch(0.488 0.243 264.376);\n  --chart-5: oklch(0.424 0.199 265.638);\n  --sidebar: oklch(0.205 0 0);\n  --sidebar-foreground: oklch(0.985 0 0);\n  --sidebar-primary: oklch(0.488 0.243 264.376);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.269 0 0);\n  --sidebar-accent-foreground: oklch(0.985 0 0);\n  --sidebar-border: oklch(1 0 0 / 10%);\n  --sidebar-ring: oklch(0.556 0 0);\n}\n\n@layer base {\n  * {\n    @apply border-border outline-ring/50;\n  }\n\n  body {\n    @apply bg-background text-foreground;\n  }\n}\n\n/* MDXEditor Styles */\n.mdxeditor-popup-container {\n  height: 0;\n  width: 0;\n  display: block;\n  position: absolute;\n  /* Ensures it doesn't take up space in the document flow */\n  pointer-events: none;\n}\n\n.mdxeditor-popup-container > * {\n  pointer-events: auto;\n}\n\n.mdx-editor-wrapper {\n  --accentColor: var(--primary);\n  --accentColorLight: var(--primary-foreground);\n  --baseText: var(--foreground);\n  --baseTextContrast: var(--foreground);\n  --baseBg: var(--background);\n  --baseBorder: var(--border);\n  color: var(--foreground);\n  @apply max-h-dvh;\n  display: flex;\n  flex-direction: column;\n  height: 500px;\n  overflow: hidden;\n  /* Or your preferred fixed height */\n  /* or any fixed height/max-height */\n\n  [class*=\"mdxeditor\"] {\n    font-family: inherit;\n  }\n\n  .mdxeditor {\n    background: var(--background);\n    color: var(--foreground);\n  }\n\n  .mdxeditor-root-contenteditable {\n    color: var(--foreground);\n    /* padding: 1rem; */\n    min-height: 300px;\n    max-width: 100%;\n    padding: 1.5rem 2rem;\n    /* max-width: 800px; */\n    margin: 0 auto;\n    width: 100%;\n    flex-grow: 1;\n    overflow-x: hidden;\n    overflow-y: auto;\n  }\n\n  /* Force content text color */\n  .mdxeditor-root-contenteditable * {\n    color: inherit;\n  }\n\n  /* Heading styles in editor */\n  .mdxeditor-root-contenteditable h1 {\n    font-size: 2em;\n    font-weight: 700;\n    line-height: 1.25;\n    margin-top: 1em;\n    margin-bottom: 0.5em;\n    color: var(--foreground);\n  }\n\n  .mdxeditor-root-contenteditable h2 {\n    font-size: 1.5em;\n    font-weight: 600;\n    line-height: 1.3;\n    margin-top: 1.5em;\n    margin-bottom: 0.5em;\n    padding-bottom: 0.25em;\n    border-bottom: 1px solid var(--border);\n    color: var(--foreground);\n  }\n\n  .mdxeditor-root-contenteditable h3 {\n    font-size: 1.25em;\n    font-weight: 600;\n    line-height: 1.4;\n    margin-top: 1.25em;\n    margin-bottom: 0.5em;\n    color: var(--foreground);\n  }\n\n  .mdxeditor-root-contenteditable h4 {\n    font-size: 1.1em;\n    font-weight: 600;\n    line-height: 1.4;\n    margin-top: 1em;\n    margin-bottom: 0.5em;\n    color: var(--foreground);\n  }\n\n  /* Paragraph spacing */\n  .mdxeditor-root-contenteditable p {\n    margin-top: 0.75em;\n    margin-bottom: 0.75em;\n    line-height: 1.7;\n  }\n\n  /* Lists */\n  .mdxeditor-root-contenteditable ul {\n    list-style-type: disc;\n    padding-left: 1.5em;\n    margin: 0.75em 0;\n  }\n\n  .mdxeditor-root-contenteditable ol {\n    list-style-type: decimal;\n    padding-left: 1.5em;\n    margin: 0.75em 0;\n  }\n\n  .mdxeditor-root-contenteditable li {\n    margin: 0.25em 0;\n    line-height: 1.6;\n  }\n\n  /* Blockquote */\n  .mdxeditor-root-contenteditable blockquote {\n    border-left: 4px solid var(--primary);\n    padding-left: 1em;\n    margin: 1em 0;\n    font-style: italic;\n    color: var(--muted-foreground);\n  }\n\n  /* Images - fix overflow */\n  .mdxeditor-root-contenteditable img {\n    max-width: 100%;\n    height: auto;\n    border-radius: 0.5rem;\n    margin: 1em 0;\n  }\n\n  /* Table styling */\n  .mdxeditor-root-contenteditable table {\n    width: 100%;\n    border-collapse: collapse;\n    margin: 1em 0;\n  }\n\n  .mdxeditor-root-contenteditable th,\n  .mdxeditor-root-contenteditable td {\n    border: 1px solid var(--border);\n    padding: 0.5rem;\n    text-align: left;\n  }\n\n  .mdxeditor-root-contenteditable th {\n    background: var(--muted);\n    font-weight: 600;\n  }\n\n  /* Preserve link colors */\n  .mdxeditor-root-contenteditable a {\n    color: var(--primary);\n    text-decoration: underline;\n  }\n\n  /* Preserve code block styling */\n  .mdxeditor-root-contenteditable pre,\n  .mdxeditor-root-contenteditable code {\n    background: var(--muted);\n    font-size: 0.875em;\n  }\n\n  .mdxeditor-root-contenteditable pre {\n    padding: 1rem;\n    border-radius: 0.5rem;\n    overflow-x: auto;\n    margin: 1em 0;\n  }\n\n  .mdxeditor-root-contenteditable code {\n    padding: 0.2em 0.4em;\n    border-radius: 0.25rem;\n  }\n\n  /* Horizontal rule */\n  .mdxeditor-root-contenteditable hr {\n    border: none;\n    border-top: 1px solid var(--border);\n    margin: 2em 0;\n  }\n\n  .mdxeditor-toolbar {\n    position: sticky;\n    top: 0;\n    z-index: 10;\n    background: var(--background);\n    border-bottom: 1px solid var(--border);\n    flex-wrap: wrap;\n    gap: 0.25rem;\n    padding: 0.5rem;\n    color: var(--foreground);\n  }\n\n  /* All toolbar buttons - comprehensive selector */\n  .mdxeditor-toolbar button,\n  .mdxeditor-toolbar-button,\n  .mdxeditor-toolbar [role=\"button\"],\n  .mdxeditor-toolbar button[type=\"button\"],\n  [class*=\"diffSourceToggle\"] button,\n  [class*=\"viewMode\"] button,\n  [class*=\"toggleGroup\"] button {\n    border-radius: 0.375rem;\n    color: var(--foreground);\n    background: transparent;\n    border: 1px solid transparent;\n    cursor: pointer;\n  }\n\n  .mdxeditor-toolbar button:hover,\n  .mdxeditor-toolbar-button:hover,\n  .mdxeditor-toolbar [role=\"button\"]:hover,\n  [class*=\"diffSourceToggle\"] button:hover,\n  [class*=\"viewMode\"] button:hover,\n  [class*=\"toggleGroup\"] button:hover {\n    background: var(--accent);\n    color: var(--accent-foreground);\n  }\n\n  .mdxeditor-toolbar [data-state=\"on\"],\n  .mdxeditor-toolbar button[data-active=\"true\"],\n  .mdxeditor-toolbar [aria-pressed=\"true\"],\n  [class*=\"diffSourceToggle\"] button[data-state=\"on\"],\n  [class*=\"viewMode\"] button[data-state=\"on\"],\n  [class*=\"toggleGroup\"] button[data-state=\"on\"] {\n    background: var(--accent);\n    color: var(--accent-foreground);\n  }\n\n  /* BlockTypeSelect and other selects */\n  .mdxeditor-toolbar select,\n  .mdxeditor-toolbar input[type=\"text\"],\n  .mdxeditor-toolbar input[type=\"search\"],\n  [class*=\"selectTrigger\"],\n  [class*=\"blockType\"] button {\n    background: var(--muted);\n    color: var(--foreground);\n    border: 1px solid var(--border);\n    border-radius: 0.375rem;\n  }\n\n  .mdxeditor-toolbar svg {\n    color: currentColor;\n  }\n\n  .mdxeditor-toolbar [class*=\"separator\"] {\n    background: var(--border);\n  }\n}\n\n/* Dark mode specific overrides with high specificity */\n.dark .mdx-editor-wrapper .mdxeditor-toolbar button,\n.dark .mdx-editor-wrapper .mdxeditor-toolbar-button,\n.dark .mdx-editor-wrapper .mdxeditor-toolbar [role=\"button\"],\n.dark .mdx-editor-wrapper [class*=\"diffSourceToggle\"] button,\n.dark .mdx-editor-wrapper [class*=\"viewMode\"] button,\n.dark .mdx-editor-wrapper [class*=\"toggleGroup\"] button {\n  color: var(--foreground);\n  background: transparent;\n  border-color: var(--border);\n}\n\n.dark .mdx-editor-wrapper .mdxeditor-toolbar button:hover,\n.dark .mdx-editor-wrapper .mdxeditor-toolbar-button:hover,\n.dark .mdx-editor-wrapper .mdxeditor-toolbar [role=\"button\"]:hover,\n.dark .mdx-editor-wrapper [class*=\"diffSourceToggle\"] button:hover,\n.dark .mdx-editor-wrapper [class*=\"viewMode\"] button:hover,\n.dark .mdx-editor-wrapper [class*=\"toggleGroup\"] button:hover {\n  background: var(--accent);\n  color: var(--accent-foreground);\n}\n\n.dark .mdx-editor-wrapper .mdxeditor-toolbar [data-state=\"on\"],\n.dark .mdx-editor-wrapper [class*=\"diffSourceToggle\"] button[data-state=\"on\"],\n.dark .mdx-editor-wrapper [class*=\"viewMode\"] button[data-state=\"on\"],\n.dark .mdx-editor-wrapper [class*=\"toggleGroup\"] button[data-state=\"on\"] {\n  background: var(--accent);\n  color: var(--accent-foreground);\n}\n\n.dark .mdx-editor-wrapper .mdxeditor-toolbar select,\n.dark .mdx-editor-wrapper .mdxeditor-toolbar input[type=\"text\"],\n.dark .mdx-editor-wrapper .mdxeditor-toolbar input[type=\"search\"],\n.dark .mdx-editor-wrapper [class*=\"selectTrigger\"],\n.dark .mdx-editor-wrapper [class*=\"blockType\"] button {\n  background: var(--muted);\n  color: var(--foreground);\n  border-color: var(--border);\n}\n\n/* Dark mode content text - force override MDXEditor internal styles */\n.dark .mdx-editor-wrapper {\n  color: var(--foreground);\n}\n\n.dark .mdx-editor-wrapper .mdxeditor,\n.dark .mdx-editor-wrapper .mdxeditor-root-contenteditable {\n  color: var(--foreground);\n  background: var(--background);\n}\n\n.dark .mdx-editor-wrapper .mdxeditor-root-contenteditable * {\n  color: inherit;\n}\n\n.dark .mdx-editor-wrapper .mdxeditor-root-contenteditable h1,\n.dark .mdx-editor-wrapper .mdxeditor-root-contenteditable h2,\n.dark .mdx-editor-wrapper .mdxeditor-root-contenteditable h3,\n.dark .mdx-editor-wrapper .mdxeditor-root-contenteditable h4 {\n  color: var(--foreground);\n}\n\n.dark .mdx-editor-wrapper .mdxeditor-root-contenteditable a {\n  color: var(--primary);\n}\n\n.dark .mdx-editor-wrapper .mdxeditor-root-contenteditable pre,\n.dark .mdx-editor-wrapper .mdxeditor-root-contenteditable code {\n  background: var(--muted);\n}\n\n.dark .mdx-editor-wrapper .mdxeditor-root-contenteditable blockquote {\n  color: var(--muted-foreground);\n  border-left-color: var(--primary);\n}\n\n.mdxeditor-dropdown-container {\n  background: var(--popover);\n  border: 1px solid var(--border);\n  border-radius: 0.5rem;\n  box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);\n  z-index: 50;\n  color: var(--foreground);\n}\n\n/* MDXEditor Content Styles - Prose typography for headings */\n.mdx-editor-wrapper .prose {\n  color: var(--foreground);\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    font-weight: 700;\n    line-height: 1.25;\n    margin-top: 1.5em;\n    margin-bottom: 0.5em;\n    color: var(--foreground);\n  }\n\n  h1 {\n    font-size: 2.25em;\n  }\n\n  h2 {\n    font-size: 1.875em;\n  }\n\n  h3 {\n    font-size: 1.5em;\n  }\n\n  h4 {\n    font-size: 1.25em;\n  }\n\n  h5 {\n    font-size: 1.125em;\n  }\n\n  h6 {\n    font-size: 1em;\n  }\n\n  p {\n    margin-top: 0.75em;\n    margin-bottom: 0.75em;\n  }\n\n  blockquote {\n    border-left: 4px solid var(--border);\n    padding-left: 1em;\n    font-style: italic;\n    color: var(--muted-foreground);\n  }\n\n  pre {\n    border-radius: 0.5rem;\n    padding: 1rem;\n    overflow-x: auto;\n  }\n\n  code {\n    font-size: 0.875em;\n  }\n\n  ul,\n  ol {\n    padding-left: 1.5em;\n    margin-top: 0.5em;\n    margin-bottom: 0.5em;\n  }\n\n  ul {\n    list-style-type: disc;\n  }\n\n  ol {\n    list-style-type: decimal;\n  }\n\n  li {\n    margin-top: 0.25em;\n    margin-bottom: 0.25em;\n  }\n\n  img {\n    max-width: 100%;\n    height: auto;\n    border-radius: 0.5rem;\n  }\n\n  table {\n    width: 100%;\n    border-collapse: collapse;\n    margin-top: 1em;\n    margin-bottom: 1em;\n  }\n\n  th,\n  td {\n    border: 1px solid var(--border);\n    padding: 0.5rem;\n    text-align: left;\n  }\n\n  th {\n    background: var(--muted);\n    font-weight: 600;\n  }\n\n  hr {\n    border: none;\n    border-top: 1px solid var(--border);\n    margin: 2em 0;\n  }\n\n  a {\n    color: var(--primary);\n    text-decoration: underline;\n  }\n\n  a:hover {\n    opacity: 0.8;\n  }\n}\n\n/* MDXEditor styling for read-only preview mode */\n.mdx-preview {\n  --accentBase: var(--primary);\n  --accentBg: color-mix(in oklch, var(--accent) 10%, transparent);\n  --accentBgHover: color-mix(in oklch, var(--accent) 20%, transparent);\n  --accentText: var(--accent-foreground);\n  --accentSolid: var(--accent);\n  --baseBg: var(--background);\n  --baseBorder: var(--border);\n  --baseText: var(--foreground);\n  --baseTextContrast: var(--foreground);\n}\n\n.mdx-preview .mdxeditor {\n  border: none;\n  background: transparent;\n  font-family: inherit;\n  padding: 0;\n  color: var(--foreground);\n}\n\n.mdx-preview .mdxeditor.focused {\n  outline: none;\n  box-shadow: none;\n}\n\n.mdx-preview .mdxeditor .editor-root {\n  padding: 0;\n}\n\n.mdx-preview .mdxeditor-root-contenteditable {\n  color: var(--foreground);\n}\n\n.mdx-preview .mdxeditor-root-contenteditable * {\n  color: inherit;\n}\n\n/* Dark mode preview */\n.dark .mdx-preview {\n  color: var(--foreground);\n}\n\n.dark .mdx-preview .mdxeditor,\n.dark .mdx-preview .mdxeditor-root-contenteditable {\n  color: var(--foreground);\n  background: transparent;\n}\n\n.dark .mdx-preview .mdxeditor-root-contenteditable * {\n  color: inherit;\n}\n\n/* Task list checkbox alignment */\narticle li:has(> input[type=\"checkbox\"]) {\n  display: flex;\n  align-items: baseline;\n  gap: 0.5rem;\n  list-style: none;\n}\n\narticle li > input[type=\"checkbox\"] {\n  margin: 0;\n  position: relative;\n  top: 0.15em;\n  width: 1rem;\n  height: 1rem;\n  flex-shrink: 0;\n  accent-color: var(--primary);\n}\n\narticle ul:has(> li > input[type=\"checkbox\"]) {\n  list-style: none;\n  padding-left: 0;\n  margin-left: 0;\n}\n\n/* MDX Editor Layout - Fixed toolbar with scrollable content */\n.mdx-editor-wrapper {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  min-height: 0;\n  flex: 1;\n  overflow: hidden;\n  overflow-y: scroll;\n}\n\n.mdx-editor-wrapper .mdxeditor {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  min-height: 0;\n  flex: 1;\n  overflow: hidden;\n}\n\n.mdxeditor-toolbar {\n  position: relative;\n  z-index: 20;\n  background-color: var(--background);\n  border-bottom: 1px solid var(--border);\n  padding: 0.5rem 1rem;\n  flex-shrink: 0;\n}\n\n/* The editor content wrapper - this is what scrolls */\n.mdx-editor-wrapper .mdxeditor > div:not([class*=\"toolbar\"]) {\n  flex: 1;\n  overflow-y: auto;\n  min-height: 0;\n}\n\n/* The wrapper around contenteditable needs to scroll */\n.mdx-editor-wrapper [data-lexical-editor=\"true\"] {\n  outline: none;\n}\n"}},{"log":["info",[{"elements":[],"content":"Descending specificity selector may not applied. Consider rearranging the order of the selectors. See "},{"elements":[{"Hyperlink":{"href":"https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity"}}],"content":"MDN web docs"},{"elements":[],"content":" for more details."}]]}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"app\\globals.css"},"span":[16716,16734],"sourceCode":"@import \"tailwindcss\";\n@import \"tw-animate-css\";\n@import \"shadcn/tailwind.css\";\n\n@custom-variant dark (&:is(.dark *));\n\n@theme inline {\n  --color-background: var(--background);\n  --color-foreground: var(--foreground);\n  --font-sans: var(--font-sans);\n  --font-mono: var(--font-geist-mono);\n  --color-sidebar-ring: var(--sidebar-ring);\n  --color-sidebar-border: var(--sidebar-border);\n  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);\n  --color-sidebar-accent: var(--sidebar-accent);\n  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);\n  --color-sidebar-primary: var(--sidebar-primary);\n  --color-sidebar-foreground: var(--sidebar-foreground);\n  --color-sidebar: var(--sidebar);\n  --color-chart-5: var(--chart-5);\n  --color-chart-4: var(--chart-4);\n  --color-chart-3: var(--chart-3);\n  --color-chart-2: var(--chart-2);\n  --color-chart-1: var(--chart-1);\n  --color-ring: var(--ring);\n  --color-input: var(--input);\n  --color-border: var(--border);\n  --color-destructive: var(--destructive);\n  --color-accent-foreground: var(--accent-foreground);\n  --color-accent: var(--accent);\n  --color-muted-foreground: var(--muted-foreground);\n  --color-muted: var(--muted);\n  --color-secondary-foreground: var(--secondary-foreground);\n  --color-secondary: var(--secondary);\n  --color-primary-foreground: var(--primary-foreground);\n  --color-primary: var(--primary);\n  --color-popover-foreground: var(--popover-foreground);\n  --color-popover: var(--popover);\n  --color-card-foreground: var(--card-foreground);\n  --color-card: var(--card);\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n  --radius-2xl: calc(var(--radius) + 8px);\n  --radius-3xl: calc(var(--radius) + 12px);\n  --radius-4xl: calc(var(--radius) + 16px);\n}\n\n:root {\n  --background: oklch(1 0 0);\n  --foreground: oklch(0.145 0 0);\n  --card: oklch(1 0 0);\n  --card-foreground: oklch(0.145 0 0);\n  --popover: oklch(1 0 0);\n  --popover-foreground: oklch(0.145 0 0);\n  --primary: oklch(0.205 0 0);\n  --primary-foreground: oklch(0.985 0 0);\n  --secondary: oklch(0.97 0 0);\n  --secondary-foreground: oklch(0.205 0 0);\n  --muted: oklch(0.97 0 0);\n  --muted-foreground: oklch(0.556 0 0);\n  --accent: oklch(0.97 0 0);\n  --accent-foreground: oklch(0.205 0 0);\n  --destructive: oklch(0.58 0.22 27);\n  --border: oklch(0.922 0 0);\n  --input: oklch(0.922 0 0);\n  --ring: oklch(0.708 0 0);\n  --chart-1: oklch(0.809 0.105 251.813);\n  --chart-2: oklch(0.623 0.214 259.815);\n  --chart-3: oklch(0.546 0.245 262.881);\n  --chart-4: oklch(0.488 0.243 264.376);\n  --chart-5: oklch(0.424 0.199 265.638);\n  --radius: 0.225rem;\n  --sidebar: oklch(0.985 0 0);\n  --sidebar-foreground: oklch(0.145 0 0);\n  --sidebar-primary: oklch(0.205 0 0);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.97 0 0);\n  --sidebar-accent-foreground: oklch(0.205 0 0);\n  --sidebar-border: oklch(0.922 0 0);\n  --sidebar-ring: oklch(0.708 0 0);\n}\n\n.dark {\n  --background: oklch(0.145 0 0);\n  --foreground: oklch(0.95 0 0);\n  --card: oklch(0.205 0 0);\n  --card-foreground: oklch(0.985 0 0);\n  --popover: oklch(0.205 0 0);\n  --popover-foreground: oklch(0.985 0 0);\n  --primary: oklch(0.87 0 0);\n  --primary-foreground: oklch(0.205 0 0);\n  --secondary: oklch(0.269 0 0);\n  --secondary-foreground: oklch(0.985 0 0);\n  --muted: oklch(0.269 0 0);\n  --muted-foreground: oklch(0.708 0 0);\n  --accent: oklch(0.371 0 0);\n  --accent-foreground: oklch(0.985 0 0);\n  --destructive: oklch(0.704 0.191 22.216);\n  --border: oklch(1 0 0 / 10%);\n  --input: oklch(1 0 0 / 15%);\n  --ring: oklch(0.556 0 0);\n  --chart-1: oklch(0.809 0.105 251.813);\n  --chart-2: oklch(0.623 0.214 259.815);\n  --chart-3: oklch(0.546 0.245 262.881);\n  --chart-4: oklch(0.488 0.243 264.376);\n  --chart-5: oklch(0.424 0.199 265.638);\n  --sidebar: oklch(0.205 0 0);\n  --sidebar-foreground: oklch(0.985 0 0);\n  --sidebar-primary: oklch(0.488 0.243 264.376);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.269 0 0);\n  --sidebar-accent-foreground: oklch(0.985 0 0);\n  --sidebar-border: oklch(1 0 0 / 10%);\n  --sidebar-ring: oklch(0.556 0 0);\n}\n\n@layer base {\n  * {\n    @apply border-border outline-ring/50;\n  }\n\n  body {\n    @apply bg-background text-foreground;\n  }\n}\n\n/* MDXEditor Styles */\n.mdxeditor-popup-container {\n  height: 0;\n  width: 0;\n  display: block;\n  position: absolute;\n  /* Ensures it doesn't take up space in the document flow */\n  pointer-events: none;\n}\n\n.mdxeditor-popup-container > * {\n  pointer-events: auto;\n}\n\n.mdx-editor-wrapper {\n  --accentColor: var(--primary);\n  --accentColorLight: var(--primary-foreground);\n  --baseText: var(--foreground);\n  --baseTextContrast: var(--foreground);\n  --baseBg: var(--background);\n  --baseBorder: var(--border);\n  color: var(--foreground);\n  @apply max-h-dvh;\n  display: flex;\n  flex-direction: column;\n  height: 500px;\n  overflow: hidden;\n  /* Or your preferred fixed height */\n  /* or any fixed height/max-height */\n\n  [class*=\"mdxeditor\"] {\n    font-family: inherit;\n  }\n\n  .mdxeditor {\n    background: var(--background);\n    color: var(--foreground);\n  }\n\n  .mdxeditor-root-contenteditable {\n    color: var(--foreground);\n    /* padding: 1rem; */\n    min-height: 300px;\n    max-width: 100%;\n    padding: 1.5rem 2rem;\n    /* max-width: 800px; */\n    margin: 0 auto;\n    width: 100%;\n    flex-grow: 1;\n    overflow-x: hidden;\n    overflow-y: auto;\n  }\n\n  /* Force content text color */\n  .mdxeditor-root-contenteditable * {\n    color: inherit;\n  }\n\n  /* Heading styles in editor */\n  .mdxeditor-root-contenteditable h1 {\n    font-size: 2em;\n    font-weight: 700;\n    line-height: 1.25;\n    margin-top: 1em;\n    margin-bottom: 0.5em;\n    color: var(--foreground);\n  }\n\n  .mdxeditor-root-contenteditable h2 {\n    font-size: 1.5em;\n    font-weight: 600;\n    line-height: 1.3;\n    margin-top: 1.5em;\n    margin-bottom: 0.5em;\n    padding-bottom: 0.25em;\n    border-bottom: 1px solid var(--border);\n    color: var(--foreground);\n  }\n\n  .mdxeditor-root-contenteditable h3 {\n    font-size: 1.25em;\n    font-weight: 600;\n    line-height: 1.4;\n    margin-top: 1.25em;\n    margin-bottom: 0.5em;\n    color: var(--foreground);\n  }\n\n  .mdxeditor-root-contenteditable h4 {\n    font-size: 1.1em;\n    font-weight: 600;\n    line-height: 1.4;\n    margin-top: 1em;\n    margin-bottom: 0.5em;\n    color: var(--foreground);\n  }\n\n  /* Paragraph spacing */\n  .mdxeditor-root-contenteditable p {\n    margin-top: 0.75em;\n    margin-bottom: 0.75em;\n    line-height: 1.7;\n  }\n\n  /* Lists */\n  .mdxeditor-root-contenteditable ul {\n    list-style-type: disc;\n    padding-left: 1.5em;\n    margin: 0.75em 0;\n  }\n\n  .mdxeditor-root-contenteditable ol {\n    list-style-type: decimal;\n    padding-left: 1.5em;\n    margin: 0.75em 0;\n  }\n\n  .mdxeditor-root-contenteditable li {\n    margin: 0.25em 0;\n    line-height: 1.6;\n  }\n\n  /* Blockquote */\n  .mdxeditor-root-contenteditable blockquote {\n    border-left: 4px solid var(--primary);\n    padding-left: 1em;\n    margin: 1em 0;\n    font-style: italic;\n    color: var(--muted-foreground);\n  }\n\n  /* Images - fix overflow */\n  .mdxeditor-root-contenteditable img {\n    max-width: 100%;\n    height: auto;\n    border-radius: 0.5rem;\n    margin: 1em 0;\n  }\n\n  /* Table styling */\n  .mdxeditor-root-contenteditable table {\n    width: 100%;\n    border-collapse: collapse;\n    margin: 1em 0;\n  }\n\n  .mdxeditor-root-contenteditable th,\n  .mdxeditor-root-contenteditable td {\n    border: 1px solid var(--border);\n    padding: 0.5rem;\n    text-align: left;\n  }\n\n  .mdxeditor-root-contenteditable th {\n    background: var(--muted);\n    font-weight: 600;\n  }\n\n  /* Preserve link colors */\n  .mdxeditor-root-contenteditable a {\n    color: var(--primary);\n    text-decoration: underline;\n  }\n\n  /* Preserve code block styling */\n  .mdxeditor-root-contenteditable pre,\n  .mdxeditor-root-contenteditable code {\n    background: var(--muted);\n    font-size: 0.875em;\n  }\n\n  .mdxeditor-root-contenteditable pre {\n    padding: 1rem;\n    border-radius: 0.5rem;\n    overflow-x: auto;\n    margin: 1em 0;\n  }\n\n  .mdxeditor-root-contenteditable code {\n    padding: 0.2em 0.4em;\n    border-radius: 0.25rem;\n  }\n\n  /* Horizontal rule */\n  .mdxeditor-root-contenteditable hr {\n    border: none;\n    border-top: 1px solid var(--border);\n    margin: 2em 0;\n  }\n\n  .mdxeditor-toolbar {\n    position: sticky;\n    top: 0;\n    z-index: 10;\n    background: var(--background);\n    border-bottom: 1px solid var(--border);\n    flex-wrap: wrap;\n    gap: 0.25rem;\n    padding: 0.5rem;\n    color: var(--foreground);\n  }\n\n  /* All toolbar buttons - comprehensive selector */\n  .mdxeditor-toolbar button,\n  .mdxeditor-toolbar-button,\n  .mdxeditor-toolbar [role=\"button\"],\n  .mdxeditor-toolbar button[type=\"button\"],\n  [class*=\"diffSourceToggle\"] button,\n  [class*=\"viewMode\"] button,\n  [class*=\"toggleGroup\"] button {\n    border-radius: 0.375rem;\n    color: var(--foreground);\n    background: transparent;\n    border: 1px solid transparent;\n    cursor: pointer;\n  }\n\n  .mdxeditor-toolbar button:hover,\n  .mdxeditor-toolbar-button:hover,\n  .mdxeditor-toolbar [role=\"button\"]:hover,\n  [class*=\"diffSourceToggle\"] button:hover,\n  [class*=\"viewMode\"] button:hover,\n  [class*=\"toggleGroup\"] button:hover {\n    background: var(--accent);\n    color: var(--accent-foreground);\n  }\n\n  .mdxeditor-toolbar [data-state=\"on\"],\n  .mdxeditor-toolbar button[data-active=\"true\"],\n  .mdxeditor-toolbar [aria-pressed=\"true\"],\n  [class*=\"diffSourceToggle\"] button[data-state=\"on\"],\n  [class*=\"viewMode\"] button[data-state=\"on\"],\n  [class*=\"toggleGroup\"] button[data-state=\"on\"] {\n    background: var(--accent);\n    color: var(--accent-foreground);\n  }\n\n  /* BlockTypeSelect and other selects */\n  .mdxeditor-toolbar select,\n  .mdxeditor-toolbar input[type=\"text\"],\n  .mdxeditor-toolbar input[type=\"search\"],\n  [class*=\"selectTrigger\"],\n  [class*=\"blockType\"] button {\n    background: var(--muted);\n    color: var(--foreground);\n    border: 1px solid var(--border);\n    border-radius: 0.375rem;\n  }\n\n  .mdxeditor-toolbar svg {\n    color: currentColor;\n  }\n\n  .mdxeditor-toolbar [class*=\"separator\"] {\n    background: var(--border);\n  }\n}\n\n/* Dark mode specific overrides with high specificity */\n.dark .mdx-editor-wrapper .mdxeditor-toolbar button,\n.dark .mdx-editor-wrapper .mdxeditor-toolbar-button,\n.dark .mdx-editor-wrapper .mdxeditor-toolbar [role=\"button\"],\n.dark .mdx-editor-wrapper [class*=\"diffSourceToggle\"] button,\n.dark .mdx-editor-wrapper [class*=\"viewMode\"] button,\n.dark .mdx-editor-wrapper [class*=\"toggleGroup\"] button {\n  color: var(--foreground);\n  background: transparent;\n  border-color: var(--border);\n}\n\n.dark .mdx-editor-wrapper .mdxeditor-toolbar button:hover,\n.dark .mdx-editor-wrapper .mdxeditor-toolbar-button:hover,\n.dark .mdx-editor-wrapper .mdxeditor-toolbar [role=\"button\"]:hover,\n.dark .mdx-editor-wrapper [class*=\"diffSourceToggle\"] button:hover,\n.dark .mdx-editor-wrapper [class*=\"viewMode\"] button:hover,\n.dark .mdx-editor-wrapper [class*=\"toggleGroup\"] button:hover {\n  background: var(--accent);\n  color: var(--accent-foreground);\n}\n\n.dark .mdx-editor-wrapper .mdxeditor-toolbar [data-state=\"on\"],\n.dark .mdx-editor-wrapper [class*=\"diffSourceToggle\"] button[data-state=\"on\"],\n.dark .mdx-editor-wrapper [class*=\"viewMode\"] button[data-state=\"on\"],\n.dark .mdx-editor-wrapper [class*=\"toggleGroup\"] button[data-state=\"on\"] {\n  background: var(--accent);\n  color: var(--accent-foreground);\n}\n\n.dark .mdx-editor-wrapper .mdxeditor-toolbar select,\n.dark .mdx-editor-wrapper .mdxeditor-toolbar input[type=\"text\"],\n.dark .mdx-editor-wrapper .mdxeditor-toolbar input[type=\"search\"],\n.dark .mdx-editor-wrapper [class*=\"selectTrigger\"],\n.dark .mdx-editor-wrapper [class*=\"blockType\"] button {\n  background: var(--muted);\n  color: var(--foreground);\n  border-color: var(--border);\n}\n\n/* Dark mode content text - force override MDXEditor internal styles */\n.dark .mdx-editor-wrapper {\n  color: var(--foreground);\n}\n\n.dark .mdx-editor-wrapper .mdxeditor,\n.dark .mdx-editor-wrapper .mdxeditor-root-contenteditable {\n  color: var(--foreground);\n  background: var(--background);\n}\n\n.dark .mdx-editor-wrapper .mdxeditor-root-contenteditable * {\n  color: inherit;\n}\n\n.dark .mdx-editor-wrapper .mdxeditor-root-contenteditable h1,\n.dark .mdx-editor-wrapper .mdxeditor-root-contenteditable h2,\n.dark .mdx-editor-wrapper .mdxeditor-root-contenteditable h3,\n.dark .mdx-editor-wrapper .mdxeditor-root-contenteditable h4 {\n  color: var(--foreground);\n}\n\n.dark .mdx-editor-wrapper .mdxeditor-root-contenteditable a {\n  color: var(--primary);\n}\n\n.dark .mdx-editor-wrapper .mdxeditor-root-contenteditable pre,\n.dark .mdx-editor-wrapper .mdxeditor-root-contenteditable code {\n  background: var(--muted);\n}\n\n.dark .mdx-editor-wrapper .mdxeditor-root-contenteditable blockquote {\n  color: var(--muted-foreground);\n  border-left-color: var(--primary);\n}\n\n.mdxeditor-dropdown-container {\n  background: var(--popover);\n  border: 1px solid var(--border);\n  border-radius: 0.5rem;\n  box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);\n  z-index: 50;\n  color: var(--foreground);\n}\n\n/* MDXEditor Content Styles - Prose typography for headings */\n.mdx-editor-wrapper .prose {\n  color: var(--foreground);\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    font-weight: 700;\n    line-height: 1.25;\n    margin-top: 1.5em;\n    margin-bottom: 0.5em;\n    color: var(--foreground);\n  }\n\n  h1 {\n    font-size: 2.25em;\n  }\n\n  h2 {\n    font-size: 1.875em;\n  }\n\n  h3 {\n    font-size: 1.5em;\n  }\n\n  h4 {\n    font-size: 1.25em;\n  }\n\n  h5 {\n    font-size: 1.125em;\n  }\n\n  h6 {\n    font-size: 1em;\n  }\n\n  p {\n    margin-top: 0.75em;\n    margin-bottom: 0.75em;\n  }\n\n  blockquote {\n    border-left: 4px solid var(--border);\n    padding-left: 1em;\n    font-style: italic;\n    color: var(--muted-foreground);\n  }\n\n  pre {\n    border-radius: 0.5rem;\n    padding: 1rem;\n    overflow-x: auto;\n  }\n\n  code {\n    font-size: 0.875em;\n  }\n\n  ul,\n  ol {\n    padding-left: 1.5em;\n    margin-top: 0.5em;\n    margin-bottom: 0.5em;\n  }\n\n  ul {\n    list-style-type: disc;\n  }\n\n  ol {\n    list-style-type: decimal;\n  }\n\n  li {\n    margin-top: 0.25em;\n    margin-bottom: 0.25em;\n  }\n\n  img {\n    max-width: 100%;\n    height: auto;\n    border-radius: 0.5rem;\n  }\n\n  table {\n    width: 100%;\n    border-collapse: collapse;\n    margin-top: 1em;\n    margin-bottom: 1em;\n  }\n\n  th,\n  td {\n    border: 1px solid var(--border);\n    padding: 0.5rem;\n    text-align: left;\n  }\n\n  th {\n    background: var(--muted);\n    font-weight: 600;\n  }\n\n  hr {\n    border: none;\n    border-top: 1px solid var(--border);\n    margin: 2em 0;\n  }\n\n  a {\n    color: var(--primary);\n    text-decoration: underline;\n  }\n\n  a:hover {\n    opacity: 0.8;\n  }\n}\n\n/* MDXEditor styling for read-only preview mode */\n.mdx-preview {\n  --accentBase: var(--primary);\n  --accentBg: color-mix(in oklch, var(--accent) 10%, transparent);\n  --accentBgHover: color-mix(in oklch, var(--accent) 20%, transparent);\n  --accentText: var(--accent-foreground);\n  --accentSolid: var(--accent);\n  --baseBg: var(--background);\n  --baseBorder: var(--border);\n  --baseText: var(--foreground);\n  --baseTextContrast: var(--foreground);\n}\n\n.mdx-preview .mdxeditor {\n  border: none;\n  background: transparent;\n  font-family: inherit;\n  padding: 0;\n  color: var(--foreground);\n}\n\n.mdx-preview .mdxeditor.focused {\n  outline: none;\n  box-shadow: none;\n}\n\n.mdx-preview .mdxeditor .editor-root {\n  padding: 0;\n}\n\n.mdx-preview .mdxeditor-root-contenteditable {\n  color: var(--foreground);\n}\n\n.mdx-preview .mdxeditor-root-contenteditable * {\n  color: inherit;\n}\n\n/* Dark mode preview */\n.dark .mdx-preview {\n  color: var(--foreground);\n}\n\n.dark .mdx-preview .mdxeditor,\n.dark .mdx-preview .mdxeditor-root-contenteditable {\n  color: var(--foreground);\n  background: transparent;\n}\n\n.dark .mdx-preview .mdxeditor-root-contenteditable * {\n  color: inherit;\n}\n\n/* Task list checkbox alignment */\narticle li:has(> input[type=\"checkbox\"]) {\n  display: flex;\n  align-items: baseline;\n  gap: 0.5rem;\n  list-style: none;\n}\n\narticle li > input[type=\"checkbox\"] {\n  margin: 0;\n  position: relative;\n  top: 0.15em;\n  width: 1rem;\n  height: 1rem;\n  flex-shrink: 0;\n  accent-color: var(--primary);\n}\n\narticle ul:has(> li > input[type=\"checkbox\"]) {\n  list-style: none;\n  padding-left: 0;\n  margin-left: 0;\n}\n\n/* MDX Editor Layout - Fixed toolbar with scrollable content */\n.mdx-editor-wrapper {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  min-height: 0;\n  flex: 1;\n  overflow: hidden;\n  overflow-y: scroll;\n}\n\n.mdx-editor-wrapper .mdxeditor {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  min-height: 0;\n  flex: 1;\n  overflow: hidden;\n}\n\n.mdxeditor-toolbar {\n  position: relative;\n  z-index: 20;\n  background-color: var(--background);\n  border-bottom: 1px solid var(--border);\n  padding: 0.5rem 1rem;\n  flex-shrink: 0;\n}\n\n/* The editor content wrapper - this is what scrolls */\n.mdx-editor-wrapper .mdxeditor > div:not([class*=\"toolbar\"]) {\n  flex: 1;\n  overflow-y: auto;\n  min-height: 0;\n}\n\n/* The wrapper around contenteditable needs to scroll */\n.mdx-editor-wrapper [data-lexical-editor=\"true\"] {\n  outline: none;\n}\n"},"tags":[],"source":null},{"category":"lint/style/useImportType","severity":"warning","description":"All these imports are only used as types.","message":[{"elements":[],"content":"All these imports are only used as types."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Importing the types with "},{"elements":["Emphasis"],"content":"import type"},{"elements":[],"content":" ensures that they are removed by the compilers and avoids loading unnecessary modules."}]]},{"log":["info",[{"elements":[],"content":"Safe fix: Use "},{"elements":["Emphasis"],"content":"import type"},{"elements":[],"content":"."}]]},{"diff":{"dictionary":"\"use client\";\n\nimport type { MDXEditorMethods } from \"@mdxeditor/editor\";import { ArticleEditorSettingsSidebar } from \"./article-editor-settings-sidebar\";\nimport { ForwardRefEditor } from \"./forward-ref-editor\";\nimport type { Route } from \"next\";\n\ninterface ArticleEditorLayoutProps {  );\n}\n","ops":[{"diffOp":{"equal":{"range":[0,73]}}},{"equalLines":{"line_count":11}},{"diffOp":{"equal":{"range":[73,219]}}},{"diffOp":{"insert":{"range":[219,224]}}},{"diffOp":{"equal":{"range":[224,245]}}},{"diffOp":{"equal":{"range":[245,284]}}},{"equalLines":{"line_count":225}},{"diffOp":{"equal":{"range":[284,291]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\articles\\components\\article-editor.tsx"},"span":[918,939],"sourceCode":"\"use client\";\n\nimport type { MDXEditorMethods } from \"@mdxeditor/editor\";\nimport { useRouter } from \"next/navigation\";\nimport { useCallback, useRef, useState, useTransition } from \"react\";\nimport { toast } from \"sonner\";\nimport type { MediaFile } from \"@/features/medias/medias.types\";\nimport { ImageInsertDialog } from \"../../medias/components/image-insert-dialog\";\nimport { uploadImageAction } from \"../../medias/medias.actions\";\nimport { createArticleAction, updateArticleAction } from \"../articles.actions\";\nimport { ARTICLE_MESSAGES, ARTICLE_ROUTES } from \"../articles.constants\";\nimport type { Article, CreateArticleInput } from \"../articles.types\";\nimport { getContentStats } from \"../articles.utils\";\nimport { ArticleEditorHeader } from \"./article-editor-header\";\nimport { ArticleEditorSettingsSidebar } from \"./article-editor-settings-sidebar\";\nimport { ForwardRefEditor } from \"./forward-ref-editor\";\nimport { Route } from \"next\";\n\ninterface ArticleEditorLayoutProps {\n  article?: Article;\n  mode: \"create\" | \"edit\";\n}\n\ninterface EditorUIState {\n  imageInsertDialogOpen: boolean;\n  hasUnsavedChanges: boolean;\n  sidebarCollapsed: boolean;\n}\n\nexport function ArticleEditor({ article, mode }: ArticleEditorLayoutProps) {\n  const router = useRouter();\n  const editorRef = useRef<MDXEditorMethods>(null);\n  const [isPending, startTransition] = useTransition();\n\n  const [title, setTitle] = useState(article?.title ?? \"\");\n  const [lang, setLang] = useState<\"fr\" | \"en\">(article?.lang ?? \"en\");\n  const [description, setDescription] = useState(article?.description ?? \"\");\n  const [tags, setTags] = useState<string[]>(article?.tags ?? []);\n  const [tagInput, setTagInput] = useState(\"\");\n  const [coverImage, setCoverImage] = useState(article?.coverImage ?? \"\");\n\n  const [uiState, setUiState] = useState<EditorUIState>({\n    imageInsertDialogOpen: false,\n    hasUnsavedChanges: false,\n    sidebarCollapsed: false,\n  });\n\n  const handleTitleChange = (value: string) => {\n    setTitle(value);\n    setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }));\n  };\n\n  const addTag = () => {\n    const trimmedTag = tagInput.trim();\n    if (trimmedTag && !tags.includes(trimmedTag)) {\n      setTags([...tags, trimmedTag]);\n      setTagInput(\"\");\n      setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }));\n    }\n  };\n\n  const removeTag = (tagToRemove: string) => {\n    setTags(tags.filter((tag) => tag !== tagToRemove));\n    setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }));\n  };\n\n  // Image upload handler for MDXEditor\n  const handleImageUpload = useCallback(async (file: File): Promise<string> => {\n    const result = await uploadImageAction(file);\n    if (!result.success) {\n      throw new Error(result.error);\n    }\n    return result.data.url;\n  }, []);\n\n  const handleImageInsert = (image: MediaFile) => {\n    if (editorRef.current) {\n      editorRef.current.insertMarkdown(`![image](${image.url})`);\n    }\n    setUiState((prev) => ({ ...prev, imageInsertDialogOpen: false }));\n  };\n\n  const handleSave = () => {\n    // Client-side validation\n    if (!coverImage.trim()) {\n      toast.warning(\"Please add a cover image before saving\", {\n        description: \"Cover image is required for articles\",\n      });\n      return;\n    }\n\n    startTransition(async () => {\n      try {\n        const content = editorRef.current?.getMarkdown() ?? \"\";\n        const input: CreateArticleInput = {\n          title,\n          lang,\n          content,\n          description,\n          tags,\n          coverImage,\n          published: article?.published ?? false,\n        };\n\n        let result: Awaited<ReturnType<typeof createArticleAction>>;\n        if (mode === \"create\") {\n          result = await createArticleAction(input);\n        } else if (article?.sha) {\n          result = await updateArticleAction(article.id, {\n            ...input,\n            sha: article.sha,\n          });\n        } else {\n          throw new Error(\"Failed to save article\");\n        }\n\n        if (!result.success) {\n          throw new Error(result.error);\n        }\n\n        setUiState((prev) => ({ ...prev, hasUnsavedChanges: false }));\n        toast.success(ARTICLE_MESSAGES.SAVE_SUCCESS, {\n          description: ARTICLE_MESSAGES.SAVE_SUCCESS_DESC,\n        });\n\n        // Redirect to edit page if new article was created\n        if (mode === \"create\") {\n          router.push(ARTICLE_ROUTES.EDIT(result.data) as Route);\n          router.refresh();\n        }\n      } catch (error) {\n        const message =\n          error instanceof Error ? error.message : ARTICLE_MESSAGES.SAVE_ERROR;\n        toast.error(message);\n        console.error(\"Error saving article:\", error);\n      }\n    });\n  };;\n\n  // Content stats - computed on each render (refs don't trigger re-renders)\n  const content = editorRef.current?.getMarkdown() ?? \"\";\n  const { wordCount, readTime } = getContentStats(content);\n\n  return (\n    <div className=\"flex h-screen flex-col overflow-hidden bg-background\">\n      {/* Top Navigation Bar */}\n      <ArticleEditorHeader\n        title={title}\n        id={article?.id}\n        mode={mode}\n        article={article}\n        isSaving={isPending}\n        hasUnsavedChanges={uiState.hasUnsavedChanges}\n        sidebarCollapsed={uiState.sidebarCollapsed}\n        onSave={handleSave}\n        onToggleSidebar={() =>\n          setUiState((prev) => ({\n            ...prev,\n            sidebarCollapsed: !prev.sidebarCollapsed,\n          }))\n        }\n      />\n\n      {/* Main Content Area */}\n      <div className=\"flex flex-1 overflow-hidden\">\n        {/* Editor Panel - Takes remaining space */}\n        <div className=\"flex flex-1 flex-col overflow-hidden\">\n          {/* Title Input - Clean, prominent */}\n          <div className=\"shrink-0 border-b bg-linear-to-b from-muted/30 to-transparent px-8 py-6\">\n            <input\n              type=\"text\"\n              placeholder=\"Article title...\"\n              value={title}\n              onChange={(e) => handleTitleChange(e.target.value)}\n              className=\"w-full bg-transparent text-3xl font-bold tracking-tight outline-none placeholder:text-muted-foreground/40\"\n            />\n            <div className=\"mt-2 flex items-center gap-4 text-xs text-muted-foreground\">\n              <span>{wordCount} words</span>\n              <span>•</span>\n              <span>{readTime} min read</span>\n              {article?.createdAt && (\n                <>\n                  <span>•</span>\n                  <span>\n                    Created {new Date(article.createdAt).toLocaleDateString()}\n                  </span>\n                </>\n              )}\n            </div>\n          </div>\n\n          {/* MDX Editor - Full Height with sticky toolbar */}\n          <div className=\"flex flex-1 flex-col min-h-0 overflow-hidden\">\n            <ForwardRefEditor\n              ref={editorRef}\n              markdown={article?.content ?? \"\"}\n              onImageUpload={handleImageUpload}\n              onImageInsertClick={() =>\n                setUiState((prev) => ({ ...prev, imageInsertDialogOpen: true }))\n              }\n              onChange={() =>\n                setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }))\n              }\n            />\n          </div>\n        </div>\n\n        {/* Right Sidebar - Metadata Panel */}\n        <ArticleEditorSettingsSidebar\n          lang={lang}\n          description={description}\n          tags={tags}\n          tagInput={tagInput}\n          coverImage={coverImage}\n          collapsed={uiState.sidebarCollapsed}\n          onLangChange={(value) => {\n            setLang(value);\n            setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }));\n          }}\n          onDescriptionChange={(value) => {\n            setDescription(value);\n            setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }));\n          }}\n          onTagInputChange={setTagInput}\n          onAddTag={addTag}\n          onRemoveTag={removeTag}\n          onCoverImageChange={(url) => {\n            setCoverImage(url);\n            setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }));\n          }}\n          onCollapse={() =>\n            setUiState((prev) => ({ ...prev, sidebarCollapsed: true }))\n          }\n        />\n      </div>\n\n      <ImageInsertDialog\n        open={uiState.imageInsertDialogOpen}\n        onClose={() =>\n          setUiState((prev) => ({ ...prev, imageInsertDialogOpen: false }))\n        }\n        onSelect={handleImageInsert}\n      />\n    </div>\n  );\n}\n"},"tags":["fixable"],"source":null},{"category":"lint/correctness/noUnusedVariables","severity":"warning","description":"This interface MediaUploaderProps is unused.","message":[{"elements":[],"content":"This interface "},{"elements":["Emphasis"],"content":"MediaUploaderProps"},{"elements":[],"content":" is unused."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Unused variables are often the result of an incomplete refactoring, typos, or other sources of bugs."}]]}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\medias\\components\\media-uploader.tsx"},"span":[103,121],"sourceCode":"\"use client\";\n\nimport { ImageUploader } from \"@/features/medias/components/image-uploader\";\n\ninterface MediaUploaderProps {\n  onUploadSuccess?: () => void;\n}\n\nexport function MediaUploader() {\n  return <ImageUploader />;\n}\n"},"tags":[],"source":null},{"category":"lint/style/noNonNullAssertion","severity":"warning","description":"Forbidden non-null assertion.","message":[{"elements":[],"content":"Forbidden non-null assertion."}],"advices":{"advices":[]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\posts\\components\\post-card.tsx"},"span":[6196,6205],"sourceCode":"\"use client\";\n\nimport {\n  IconCheck,\n  IconEdit,\n  IconEye,\n  IconFileText,\n  IconTrash,\n  IconX,\n} from \"@tabler/icons-react\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport type { Post } from \"@/features/posts/posts.types\";\nimport { formatDate } from \"@/features/shared/shared.utils\";\nimport PostDeleteDialog from \"./post-delete-dialog\";\nimport { PostPublishDialog } from \"./post-publish-dialog\";\n\ninterface PostCardProps {\n  post: Post;\n}\n\nexport function PostCard({ post }: PostCardProps) {\n  const formattedDate = formatDate(new Date(post.createdAt));\n\n  return (\n    <TooltipProvider>\n      <div className=\"group relative flex flex-col overflow-hidden rounded-2xl border bg-card transition-all hover:shadow-lg hover:border-primary/20\">\n        {/* Cover Image */}\n        <div className=\"relative aspect-video w-full overflow-hidden bg-muted\">\n          {post.coverImage ? (\n            <Image\n              src={post.coverImage}\n              alt={post.title}\n              fill\n              priority\n              className=\"object-cover transition-transform duration-500 group-hover:scale-105\"\n              sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\n            />\n          ) : (\n            <div className=\"flex h-full w-full items-center justify-center bg-muted/50\">\n              <IconFileText className=\"size-10 text-muted-foreground/20\" />\n            </div>\n          )}\n          <div className=\"absolute inset-0 bg-linear-to-t from-black/60 via-transparent to-transparent opacity-60\" />\n\n          {/* Status Badge on Image */}\n          <div className=\"absolute left-3 top-3\">\n            <Badge\n              variant={post.published ? \"default\" : \"secondary\"}\n              className=\"h-6 gap-1 rounded-lg px-2 text-[10px] font-bold uppercase tracking-wider shadow-lg backdrop-blur-md\"\n            >\n              {post.published ? (\n                <>\n                  <IconCheck className=\"size-3\" />\n                  Published\n                </>\n              ) : (\n                \"Draft\"\n              )}\n            </Badge>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"flex flex-1 flex-col p-5\">\n          <h3 className=\"mb-2 line-clamp-2 text-lg font-bold tracking-tight group-hover:text-primary transition-colors\">\n            {post.title}\n          </h3>\n\n          <p className=\"mb-4 line-clamp-3 flex-1 text-sm leading-relaxed text-muted-foreground\">\n            {post.content}\n          </p>\n\n          <div className=\"flex items-center gap-3 text-[11px] font-medium text-muted-foreground mb-4\">\n            <span className=\"flex items-center gap-1.5 shrink-0\">\n              {formattedDate}\n            </span>\n            {post.author && (\n              <span className=\"flex items-center gap-1.5 border-l pl-3 truncate\">\n                By {post.author}\n              </span>\n            )}\n          </div>\n\n          {/* Related article if exists */}\n          {post.article && (\n            <div className=\"mb-4 flex items-center gap-2 rounded-lg bg-muted/30 p-2 text-[11px] text-muted-foreground truncate\">\n              <IconFileText className=\"size-3 shrink-0\" />\n              <Link\n                href={`/cms/articles/${post.article}`}\n                className=\"truncate hover:text-primary\"\n              >\n                Related Article\n              </Link>\n            </div>\n          )}\n\n          {/* Actions */}\n          <div className=\"flex items-center justify-between border-t pt-4 gap-2\">\n            <Badge\n              variant=\"outline\"\n              className=\"rounded-md text-[10px] font-medium\"\n            >\n              {post.lang === \"fr\" ? \"Français\" : \"English\"}\n            </Badge>\n\n            <div className=\"flex items-center gap-1\">\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button\n                    asChild\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"h-8 w-8 rounded-lg hover:bg-primary/10 hover:text-primary\"\n                  >\n                    <Link href={`/cms/posts/${post.id}`}>\n                      <IconEye className=\"size-4\" />\n                    </Link>\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent>View post</TooltipContent>\n              </Tooltip>\n\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button\n                    asChild\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"h-8 w-8 rounded-lg hover:bg-primary/10 hover:text-primary\"\n                  >\n                    <Link href={`/cms/posts/${post.id}/edit`}>\n                      <IconEdit className=\"size-4\" />\n                    </Link>\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent>Edit post</TooltipContent>\n              </Tooltip>\n            </div>\n\n            <div className=\"flex items-center gap-1\">\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <PostPublishDialog post={post}>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"h-8 w-8 rounded-lg hover:bg-primary/10 hover:text-primary\"\n                    >\n                      {post.published ? (\n                        <IconX className=\"size-4 text-amber-600\" />\n                      ) : (\n                        <IconCheck className=\"size-4 text-emerald-600\" />\n                      )}\n                    </Button>\n                  </PostPublishDialog>\n                </TooltipTrigger>\n                <TooltipContent>\n                  {post.published ? \"Unpublish\" : \"Publish\"}\n                </TooltipContent>\n              </Tooltip>\n\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <PostDeleteDialog postId={post.id} postSha={post.sha!}>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"h-8 w-8 rounded-lg text-destructive hover:bg-destructive/10 hover:text-destructive\"\n                    >\n                      <IconTrash className=\"size-4\" />\n                    </Button>\n                  </PostDeleteDialog>\n                </TooltipTrigger>\n                <TooltipContent>Delete post</TooltipContent>\n              </Tooltip>\n            </div>\n          </div>\n        </div>\n      </div>\n    </TooltipProvider>\n  );\n}\n\nexport function PostCardSkeleton() {\n  return (\n    <div className=\"flex flex-col overflow-hidden rounded-2xl border bg-card\">\n      <div className=\"aspect-video w-full animate-pulse bg-muted\" />\n      <div className=\"p-5 space-y-4\">\n        <div className=\"h-6 w-1/2 animate-pulse rounded-lg bg-muted\" />\n        <div className=\"space-y-2\">\n          <div className=\"h-4 w-full animate-pulse rounded-lg bg-muted\" />\n          <div className=\"h-4 w-4/5 animate-pulse rounded-lg bg-muted\" />\n        </div>\n        <div className=\"h-4 w-1/3 animate-pulse rounded-lg bg-muted\" />\n        <div className=\"flex justify-between pt-4 border-t\">\n          <div className=\"flex gap-2\">\n            <div className=\"h-8 w-8 animate-pulse rounded-lg bg-muted\" />\n            <div className=\"h-8 w-8 animate-pulse rounded-lg bg-muted\" />\n          </div>\n          <div className=\"flex gap-2\">\n            <div className=\"h-8 w-8 animate-pulse rounded-lg bg-muted\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"},"tags":[],"source":null},{"category":"lint/style/noNonNullAssertion","severity":"warning","description":"Forbidden non-null assertion.","message":[{"elements":[],"content":"Forbidden non-null assertion."}],"advices":{"advices":[]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\posts\\components\\post-editor.tsx"},"span":[2411,2420],"sourceCode":"\"use client\";\n\nimport { IconLanguage, IconPlus } from \"@tabler/icons-react\";\nimport { useRouter } from \"next/navigation\";\nimport { useEffect, useState, useTransition } from \"react\";\nimport { toast } from \"sonner\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Combobox,\n  ComboboxContent,\n  ComboboxEmpty,\n  ComboboxInput,\n  ComboboxItem,\n  ComboboxList,\n} from \"@/components/ui/combobox\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { listArticlesAction } from \"@/features/articles/articles.actions\";\nimport type { Article } from \"@/features/articles/articles.types\";\nimport { CoverImageSelector } from \"@/features/medias/components/cover-image-selector\";\nimport type { MediaFile } from \"@/features/medias/medias.types\";\nimport {\n  createPostAction,\n  updatePostAction,\n} from \"@/features/posts/posts.actions\";\nimport type { Post } from \"@/features/posts/posts.types\";\n\ninterface PostEditorProps {\n  post?: Post;\n}\n\nexport function PostEditor({ post }: PostEditorProps) {\n  const router = useRouter();\n  const [isPending, startTransition] = useTransition();\n\n  const [title, setTitle] = useState(post?.title || \"\");\n  const [content, setContent] = useState(post?.content || \"\");\n  const [lang, setLang] = useState<\"fr\" | \"en\">(post?.lang || \"fr\");\n  const [article, setArticle] = useState(post?.article || \"\");\n  const [coverImage, setCoverImage] = useState(post?.coverImage || \"\");\n  const [author, setAuthor] = useState(post?.author || \"\");\n  const [articles, setArticles] = useState<Article[]>([]);\n\n  useEffect(() => {\n    listArticlesAction().then((result) => {\n      if (result.success) {\n        setArticles(result.data);\n      }\n    });\n  }, []);\n\n  const handleSave = () => {\n    if (!title.trim() || !content.trim()) {\n      toast.error(\"Title and content are required\");\n      return;\n    }\n\n    startTransition(async () => {\n      const input = {\n        title,\n        content,\n        lang,\n        article: article || undefined,\n        coverImage: coverImage || undefined,\n        author: author || undefined,\n        published: false,\n      };\n\n      const result = post\n        ? await updatePostAction(post.id, {\n            ...input,\n            sha: post.sha!,\n            createdAt: post.createdAt,\n          })\n        : await createPostAction(input);\n\n      if (result.success) {\n        toast.success(post ? \"Post updated\" : \"Post created\");\n        router.push(\"/cms/posts\");\n      } else {\n        toast.error(result.error || \"Failed to save post\");\n      }\n    });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <Label htmlFor=\"title\">Title</Label>\n        <Input\n          id=\"title\"\n          placeholder=\"Post title...\"\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n          className=\"mt-2\"\n        />\n      </div>\n\n      <div>\n        <Label htmlFor=\"author\">Author (Optional)</Label>\n        <Input\n          id=\"author\"\n          placeholder=\"Your name...\"\n          value={author}\n          onChange={(e) => setAuthor(e.target.value)}\n          className=\"mt-2\"\n        />\n      </div>\n\n      <div>\n        <Label htmlFor=\"lang\" className=\"flex items-center gap-2\">\n          <IconLanguage className=\"size-4\" />\n          Language\n        </Label>\n        <Select value={lang} onValueChange={(value) => setLang(value as \"fr\" | \"en\")}>\n          <SelectTrigger id=\"lang\" className=\"mt-2\">\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"fr\">Français</SelectItem>\n            <SelectItem value=\"en\">English</SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n\n      <div>\n        <Label htmlFor=\"content\">Content</Label>\n        <Textarea\n          id=\"content\"\n          placeholder=\"Write your post here...\"\n          value={content}\n          onChange={(e) => setContent(e.target.value)}\n          className=\"mt-2 min-h-64\"\n        />\n      </div>\n\n      <div>\n        <Label htmlFor=\"article\">Related Article (Optional)</Label>\n        <div className=\"mt-2\">\n          <Combobox\n            value={article}\n            onValueChange={(value) => setArticle(value as string)}\n          >\n            <ComboboxInput\n              placeholder=\"Select an article...\"\n              showClear={!!article}\n            />\n            <ComboboxContent>\n              <ComboboxList>\n                <ComboboxEmpty>No articles found</ComboboxEmpty>\n                {articles.map((a) => (\n                  <ComboboxItem key={a.id} value={a.id}>\n                    {a.title}\n                  </ComboboxItem>\n                ))}\n              </ComboboxList>\n            </ComboboxContent>\n          </Combobox>\n        </div>\n      </div>\n\n      <div>\n        <Label htmlFor=\"cover\">Cover Image</Label>\n        <div className=\"mt-2\">\n          <CoverImageSelector\n            selectedImageUrl={coverImage}\n            onSelectImage={(image: MediaFile) => setCoverImage(image.url)}\n          />\n        </div>\n      </div>\n\n      <div className=\"flex gap-3 pt-4\">\n        <Button onClick={handleSave} disabled={isPending} className=\"gap-2\">\n          <IconPlus className=\"size-4\" />\n          {isPending ? \"Saving...\" : post ? \"Update Post\" : \"Create Post\"}\n        </Button>\n      </div>\n    </div>\n  );\n}\n"},"tags":[],"source":null},{"category":"lint/correctness/noUnusedImports","severity":"warning","description":"Several of these imports are unused.","message":[{"elements":[],"content":"Several of these "},{"elements":["Emphasis"],"content":"imports"},{"elements":[],"content":" are unused."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Unused imports might be the result of an incomplete refactoring."}]]},{"log":["info",[{"elements":[],"content":"Unsafe fix: Remove the unused imports."}]]},{"diff":{"dictionary":"import { z } from \"zod\";\r\nimport { sanitizeText, sanitizeEmail, isValidUrl, sanitizeTags } from \"@/lib/sanitize\";\r\n\r\n/**\rexport type CreatePostInput = z.infer<typeof CreatePostSchema>;\r\nexport type UpdatePostInput = z.infer<typeof UpdatePostSchema>;\r\n","ops":[{"diffOp":{"equal":{"range":[0,49]}}},{"diffOp":{"delete":{"range":[49,62]}}},{"diffOp":{"delete":{"range":[62,64]}}},{"diffOp":{"equal":{"range":[64,76]}}},{"diffOp":{"delete":{"range":[76,89]}}},{"diffOp":{"equal":{"range":[89,121]}}},{"equalLines":{"line_count":74}},{"diffOp":{"equal":{"range":[121,251]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"lib\\validation\\post.schema.ts"},"span":[49,88],"sourceCode":"import { z } from \"zod\";\r\nimport { sanitizeText, sanitizeEmail, isValidUrl, sanitizeTags } from \"@/lib/sanitize\";\r\n\r\n/**\r\n * Strict validation schemas for posts\r\n */\r\n\r\n// Reusable validators with strong security constraints\r\nconst titleValidator = z\r\n  .string()\r\n  .trim()\r\n  .min(1, \"Title is required\")\r\n  .max(200, \"Title must be less than 200 characters\")\r\n  .refine(\r\n    (val) => !/^[123456789.]*$/.test(val),\r\n    \"Title cannot be only numbers and dots\"\r\n  )\r\n  .transform((val) => sanitizeText(val));\r\n\r\nconst contentValidator = z\r\n  .string()\r\n  .min(1, \"Content is required\")\r\n  .max(500000, \"Content is too large (max 500KB)\")\r\n  .refine(\r\n    (val) => val.trim().length > 0,\r\n    \"Content cannot be empty or only whitespace\"\r\n  );\r\n\r\nconst coverImageValidator = z\r\n  .string()\r\n  .url(\"Cover image must be a valid URL\")\r\n  .refine(\r\n    (val) => isValidUrl(val),\r\n    \"Cover image URL is not secure (must be https)\"\r\n  )\r\n  .optional();\r\n\r\nconst authorValidator = z\r\n  .string()\r\n  .trim()\r\n  .max(100, \"Author name must be less than 100 characters\")\r\n  .optional()\r\n  .transform((val) => (val ? sanitizeText(val) : undefined));\r\n\r\nconst langValidator = z\r\n  .enum([\"fr\", \"en\"], { message: \"Language must be 'fr' or 'en'\" })\r\n  .default(\"en\");\r\n\r\nconst publishedValidator = z.boolean().default(false);\r\n\r\nconst articleValidator = z.string().optional();\r\n\r\n/**\r\n * Create post schema with strict validation\r\n */\r\nexport const CreatePostSchema = z.object({\r\n  title: titleValidator,\r\n  content: contentValidator,\r\n  lang: langValidator,\r\n  author: authorValidator,\r\n  coverImage: coverImageValidator,\r\n  article: articleValidator,\r\n  published: publishedValidator,\r\n});\r\n\r\n/**\r\n * Update post schema - all fields optional but still validated\r\n */\r\nexport const UpdatePostSchema = z.object({\r\n  title: titleValidator.optional(),\r\n  content: contentValidator.optional(),\r\n  lang: langValidator.optional(),\r\n  author: authorValidator,\r\n  coverImage: coverImageValidator,\r\n  article: articleValidator,\r\n  published: publishedValidator.optional(),\r\n});\r\n\r\nexport type CreatePostInput = z.infer<typeof CreatePostSchema>;\r\nexport type UpdatePostInput = z.infer<typeof UpdatePostSchema>;\r\n"},"tags":["fixable"],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"import { IconArrowLeft, IconEdit } from \"@tabler/icons-react\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";    <PageLayout\n      title=\"Loading...\"\n      breadcrumbs={[\n        { label: \"Dashboard\", href: \"/cms\" },{ label: \"Articles\", href: \"/cms/articles\" },{ label: \"...\" },\n      ]}\n    >\n      <div className=\"space-y-6\">  );\n}\n","ops":[{"diffOp":{"equal":{"range":[0,124]}}},{"equalLines":{"line_count":105}},{"diffOp":{"equal":{"range":[124,185]}}},{"diffOp":{"insert":{"range":[185,194]}}},{"diffOp":{"equal":{"range":[194,231]}}},{"diffOp":{"delete":{"range":[124,125]}}},{"diffOp":{"insert":{"range":[185,194]}}},{"diffOp":{"equal":{"range":[231,276]}}},{"diffOp":{"delete":{"range":[124,125]}}},{"diffOp":{"insert":{"range":[185,194]}}},{"diffOp":{"equal":{"range":[276,292]}}},{"diffOp":{"insert":{"range":[292,300]}}},{"diffOp":{"equal":{"range":[300,342]}}},{"equalLines":{"line_count":17}},{"diffOp":{"equal":{"range":[342,349]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"app\\cms\\articles\\[id]\\page.tsx"},"span":null,"sourceCode":"import { IconArrowLeft, IconEdit } from \"@tabler/icons-react\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { notFound } from \"next/navigation\";\nimport { Suspense } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { getArticleAction } from \"@/features/articles/articles.actions\";\nimport PageLayout from \"@/features/shared/components/page-layout\";\nimport { MDXContent } from \"@/lib/mdx-content\";\n\ninterface ArticlePageProps {\n  params: Promise<{ id: string }>;\n}\n\nasync function ArticleContent({ params }: ArticlePageProps) {\n  const { id } = await params;\n  const result = await getArticleAction(id);\n\n  if (!result.success) {\n    notFound();\n  }\n\n  const article = result.data;\n  const editHref = `/cms/articles/${id}/edit` as const;\n\n  return (\n    <PageLayout\n      title={article.title}\n      description={article.description}\n      breadcrumbs={[\n        { label: \"Dashboard\", href: \"/cms\" },\n        { label: \"Articles\", href: \"/cms/articles\" },\n        { label: article.title },\n      ]}\n      actions={\n        <div className=\"flex items-center gap-2\">\n          <Button variant=\"outline\" size=\"sm\" asChild>\n            <Link href=\"/cms/articles\">\n              <IconArrowLeft className=\"mr-2 size-4\" />\n              Back\n            </Link>\n          </Button>\n          <Button size=\"sm\" asChild>\n            <a href={editHref}>\n              <IconEdit className=\"mr-2 size-4\" />\n              Edit\n            </a>\n          </Button>\n        </div>\n      }\n    >\n      <div className=\"grid grid-cols-1 gap-8 lg:grid-cols-4\">\n        {/* Main content */}\n        <div className=\"lg:col-span-3 space-y-6\">\n          {/* Article metadata */}\n          <div className=\"flex flex-wrap items-center gap-2\">\n            <Badge variant={article.published ? \"default\" : \"secondary\"}>\n              {article.published ? \"Published\" : \"Draft\"}\n            </Badge>\n            {article.tags?.map((tag) => (\n              <Badge key={tag} variant=\"outline\">\n                {tag}\n              </Badge>\n            ))}\n          </div>\n\n          {/* Article info */}\n          <div className=\"text-muted-foreground text-sm\">\n            {article.author && <span>By {article.author}</span>}\n            {article.author && article.createdAt && <span> • </span>}\n            {article.createdAt && (\n              <span>\n                Created {new Date(article.createdAt).toLocaleDateString()}\n              </span>\n            )}\n            {article.publishedAt && (\n              <span>\n                {\" \"}\n                • Published {new Date(article.publishedAt).toLocaleDateString()}\n              </span>\n            )}\n          </div>\n\n          {/* Cover image */}\n          {article.coverImage && (\n            <div className=\"relative aspect-video overflow-hidden rounded-lg\">\n              <Image\n                src={article.coverImage}\n                alt={article.title}\n                fill\n                className=\"object-cover\"\n              />\n            </div>\n          )}\n\n          <article className=\"prose dark:prose-invert max-w-none\">\n            <MDXContent source={article.content} />\n          </article>\n        </div>\n      </div>\n    </PageLayout>\n  );\n}\n\nfunction ArticleLoading() {\n  return (\n    <PageLayout\n      title=\"Loading...\"\n      breadcrumbs={[{ label: \"Dashboard\", href: \"/cms\" }, { label: \"Articles\", href: \"/cms/articles\" }, { label: \"...\" }]}\n    >\n      <div className=\"space-y-6\">\n        <Skeleton className=\"h-8 w-1/2\" />\n        <Skeleton className=\"h-[200px] w-full\" />\n        <div className=\"space-y-2\">\n          <Skeleton className=\"h-4 w-full\" />\n          <Skeleton className=\"h-4 w-full\" />\n          <Skeleton className=\"h-4 w-3/4\" />\n        </div>\n      </div>\n    </PageLayout>\n  );\n}\n\nexport default function Page({ params }: Readonly<ArticlePageProps>) {\n  return (\n    <Suspense fallback={<ArticleLoading />}>\n      <ArticleContent params={params} />\n    </Suspense>\n  );\n}\n"},"tags":[],"source":null},{"category":"assist/source/organizeImports","severity":"error","description":"The imports and exports are not sorted.","message":[{"elements":[],"content":"The imports and exports are not sorted."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Safe fix: Organize Imports (Biome)"}]]},{"diff":{"dictionary":"import { IconEye, IconFileText, IconPhoto } from \"@tabler/icons-react\";\nimport Link{ headers } from \"next/linkheaders\";} from \"next/PageLayout{ RecentActivity } from \"@/features/shareddashboard/components/pagerecent-layoutactivity{\n  getDashboardStatsAction,\n  getRecentActivityAction,\n}..@../features/dashboard.actionscomponents/page-layout\nimport { RecentActivity \n  getDashboardStatsAction,\n  getRecentActivityAction,\n} from \"../../features/dashboard/components/recent-activity\n\nconst Page = async () => {\nexport default Page;\n","ops":[{"diffOp":{"equal":{"range":[0,71]}}},{"diffOp":{"equal":{"range":[71,79]}}},{"diffOp":{"delete":{"range":[79,83]}}},{"diffOp":{"insert":{"range":[83,94]}}},{"diffOp":{"equal":{"range":[94,106]}}},{"diffOp":{"delete":{"range":[106,110]}}},{"diffOp":{"insert":{"range":[110,117]}}},{"diffOp":{"equal":{"range":[117,119]}}},{"diffOp":{"equal":{"range":[71,79]}}},{"diffOp":{"delete":{"range":[83,92]}}},{"diffOp":{"insert":{"range":[79,83]}}},{"diffOp":{"equal":{"range":[94,95]}}},{"diffOp":{"delete":{"range":[119,121]}}},{"diffOp":{"equal":{"range":[121,132]}}},{"diffOp":{"delete":{"range":[110,117]}}},{"diffOp":{"insert":{"range":[106,110]}}},{"diffOp":{"equal":{"range":[117,119]}}},{"diffOp":{"equal":{"range":[71,79]}}},{"diffOp":{"delete":{"range":[132,142]}}},{"diffOp":{"insert":{"range":[142,160]}}},{"diffOp":{"equal":{"range":[160,178]}}},{"diffOp":{"delete":{"range":[178,184]}}},{"diffOp":{"insert":{"range":[184,193]}}},{"diffOp":{"equal":{"range":[193,205]}}},{"diffOp":{"delete":{"range":[205,209]}}},{"diffOp":{"insert":{"range":[209,215]}}},{"diffOp":{"equal":{"range":[215,216]}}},{"diffOp":{"delete":{"range":[216,222]}}},{"diffOp":{"insert":{"range":[222,230]}}},{"diffOp":{"equal":{"range":[117,119]}}},{"diffOp":{"equal":{"range":[71,79]}}},{"diffOp":{"delete":{"range":[230,287]}}},{"diffOp":{"insert":{"range":[132,142]}}},{"diffOp":{"equal":{"range":[94,101]}}},{"diffOp":{"delete":{"range":[287,289]}}},{"diffOp":{"insert":{"range":[289,290]}}},{"diffOp":{"equal":{"range":[193,194]}}},{"diffOp":{"delete":{"range":[290,293]}}},{"diffOp":{"equal":{"range":[293,302]}}},{"diffOp":{"delete":{"range":[184,193]}}},{"diffOp":{"insert":{"range":[178,184]}}},{"diffOp":{"equal":{"range":[193,194]}}},{"diffOp":{"delete":{"range":[302,319]}}},{"diffOp":{"insert":{"range":[319,341]}}},{"diffOp":{"equal":{"range":[117,119]}}},{"diffOp":{"equal":{"range":[341,350]}}},{"diffOp":{"delete":{"range":[350,366]}}},{"diffOp":{"insert":{"range":[366,421]}}},{"diffOp":{"equal":{"range":[421,429]}}},{"diffOp":{"delete":{"range":[289,290]}}},{"diffOp":{"insert":{"range":[429,434]}}},{"diffOp":{"equal":{"range":[434,454]}}},{"diffOp":{"delete":{"range":[454,480]}}},{"diffOp":{"insert":{"range":[302,319]}}},{"diffOp":{"equal":{"range":[117,119]}}},{"diffOp":{"equal":{"range":[480,508]}}},{"equalLines":{"line_count":103}},{"diffOp":{"equal":{"range":[508,530]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"app\\cms\\page.tsx"},"span":[0,71],"sourceCode":"import { IconEye, IconFileText, IconPhoto } from \"@tabler/icons-react\";\nimport Link from \"next/link\";\nimport { headers } from \"next/headers\";\nimport PageLayout from \"@/features/shared/components/page-layout\";\nimport {\n  getDashboardStatsAction,\n  getRecentActivityAction,\n} from \"../../features/dashboard/dashboard.actions\";\nimport { RecentActivity } from \"@/features/dashboard/components/recent-activity\";\n\nconst Page = async () => {\n  await headers();\n  const stats = await getDashboardStatsAction();\n  const activities = await getRecentActivityAction();\n\n  const statsCards = [\n    {\n      title: \"Total Articles\",\n      value: stats.totalArticles.toString(),\n      description: \"Total articles\",\n      icon: IconFileText,\n      color: \"text-blue-500\",\n      bg: \"bg-blue-500/10\",\n    },\n    {\n      title: \"Published Articles\",\n      value: stats.publishedArticles.toString(),\n      description: \"Published articles\",\n      icon: IconEye,\n      color: \"text-green-500\",\n      bg: \"bg-green-500/10\",\n    },\n    {\n      title: \"Draft Articles\",\n      value: stats.draftArticles.toString(),\n      description: \"Unpublished articles\",\n      icon: IconFileText,\n      color: \"text-amber-500\",\n      bg: \"bg-amber-500/10\",\n    },\n    {\n      title: \"Media Files\",\n      value: stats.mediaFiles.toString(),\n      description: \"Images & files\",\n      icon: IconPhoto,\n      color: \"text-purple-500\",\n      bg: \"bg-purple-500/10\",\n    },\n  ];\n\n  const quickActions = [\n    { title: \"New Article\", href: \"/cms/articles/new\", icon: IconFileText },\n    { title: \"View Posts\", href: \"/cms/articles\", icon: IconEye },\n    { title: \"Upload Media\", href: \"/cms/media\", icon: IconPhoto },\n  ];\n\n  return (\n    <PageLayout\n      title=\"Dashboard\"\n      description=\"Welcome back! Here's an overview of your content.\"\n      breadcrumbs={[{ label: \"Dashboard\" }]}\n    >\n      {/* Stats Grid */}\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n        {statsCards.map((stat) => (\n          <div\n            key={stat.title}\n            className=\"group relative overflow-hidden rounded-xl border bg-card p-6 transition-all hover:shadow-md\"\n          >\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-muted-foreground\">\n                  {stat.title}\n                </p>\n                <p className=\"mt-2 text-3xl font-bold\">{stat.value}</p>\n                <p className=\"mt-1 text-xs text-muted-foreground\">\n                  {stat.description}\n                </p>\n              </div>\n              <div className={`rounded-lg p-2.5 ${stat.bg}`}>\n                <stat.icon className={`size-5 ${stat.color}`} />\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Quick Actions */}\n      <div>\n        <h2 className=\"mb-4 text-lg font-semibold\">Quick Actions</h2>\n        <div className=\"grid gap-4 md:grid-cols-3\">\n          {quickActions.map((action) => (\n            <Link\n              key={action.title}\n              href={action.href as \"/\"}\n              className=\"flex items-center gap-4 rounded-xl border bg-card p-4 transition-all hover:border-primary/50 hover:shadow-md\"\n            >\n              <div className=\"flex size-10 items-center justify-center rounded-lg bg-primary/10\">\n                <action.icon className=\"size-5 text-primary\" />\n              </div>\n              <div>\n                <p className=\"font-medium\">{action.title}</p>\n                <p className=\"text-sm text-muted-foreground\">Get started</p>\n              </div>\n            </Link>\n          ))}\n        </div>\n      </div>\n\n      {/* Recent Activity */}\n      <RecentActivity activities={activities} />\n    </PageLayout>\n  );\n};\n\nexport default Page;\n"},"tags":["fixable"],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"import { IconArrowLeft, IconFileText } from \"@tabler/icons-react\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";    <PageLayout\n      title=\"Loading...\"\n      breadcrumbs={[\n        { label: \"Dashboard\", href: \"/cms\" },{ label: \"Posts\", href: \"/cms/posts\" },{ label: \"...\" },\n      ]}\n    >\n      <div className=\"max-w-2xl space-y-6\">  );\n}\n","ops":[{"diffOp":{"equal":{"range":[0,128]}}},{"equalLines":{"line_count":111}},{"diffOp":{"equal":{"range":[128,189]}}},{"diffOp":{"insert":{"range":[189,198]}}},{"diffOp":{"equal":{"range":[198,235]}}},{"diffOp":{"delete":{"range":[128,129]}}},{"diffOp":{"insert":{"range":[189,198]}}},{"diffOp":{"equal":{"range":[235,274]}}},{"diffOp":{"delete":{"range":[128,129]}}},{"diffOp":{"insert":{"range":[189,198]}}},{"diffOp":{"equal":{"range":[274,290]}}},{"diffOp":{"insert":{"range":[290,298]}}},{"diffOp":{"equal":{"range":[298,350]}}},{"equalLines":{"line_count":16}},{"diffOp":{"equal":{"range":[350,357]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"app\\cms\\posts\\[slug]\\page.tsx"},"span":null,"sourceCode":"import { IconArrowLeft, IconFileText } from \"@tabler/icons-react\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { Suspense } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { getArticleAction } from \"@/features/articles/articles.actions\";\nimport { getPostAction } from \"@/features/posts/posts.actions\";\nimport PageLayout from \"@/features/shared/components/page-layout\";\nimport { formatDate } from \"@/features/shared/shared.utils\";\n\ninterface PageProps {\n  params: Promise<{ slug: string }>;\n}\n\nasync function PostContent({ params }: PageProps) {\n  const { slug } = await params;\n  const postResult = await getPostAction(slug);\n\n  if (!postResult.success) {\n    return (\n      <PageLayout title=\"Not Found\">\n        <div>Post not found</div>\n      </PageLayout>\n    );\n  }\n\n  const post = postResult.data;\n\n  // Fetch linked article if exists\n  let linkedArticle = null;\n  if (post.article) {\n    const articleResult = await getArticleAction(post.article);\n    if (articleResult.success) {\n      linkedArticle = articleResult.data;\n    }\n  }\n\n  return (\n    <PageLayout\n      title={post.title}\n      description={post.content.substring(0, 100)}\n      breadcrumbs={[\n        { label: \"Dashboard\", href: \"/cms\" },\n        { label: \"Posts\", href: \"/cms/posts\" },\n        { label: post.title },\n      ]}\n    >\n      <div className=\"max-w-2xl\">\n        <Button asChild variant=\"ghost\" className=\"mb-6\">\n          <Link href=\"/cms/posts\">\n            <IconArrowLeft className=\"size-4 mr-2\" />\n            Back to Posts\n          </Link>\n        </Button>\n\n        {post.coverImage && (\n          <div className=\"relative aspect-video w-full overflow-hidden rounded-2xl mb-6 bg-muted\">\n            <Image\n              src={post.coverImage}\n              alt={post.title}\n              fill\n              className=\"object-cover\"\n              sizes=\"(max-width: 768px) 100vw, 600px\"\n            />\n          </div>\n        )}\n\n        <div className=\"space-y-4\">\n          <div className=\"flex items-start justify-between gap-4\">\n            <div>\n              <h1 className=\"text-3xl font-bold\">{post.title}</h1>\n              <div className=\"flex items-center gap-3 text-muted-foreground text-sm mt-2\">\n                <span>{formatDate(new Date(post.createdAt))}</span>\n                {post.author && <span>• By {post.author}</span>}\n                <Badge variant=\"outline\" className=\"text-[10px]\">\n                  {post.lang === \"fr\" ? \"Français\" : \"English\"}\n                </Badge>\n              </div>\n            </div>\n            <Badge variant={post.published ? \"default\" : \"secondary\"}>\n              {post.published ? \"Published\" : \"Draft\"}\n            </Badge>\n          </div>\n\n          <div className=\"prose prose-sm dark:prose-invert max-w-none mt-6\">\n            <p className=\"whitespace-pre-wrap text-foreground\">\n              {post.content}\n            </p>\n          </div>\n\n          {linkedArticle && (\n            <div className=\"mt-6 p-4 rounded-lg bg-muted\">\n              <div className=\"flex items-center gap-2 text-sm mb-2\">\n                <IconFileText className=\"size-4\" />\n                <span className=\"font-semibold\">Related Article</span>\n              </div>\n              <Link\n                href={`/cms/articles/${linkedArticle.id}`}\n                className=\"text-primary hover:underline\"\n              >\n                {linkedArticle.title}\n              </Link>\n            </div>\n          )}\n        </div>\n      </div>\n    </PageLayout>\n  );\n}\n\nfunction PostLoading() {\n  return (\n    <PageLayout\n      title=\"Loading...\"\n      breadcrumbs={[{ label: \"Dashboard\", href: \"/cms\" }, { label: \"Posts\", href: \"/cms/posts\" }, { label: \"...\" }]}\n    >\n      <div className=\"max-w-2xl space-y-6\">\n        <Skeleton className=\"h-8 w-1/2\" />\n        <Skeleton className=\"h-[300px] w-full\" />\n        <div className=\"space-y-2\">\n          <Skeleton className=\"h-4 w-full\" />\n          <Skeleton className=\"h-4 w-full\" />\n        </div>\n      </div>\n    </PageLayout>\n  );\n}\n\nexport default function Page({ params }: PageProps) {\n  return (\n    <Suspense fallback={<PostLoading />}>\n      <PostContent params={params} />\n    </Suspense>\n  );\n}\n"},"tags":[],"source":null},{"category":"assist/source/organizeImports","severity":"error","description":"The imports and exports are not sorted.","message":[{"elements":[],"content":"The imports and exports are not sorted."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Safe fix: Organize Imports (Biome)"}]]},{"diff":{"dictionary":"import { Suspense \n  IconBrandGithub,\n  IconCircleCheck,\n  IconKey,\n  IconWorld,\n} from \"@tabler/icons-react\";\nimport {\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Separator } from \"@/components/ui/separator\";PageLayoutUserProfileCard from \"@/features/sharedsettings/components/pageuser-layoutprofile-card\";\nimport { CopyToClipboard } from \"@/features/shared/components/copy-to-clipboard\";getenvlibfeatures/shared/componentsenvpage-layout/featurescomponents/user-profile-card\n\n  );\n}\n","ops":[{"diffOp":{"equal":{"range":[0,8]}}},{"diffOp":{"delete":{"range":[8,18]}}},{"diffOp":{"insert":{"range":[18,81]}}},{"diffOp":{"equal":{"range":[81,89]}}},{"diffOp":{"insert":{"range":[89,103]}}},{"diffOp":{"equal":{"range":[103,110]}}},{"diffOp":{"equal":{"range":[110,119]}}},{"diffOp":{"delete":{"range":[18,81]}}},{"diffOp":{"insert":{"range":[8,18]}}},{"diffOp":{"equal":{"range":[81,89]}}},{"diffOp":{"delete":{"range":[89,103]}}},{"diffOp":{"equal":{"range":[103,110]}}},{"diffOp":{"equal":{"range":[119,268]}}},{"diffOp":{"equal":{"range":[119,127]}}},{"diffOp":{"delete":{"range":[268,278]}}},{"diffOp":{"insert":{"range":[278,293]}}},{"diffOp":{"equal":{"range":[293,311]}}},{"diffOp":{"delete":{"range":[311,317]}}},{"diffOp":{"insert":{"range":[317,325]}}},{"diffOp":{"equal":{"range":[325,337]}}},{"diffOp":{"delete":{"range":[337,341]}}},{"diffOp":{"insert":{"range":[341,345]}}},{"diffOp":{"equal":{"range":[345,346]}}},{"diffOp":{"delete":{"range":[346,352]}}},{"diffOp":{"insert":{"range":[352,364]}}},{"diffOp":{"equal":{"range":[364,366]}}},{"diffOp":{"equal":{"range":[366,448]}}},{"diffOp":{"equal":{"range":[119,127]}}},{"diffOp":{"delete":{"range":[448,454]}}},{"diffOp":{"insert":{"range":[268,278]}}},{"diffOp":{"equal":{"range":[293,302]}}},{"diffOp":{"delete":{"range":[454,457]}}},{"diffOp":{"insert":{"range":[457,483]}}},{"diffOp":{"equal":{"range":[325,326]}}},{"diffOp":{"delete":{"range":[483,486]}}},{"diffOp":{"insert":{"range":[486,497]}}},{"diffOp":{"equal":{"range":[364,366]}}},{"diffOp":{"equal":{"range":[119,127]}}},{"diffOp":{"delete":{"range":[278,293]}}},{"diffOp":{"insert":{"range":[448,454]}}},{"diffOp":{"equal":{"range":[293,301]}}},{"diffOp":{"delete":{"range":[497,506]}}},{"diffOp":{"equal":{"range":[497,498]}}},{"diffOp":{"delete":{"range":[317,325]}}},{"diffOp":{"insert":{"range":[454,457]}}},{"diffOp":{"equal":{"range":[497,498]}}},{"diffOp":{"delete":{"range":[506,534]}}},{"diffOp":{"insert":{"range":[483,486]}}},{"diffOp":{"equal":{"range":[364,366]}}},{"diffOp":{"equal":{"range":[534,536]}}},{"equalLines":{"line_count":149}},{"diffOp":{"equal":{"range":[536,543]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"app\\cms\\settings\\page.tsx"},"span":[0,33],"sourceCode":"import { Suspense } from \"react\";\nimport {\n  IconBrandGithub,\n  IconCircleCheck,\n  IconKey,\n  IconWorld,\n} from \"@tabler/icons-react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Separator } from \"@/components/ui/separator\";\nimport PageLayout from \"@/features/shared/components/page-layout\";\nimport { CopyToClipboard } from \"@/features/shared/components/copy-to-clipboard\";\nimport getenv from \"@/lib/env\";\nimport UserProfileCard from \"@/features/settings/components/user-profile-card\";\n\n\n\nexport default async function SettingsPage() {\n  const env = getenv();\n\n  return (\n    <PageLayout\n      title=\"Settings\"\n      description=\"Configure your CMS preferences\"\n      breadcrumbs={[\n        { label: \"Dashboard\", href: \"/cms\" },\n        { label: \"Settings\" },\n      ]}\n    >\n      <div className=\"space-y-8\">\n        <div>\n          <h3 className=\"text-sm font-semibold text-muted-foreground mb-3\">\n            Connected Account\n          </h3>\n          <Suspense\n            fallback={\n              <div className=\"rounded-xl border bg-card p-6 animate-pulse\">\n                <div className=\"h-24 bg-muted rounded\" />\n              </div>\n            }\n          >\n            <UserProfileCard />\n          </Suspense>\n        </div>\n\n        <Separator />\n\n        {/* GitHub Configuration (Read-only) */}\n        <div className=\"rounded-xl border bg-card\">\n          <div className=\"flex items-center gap-3 border-b p-6\">\n            <div className=\"flex size-10 items-center justify-center rounded-lg bg-primary/10\">\n              <IconBrandGithub className=\"size-5 text-primary\" />\n            </div>\n            <div>\n              <h2 className=\"font-semibold\">GitHub Repository</h2>\n              <p className=\"text-sm text-muted-foreground\">\n                Configured repository (read-only)\n              </p>\n            </div>\n          </div>\n          <div className=\"space-y-4 p-6 bg-muted/30\">\n            <div className=\"rounded-lg border border-muted-foreground/20 bg-background/50 p-4\">\n              <dl className=\"space-y-3\">\n                <div>\n                  <dt className=\"text-sm font-medium text-muted-foreground\">\n                    Repository Owner\n                  </dt>\n                  <dd className=\"text-sm font-mono text-foreground flex items-center justify-between group\">\n                    <span>{env.GITHUB_OWNER}</span>\n                    <CopyToClipboard value={env.GITHUB_OWNER} className=\"opacity-0 group-hover:opacity-100 transition-opacity\" />\n                  </dd>\n                </div>\n                <div>\n                  <dt className=\"text-sm font-medium text-muted-foreground\">\n                    Repository Name\n                  </dt>\n                  <dd className=\"text-sm font-mono text-foreground flex items-center justify-between group\">\n                    <span>{env.GITHUB_REPO}</span>\n                    <CopyToClipboard value={env.GITHUB_REPO} className=\"opacity-0 group-hover:opacity-100 transition-opacity\" />\n                  </dd>\n                </div>\n                <div>\n                  <dt className=\"text-sm font-medium text-muted-foreground\">\n                    Branch\n                  </dt>\n                  <dd className=\"text-sm font-mono text-foreground flex items-center justify-between group\">\n                    <span>main</span>\n                    <CopyToClipboard value=\"main\" className=\"opacity-0 group-hover:opacity-100 transition-opacity\" />\n                  </dd>\n                </div>\n              </dl>\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              i Repository configuration is set via environment variables and\n              cannot be changed here for security reasons.\n            </p>\n          </div>\n        </div>\n\n        {/* API Configuration (Read-only) */}\n        <div className=\"rounded-xl border bg-card\">\n          <div className=\"flex items-center gap-3 border-b p-6\">\n            <div className=\"flex size-10 items-center justify-center rounded-lg bg-purple-500/10\">\n              <IconKey className=\"size-5 text-purple-500\" />\n            </div>\n            <div>\n              <h2 className=\"font-semibold\">Authentication</h2>\n              <p className=\"text-sm text-muted-foreground\">\n                Secure token storage\n              </p>\n            </div>\n          </div>\n          <div className=\"space-y-4 p-6 bg-muted/30\">\n            <div className=\"rounded-lg border border-muted-foreground/20 bg-background/50 p-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"token\">GitHub Personal Access Token</Label>\n                <Input\n                  id=\"token\"\n                  type=\"password\"\n                  placeholder=\"••••••••••••••••\"\n                  disabled\n                  className=\"bg-muted\"\n                />\n              </div>\n            </div>\n            <div className=\"flex items-start gap-2\">\n              <IconCircleCheck className=\"size-4 text-green-500 mt-0.5 shrink-0\" />\n              <p className=\"text-xs text-muted-foreground\">\n                Token is stored securely in environment variables. No changes\n                can be made through the UI.\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Site Configuration */}\n        <div className=\"rounded-xl border bg-card\">\n          <div className=\"flex items-center gap-3 border-b p-6\">\n            <div className=\"flex size-10 items-center justify-center rounded-lg bg-blue-500/10\">\n              <IconWorld className=\"size-5 text-blue-500\" />\n            </div>\n            <div>\n              <h2 className=\"font-semibold\">Site Settings</h2>\n              <p className=\"text-sm text-muted-foreground\">\n                General site configuration (coming soon)\n              </p>\n            </div>\n          </div>\n          <div className=\"space-y-4 p-6 opacity-50 pointer-events-none\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"siteName\">MDVault</Label>\n              <Input id=\"siteName\" placeholder=\"My Portfolio\" disabled />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"siteUrl\">Site URL</Label>\n              <Input\n                id=\"siteUrl\"\n                placeholder=\"https://example.com\"\n                disabled\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </PageLayout>\n  );\n}\n"},"tags":["fixable"],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"import { Suspense } from \"react\";\nimport {\n  IconBrandGithub,import UserProfileCard from \"@/features/settings/components/user-profile-card\";\n\n\n\nexport default async function SettingsPage() {\n  const env = getenv();\n                  <dd className=\"text-sm font-mono text-foreground flex items-center justify-between group\">\n                    <span>{env.GITHUB_OWNER}</span>\n                    <CopyToClipboard\n                      value={env.GITHUB_OWNER}className=\"opacity-0 group-hover:opacity-100 transition-opacity\"/>\n                  </dd>\n                </div>                  <dd className=\"text-sm font-mono text-foreground flex items-center justify-between group\">\n                    <span>{env.GITHUB_REPO}</span>\n                    <CopyToClipboardvalue={env.GITHUB_REPO}                  <dd className=\"text-sm font-mono text-foreground flex items-center justify-between group\">\n                    <span>main</span>\n                    <CopyToClipboardvalue=\"main\"            <div className=\"space-y-2\">\n              <Label htmlFor=\"siteUrl\">Site URL</Label>\n              <Inputid=\"siteUrl\"placeholder=\"https://example.com\"disabled/>\n            </div>\n          </div>  );\n}\n","ops":[{"diffOp":{"equal":{"range":[0,61]}}},{"equalLines":{"line_count":10}},{"diffOp":{"equal":{"range":[61,142]}}},{"diffOp":{"delete":{"range":[142,144]}}},{"diffOp":{"equal":{"range":[144,215]}}},{"equalLines":{"line_count":47}},{"diffOp":{"equal":{"range":[215,412]}}},{"diffOp":{"delete":{"range":[215,216]}}},{"diffOp":{"insert":{"range":[412,435]}}},{"diffOp":{"equal":{"range":[435,459]}}},{"diffOp":{"delete":{"range":[215,216]}}},{"diffOp":{"insert":{"range":[412,435]}}},{"diffOp":{"equal":{"range":[459,523]}}},{"diffOp":{"delete":{"range":[215,216]}}},{"diffOp":{"insert":{"range":[412,433]}}},{"diffOp":{"equal":{"range":[523,572]}}},{"equalLines":{"line_count":4}},{"diffOp":{"equal":{"range":[572,768]}}},{"diffOp":{"delete":{"range":[572,573]}}},{"diffOp":{"insert":{"range":[412,435]}}},{"diffOp":{"equal":{"range":[768,791]}}},{"diffOp":{"delete":{"range":[572,573]}}},{"diffOp":{"insert":{"range":[412,435]}}},{"diffOp":{"equal":{"range":[459,523]}}},{"diffOp":{"delete":{"range":[572,573]}}},{"diffOp":{"insert":{"range":[412,433]}}},{"diffOp":{"equal":{"range":[523,572]}}},{"equalLines":{"line_count":4}},{"diffOp":{"equal":{"range":[791,974]}}},{"diffOp":{"delete":{"range":[572,573]}}},{"diffOp":{"insert":{"range":[412,435]}}},{"diffOp":{"equal":{"range":[974,986]}}},{"diffOp":{"delete":{"range":[572,573]}}},{"diffOp":{"insert":{"range":[412,435]}}},{"diffOp":{"equal":{"range":[459,523]}}},{"diffOp":{"delete":{"range":[572,573]}}},{"diffOp":{"insert":{"range":[412,433]}}},{"diffOp":{"equal":{"range":[523,572]}}},{"equalLines":{"line_count":63}},{"diffOp":{"equal":{"range":[986,1102]}}},{"diffOp":{"delete":{"range":[412,429]}}},{"diffOp":{"insert":{"range":[986,987]}}},{"diffOp":{"equal":{"range":[1102,1114]}}},{"diffOp":{"delete":{"range":[412,429]}}},{"diffOp":{"insert":{"range":[986,987]}}},{"diffOp":{"equal":{"range":[1114,1147]}}},{"diffOp":{"delete":{"range":[412,429]}}},{"diffOp":{"insert":{"range":[986,987]}}},{"diffOp":{"equal":{"range":[1147,1155]}}},{"diffOp":{"delete":{"range":[412,427]}}},{"diffOp":{"insert":{"range":[986,987]}}},{"diffOp":{"equal":{"range":[1155,1193]}}},{"equalLines":{"line_count":3}},{"diffOp":{"equal":{"range":[1193,1200]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"app\\cms\\settings\\page.tsx"},"span":null,"sourceCode":"import { Suspense } from \"react\";\nimport {\n  IconBrandGithub,\n  IconCircleCheck,\n  IconKey,\n  IconWorld,\n} from \"@tabler/icons-react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Separator } from \"@/components/ui/separator\";\nimport PageLayout from \"@/features/shared/components/page-layout\";\nimport { CopyToClipboard } from \"@/features/shared/components/copy-to-clipboard\";\nimport getenv from \"@/lib/env\";\nimport UserProfileCard from \"@/features/settings/components/user-profile-card\";\n\n\n\nexport default async function SettingsPage() {\n  const env = getenv();\n\n  return (\n    <PageLayout\n      title=\"Settings\"\n      description=\"Configure your CMS preferences\"\n      breadcrumbs={[\n        { label: \"Dashboard\", href: \"/cms\" },\n        { label: \"Settings\" },\n      ]}\n    >\n      <div className=\"space-y-8\">\n        <div>\n          <h3 className=\"text-sm font-semibold text-muted-foreground mb-3\">\n            Connected Account\n          </h3>\n          <Suspense\n            fallback={\n              <div className=\"rounded-xl border bg-card p-6 animate-pulse\">\n                <div className=\"h-24 bg-muted rounded\" />\n              </div>\n            }\n          >\n            <UserProfileCard />\n          </Suspense>\n        </div>\n\n        <Separator />\n\n        {/* GitHub Configuration (Read-only) */}\n        <div className=\"rounded-xl border bg-card\">\n          <div className=\"flex items-center gap-3 border-b p-6\">\n            <div className=\"flex size-10 items-center justify-center rounded-lg bg-primary/10\">\n              <IconBrandGithub className=\"size-5 text-primary\" />\n            </div>\n            <div>\n              <h2 className=\"font-semibold\">GitHub Repository</h2>\n              <p className=\"text-sm text-muted-foreground\">\n                Configured repository (read-only)\n              </p>\n            </div>\n          </div>\n          <div className=\"space-y-4 p-6 bg-muted/30\">\n            <div className=\"rounded-lg border border-muted-foreground/20 bg-background/50 p-4\">\n              <dl className=\"space-y-3\">\n                <div>\n                  <dt className=\"text-sm font-medium text-muted-foreground\">\n                    Repository Owner\n                  </dt>\n                  <dd className=\"text-sm font-mono text-foreground flex items-center justify-between group\">\n                    <span>{env.GITHUB_OWNER}</span>\n                    <CopyToClipboard value={env.GITHUB_OWNER} className=\"opacity-0 group-hover:opacity-100 transition-opacity\" />\n                  </dd>\n                </div>\n                <div>\n                  <dt className=\"text-sm font-medium text-muted-foreground\">\n                    Repository Name\n                  </dt>\n                  <dd className=\"text-sm font-mono text-foreground flex items-center justify-between group\">\n                    <span>{env.GITHUB_REPO}</span>\n                    <CopyToClipboard value={env.GITHUB_REPO} className=\"opacity-0 group-hover:opacity-100 transition-opacity\" />\n                  </dd>\n                </div>\n                <div>\n                  <dt className=\"text-sm font-medium text-muted-foreground\">\n                    Branch\n                  </dt>\n                  <dd className=\"text-sm font-mono text-foreground flex items-center justify-between group\">\n                    <span>main</span>\n                    <CopyToClipboard value=\"main\" className=\"opacity-0 group-hover:opacity-100 transition-opacity\" />\n                  </dd>\n                </div>\n              </dl>\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              i Repository configuration is set via environment variables and\n              cannot be changed here for security reasons.\n            </p>\n          </div>\n        </div>\n\n        {/* API Configuration (Read-only) */}\n        <div className=\"rounded-xl border bg-card\">\n          <div className=\"flex items-center gap-3 border-b p-6\">\n            <div className=\"flex size-10 items-center justify-center rounded-lg bg-purple-500/10\">\n              <IconKey className=\"size-5 text-purple-500\" />\n            </div>\n            <div>\n              <h2 className=\"font-semibold\">Authentication</h2>\n              <p className=\"text-sm text-muted-foreground\">\n                Secure token storage\n              </p>\n            </div>\n          </div>\n          <div className=\"space-y-4 p-6 bg-muted/30\">\n            <div className=\"rounded-lg border border-muted-foreground/20 bg-background/50 p-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"token\">GitHub Personal Access Token</Label>\n                <Input\n                  id=\"token\"\n                  type=\"password\"\n                  placeholder=\"••••••••••••••••\"\n                  disabled\n                  className=\"bg-muted\"\n                />\n              </div>\n            </div>\n            <div className=\"flex items-start gap-2\">\n              <IconCircleCheck className=\"size-4 text-green-500 mt-0.5 shrink-0\" />\n              <p className=\"text-xs text-muted-foreground\">\n                Token is stored securely in environment variables. No changes\n                can be made through the UI.\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Site Configuration */}\n        <div className=\"rounded-xl border bg-card\">\n          <div className=\"flex items-center gap-3 border-b p-6\">\n            <div className=\"flex size-10 items-center justify-center rounded-lg bg-blue-500/10\">\n              <IconWorld className=\"size-5 text-blue-500\" />\n            </div>\n            <div>\n              <h2 className=\"font-semibold\">Site Settings</h2>\n              <p className=\"text-sm text-muted-foreground\">\n                General site configuration (coming soon)\n              </p>\n            </div>\n          </div>\n          <div className=\"space-y-4 p-6 opacity-50 pointer-events-none\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"siteName\">MDVault</Label>\n              <Input id=\"siteName\" placeholder=\"My Portfolio\" disabled />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"siteUrl\">Site URL</Label>\n              <Input\n                id=\"siteUrl\"\n                placeholder=\"https://example.com\"\n                disabled\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </PageLayout>\n  );\n}\n"},"tags":[],"source":null},{"category":"assist/source/organizeImports","severity":"error","description":"The imports and exports are not sorted.","message":[{"elements":[],"content":"The imports and exports are not sorted."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Safe fix: Organize Imports (Biome)"}]]},{"diff":{"dictionary":"\"use server\";\n\nimport type { ActionResultrandomUUID } from \"@/features/shared/shared.typesnode:crypto\";\nimport { createSafeErrorMessagecacheTag, loggerrefresh, updateTagnext/lib/loggeroctokit, { githubRepoInfo } from \"@/featuresshared/shared.typessanitizeMarkdowncreateSafeErrorMessage,logger } from \"@/lib/octokit, getCurrentUser } from \"@/lib/user\n  CreateArticleSchema,\n  UpdateArticleSchema,\n sanitizeMarkdown validation/article.schemacacheTag, refresh, updateTaglib/user randomUUID @/lib/validation/article.schema\nimport type { Article, ArticleFrontmatter, GitHubFile } from \"./articles.types\";\nimport { generateFrontmatter, parseArticleFrontmatter } from \"./articles.utils\";\t}\n}\n","ops":[{"diffOp":{"equal":{"range":[0,13]}}},{"diffOp":{"equal":{"range":[13,22]}}},{"diffOp":{"delete":{"range":[22,27]}}},{"diffOp":{"equal":{"range":[27,29]}}},{"diffOp":{"delete":{"range":[29,41]}}},{"diffOp":{"insert":{"range":[41,51]}}},{"diffOp":{"equal":{"range":[51,60]}}},{"diffOp":{"delete":{"range":[60,90]}}},{"diffOp":{"insert":{"range":[90,101]}}},{"diffOp":{"equal":{"range":[101,103]}}},{"diffOp":{"equal":{"range":[103,113]}}},{"diffOp":{"delete":{"range":[113,135]}}},{"diffOp":{"insert":{"range":[135,143]}}},{"diffOp":{"equal":{"range":[143,145]}}},{"diffOp":{"delete":{"range":[145,151]}}},{"diffOp":{"insert":{"range":[151,169]}}},{"diffOp":{"equal":{"range":[51,60]}}},{"diffOp":{"delete":{"range":[60,61]}}},{"diffOp":{"insert":{"range":[169,173]}}},{"diffOp":{"equal":{"range":[173,174]}}},{"diffOp":{"delete":{"range":[174,184]}}},{"diffOp":{"insert":{"range":[135,140]}}},{"diffOp":{"equal":{"range":[101,103]}}},{"diffOp":{"equal":{"range":[103,111]}}},{"diffOp":{"delete":{"range":[184,192]}}},{"diffOp":{"insert":{"range":[22,26]}}},{"diffOp":{"equal":{"range":[192,195]}}},{"diffOp":{"delete":{"range":[195,209]}}},{"diffOp":{"insert":{"range":[29,41]}}},{"diffOp":{"equal":{"range":[209,220]}}},{"diffOp":{"delete":{"range":[174,177]}}},{"diffOp":{"insert":{"range":[220,228]}}},{"diffOp":{"equal":{"range":[173,174]}}},{"diffOp":{"delete":{"range":[184,191]}}},{"diffOp":{"insert":{"range":[228,247]}}},{"diffOp":{"equal":{"range":[101,103]}}},{"diffOp":{"equal":{"range":[103,113]}}},{"diffOp":{"delete":{"range":[247,263]}}},{"diffOp":{"insert":{"range":[263,286]}}},{"diffOp":{"equal":{"range":[209,210]}}},{"diffOp":{"insert":{"range":[286,293]}}},{"diffOp":{"equal":{"range":[293,307]}}},{"diffOp":{"delete":{"range":[247,255]}}},{"diffOp":{"insert":{"range":[286,292]}}},{"diffOp":{"equal":{"range":[101,103]}}},{"diffOp":{"equal":{"range":[103,111]}}},{"diffOp":{"insert":{"range":[307,316]}}},{"diffOp":{"equal":{"range":[27,29]}}},{"diffOp":{"delete":{"range":[316,330]}}},{"diffOp":{"insert":{"range":[195,209]}}},{"diffOp":{"equal":{"range":[330,345]}}},{"diffOp":{"delete":{"range":[345,349]}}},{"diffOp":{"insert":{"range":[307,314]}}},{"diffOp":{"equal":{"range":[101,103]}}},{"diffOp":{"equal":{"range":[103,112]}}},{"diffOp":{"delete":{"range":[349,396]}}},{"diffOp":{"insert":{"range":[396,414]}}},{"diffOp":{"equal":{"range":[293,307]}}},{"diffOp":{"delete":{"range":[414,439]}}},{"diffOp":{"insert":{"range":[247,255]}}},{"diffOp":{"equal":{"range":[101,103]}}},{"diffOp":{"equal":{"range":[103,113]}}},{"diffOp":{"delete":{"range":[439,467]}}},{"diffOp":{"insert":{"range":[316,330]}}},{"diffOp":{"equal":{"range":[330,339]}}},{"diffOp":{"delete":{"range":[169,173]}}},{"diffOp":{"insert":{"range":[60,61]}}},{"diffOp":{"equal":{"range":[173,174]}}},{"diffOp":{"delete":{"range":[439,444]}}},{"diffOp":{"insert":{"range":[467,475]}}},{"diffOp":{"equal":{"range":[101,103]}}},{"diffOp":{"equal":{"range":[103,112]}}},{"diffOp":{"delete":{"range":[475,487]}}},{"diffOp":{"insert":{"range":[349,396]}}},{"diffOp":{"equal":{"range":[293,301]}}},{"diffOp":{"delete":{"range":[90,101]}}},{"diffOp":{"insert":{"range":[487,518]}}},{"diffOp":{"equal":{"range":[101,103]}}},{"diffOp":{"equal":{"range":[518,680]}}},{"equalLines":{"line_count":449}},{"diffOp":{"equal":{"range":[680,685]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\articles\\articles.actions.ts"},"span":[15,82],"sourceCode":"\"use server\";\n\nimport type { ActionResult } from \"@/features/shared/shared.types\";\nimport { createSafeErrorMessage, logger } from \"@/lib/logger\";\nimport octokit, { githubRepoInfo } from \"@/lib/octokit\";\nimport { sanitizeMarkdown } from \"@/lib/sanitize\";\nimport { getCurrentUser } from \"@/lib/user\";\nimport {\n  CreateArticleSchema,\n  UpdateArticleSchema,\n} from \"@/lib/validation/article.schema\";\nimport { cacheTag, refresh, updateTag } from \"next/cache\";\nimport { randomUUID } from \"node:crypto\";\nimport type { Article, ArticleFrontmatter, GitHubFile } from \"./articles.types\";\nimport { generateFrontmatter, parseArticleFrontmatter } from \"./articles.utils\";\n\nconst { ARTICLES_PATH, MEDIA_PATH: IMAGES_PATH } = githubRepoInfo;\n\nasync function fetchLatestSha(path: string): Promise<string | undefined> {\n\ttry {\n\t\tconst fileData = await octokit.repos.getContent({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath,\n\t\t});\n\t\tif (!Array.isArray(fileData.data) && \"sha\" in fileData.data) {\n\t\t\treturn fileData.data.sha;\n\t\t}\n\t} catch (error) {\n\t\tlogger.error(\"Failed to fetch latest file SHA\", error, { path });\n\t}\n\treturn undefined;\n}\n\nfunction createArticleObject(\n\tid: string,\n\tfrontmatter: ArticleFrontmatter,\n\tbody: string,\n\tsha?: string,\n): Article {\n\treturn {\n\t\tid,\n\t\ttitle: frontmatter.title,\n\t\tdescription: frontmatter.description,\n\t\tcontent: body,\n\t\tlang: frontmatter.lang,\n\t\tcreatedAt: frontmatter.createdAt || new Date().toISOString(),\n\t\tupdatedAt: frontmatter.updatedAt || new Date().toISOString(),\n\t\tpublishedAt: frontmatter.publishedDate,\n\t\tpublished: frontmatter.published,\n\t\tauthor: frontmatter.author,\n\t\ttags: frontmatter.tags,\n\t\tcoverImage: frontmatter.coverImage,\n\t\tsha,\n\t};\n}\n\nasync function updateGitHubFile(\n\tpath: string,\n\tcontent: string,\n\tmessage: string,\n\tsha?: string,\n): Promise<string | undefined> {\n\tconst latestSha = sha ? await fetchLatestSha(path) : sha;\n\tconst response = await octokit.repos.createOrUpdateFileContents({\n\t\towner: githubRepoInfo.owner,\n\t\trepo: githubRepoInfo.repo,\n\t\tpath,\n\t\tmessage,\n\t\tcontent: Buffer.from(content).toString(\"base64\"),\n\t\tsha: latestSha || sha,\n\t});\n\tupdateTag(\"articles\");\n\treturn response.data.content?.sha;\n}\n\nexport async function listArticlesAction(): Promise<ActionResult<Article[]>> {\n\t\"use cache\";\n\tcacheTag(\"articles\");\n\ttry {\n\t\tconst response = await octokit.repos.getContent({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath: ARTICLES_PATH,\n\t\t});\n\n\t\tif (!Array.isArray(response.data)) {\n\t\t\treturn { success: true, data: [] };\n\t\t}\n\n\t\tconst files = response.data as GitHubFile[];\n\t\tconst mdFiles = files.filter(\n\t\t\t(f) => f.name.endsWith(\".md\") || f.name.endsWith(\".mdx\"),\n\t\t);\n\n\t\tconst articles: Article[] = await Promise.all(\n\t\t\tmdFiles.map(async (file) => {\n\t\t\t\tconst content = await getArticleContentAction(file.path);\n\t\t\t\tconst { frontmatter, body } = parseArticleFrontmatter(content);\n\t\t\t\tconst id = file.name.replace(/\\.mdx?$/, \"\");\n\t\t\t\treturn createArticleObject(id, frontmatter, body, file.sha);\n\t\t\t}),\n\t\t);\n\n\t\tconst sorted = articles.sort(\n\t\t\t(a, b) =>\n\t\t\t\tnew Date(b.createdAt).getTime() - new Date(a.createdAt).getTime(),\n\t\t);\n\t\treturn { success: true, data: sorted };\n\t} catch (error) {\n\t\tlogger.error(\"Failed to list articles\", error);\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function getArticleContentAction(path: string): Promise<string> {\n\ttry {\n\t\tconst response = await octokit.repos.getContent({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath,\n\t\t});\n\n\t\tif (Array.isArray(response.data) || response.data.type !== \"file\") {\n\t\t\tthrow new Error(\"Invalid file type\");\n\t\t}\n\n\t\tconst content = Buffer.from(response.data.content, \"base64\").toString(\n\t\t\t\"utf-8\",\n\t\t);\n\t\treturn content;\n\t} catch (error) {\n\t\tlogger.error(\"Failed to get article content\", error, { path });\n\t\tthrow error;\n\t}\n}\n\nexport async function getArticleAction(\n\tid: string,\n): Promise<ActionResult<Article>> {\n\t\"use cache\";\n\tcacheTag(\"articles\");\n\ttry {\n\t\tconst path = `${ARTICLES_PATH}/${id}.md`;\n\t\tconst response = await octokit.repos.getContent({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath,\n\t\t});\n\n\t\tif (Array.isArray(response.data) || response.data.type !== \"file\") {\n\t\t\treturn { success: false, error: \"Article not found\" };\n\t\t}\n\n\t\tconst content = Buffer.from(response.data.content, \"base64\").toString(\n\t\t\t\"utf-8\",\n\t\t);\n\t\tconst { frontmatter, body } = parseArticleFrontmatter(content);\n\n\t\tconst article = createArticleObject(\n\t\t\tid,\n\t\t\tfrontmatter,\n\t\t\tbody,\n\t\t\tresponse.data.sha,\n\t\t);\n\t\treturn { success: true, data: article };\n\t} catch (error) {\n\t\tlogger.error(\"Failed to get article\", error, { articleId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function createArticleAction(\n\tinput: unknown,\n): Promise<ActionResult<string>> {\n\ttry {\n\t\tconst validatedInput = CreateArticleSchema.parse(input);\n\t\tconst id = randomUUID();\n\t\tconst now = new Date().toISOString();\n\t\tconst { body: cleanContent } = parseArticleFrontmatter(\n\t\t\tsanitizeMarkdown(validatedInput.content),\n\t\t);\n\t\tconst currentUser = getCurrentUser();\n\n\t\tconst frontmatter = generateFrontmatter({\n\t\t\ttitle: validatedInput.title,\n\t\t\tdescription: validatedInput.description,\n\t\t\tpublished: validatedInput.published ?? false,\n\t\t\tlang: validatedInput.lang,\n\t\t\ttags: validatedInput.tags,\n\t\t\tcoverImage: validatedInput.coverImage,\n\t\t\tauthor: validatedInput.author || currentUser,\n\t\t\tcreatedAt: now,\n\t\t\tupdatedAt: now,\n\t\t});\n\n\t\tconst fileContent = `${frontmatter}\\n\\n${cleanContent}`;\n\t\tconst path = `${ARTICLES_PATH}/${id}.md`;\n\n\t\tawait updateGitHubFile(\n\t\t\tpath,\n\t\t\tfileContent,\n\t\t\t`Create article: ${validatedInput.title}`,\n\t\t);\n\t\tupdateTag(\"articles\");\n\t\trefresh();\n\t\tlogger.info(\"Article created\", {\n\t\t\tarticleId: id,\n\t\t\ttitle: validatedInput.title,\n\t\t});\n\t\treturn { success: true, data: id };\n\t} catch (error) {\n\t\tif (\n\t\t\terror instanceof Error &&\n\t\t\t\"code\" in error &&\n\t\t\terror.code === \"ERR_BAD_REQUEST\"\n\t\t) {\n\t\t\tlogger.warn(\"Invalid article data provided\", { error: error.message });\n\t\t\treturn {\n\t\t\t\tsuccess: false,\n\t\t\t\terror: \"Invalid article data. Please check your input.\",\n\t\t\t};\n\t\t}\n\t\tlogger.error(\"Failed to create article\", error);\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function updateArticleAction(\n\tid: string,\n\tinput: unknown,\n): Promise<ActionResult<string>> {\n\ttry {\n\t\tconst validatedInput = UpdateArticleSchema.parse(input);\n\t\tconst result = await getArticleAction(id);\n\n\t\tif (!result.success || !result.data) {\n\t\t\treturn { success: false, error: \"Article not found\" };\n\t\t}\n\n\t\tconst existingArticle = result.data;\n\n\t\tconst now = new Date().toISOString();\n\t\tconst rawContent = validatedInput.content ?? existingArticle.content;\n\t\tconst sanitized = sanitizeMarkdown(rawContent);\n\t\tconst { body: cleanContent } = parseArticleFrontmatter(sanitized);\n\n\t\tconst frontmatter = generateFrontmatter({\n\t\t\ttitle: validatedInput.title ?? existingArticle.title,\n\t\t\tdescription: validatedInput.description ?? existingArticle.description,\n\t\t\tpublished: validatedInput.published ?? existingArticle.published,\n\t\t\tlang: validatedInput.lang ?? existingArticle.lang,\n\t\t\ttags: validatedInput.tags ?? existingArticle.tags,\n\t\t\tcoverImage: validatedInput.coverImage ?? existingArticle.coverImage,\n\t\t\tauthor: validatedInput.author ?? existingArticle.author,\n\t\t\tcreatedAt: existingArticle.createdAt,\n\t\t\tupdatedAt: now,\n\t\t});\n\n\t\tconst fileContent = `${frontmatter}\\n\\n${cleanContent}`;\n\t\tconst path = `${ARTICLES_PATH}/${id}.md`;\n\n\t\tawait updateGitHubFile(\n\t\t\tpath,\n\t\t\tfileContent,\n\t\t\t`Update article: ${validatedInput.title ?? existingArticle.title}`,\n\t\t\texistingArticle.sha,\n\t\t);\n\t\tupdateTag(\"articles\");\n\t\trefresh();\n\t\tlogger.info(\"Article updated\", { articleId: id });\n\t\treturn { success: true, data: id };\n\t} catch (error) {\n\t\tlogger.error(\"Failed to update article\", error, { articleId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function deleteArticleAction(\n\tid: string,\n\tsha: string,\n): Promise<ActionResult<boolean>> {\n\ttry {\n\t\tconst path = `${ARTICLES_PATH}/${id}.md`;\n\n\t\tawait octokit.repos.deleteFile({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath,\n\t\t\tmessage: `Delete article: ${id}`,\n\t\t\tsha,\n\t\t});\n\t\tupdateTag(\"articles\");\n\t\trefresh();\n\t\tlogger.info(\"Article deleted\", { articleId: id });\n\t\treturn { success: true, data: true };\n\t} catch (error) {\n\t\tlogger.error(\"Failed to delete article\", error, { articleId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function unpublishArticleAction(\n\tid: string,\n\tsha: string,\n): Promise<ActionResult<boolean>> {\n\ttry {\n\t\tconst result = await getArticleAction(id);\n\n\t\tif (!result.success || !result.data) {\n\t\t\treturn { success: false, error: \"Article not found\" };\n\t\t}\n\n\t\tconst existingArticle = result.data;\n\n\t\tconst now = new Date().toISOString();\n\t\tconst frontmatter = generateFrontmatter({\n\t\t\ttitle: existingArticle.title,\n\t\t\tdescription: existingArticle.description,\n\t\t\tpublished: false,\n\t\t\tlang: existingArticle.lang,\n\t\t\ttags: existingArticle.tags,\n\t\t\tcoverImage: existingArticle.coverImage,\n\t\t\tcreatedAt: existingArticle.createdAt,\n\t\t\tupdatedAt: now,\n\t\t});\n\n\t\tconst fileContent = `${frontmatter}\\n\\n${existingArticle.content}`;\n\t\tconst path = `${ARTICLES_PATH}/${id}.md`;\n\n\t\tawait updateGitHubFile(\n\t\t\tpath,\n\t\t\tfileContent,\n\t\t\t`Unpublish article: ${existingArticle.title}`,\n\t\t\tsha,\n\t\t);\n\t\trefresh();\n\t\tlogger.info(\"Article unpublished\", { articleId: id });\n\t\treturn { success: true, data: true };\n\t} catch (error) {\n\t\tlogger.error(\"Failed to unpublish article\", error, { articleId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function publishArticleAction(\n\tid: string,\n\tsha: string,\n): Promise<ActionResult<boolean>> {\n\ttry {\n\t\tconst result = await getArticleAction(id);\n\n\t\tif (!result.success || !result.data) {\n\t\t\treturn { success: false, error: \"Article not found\" };\n\t\t}\n\n\t\tconst existingArticle = result.data;\n\n\t\tconst now = new Date().toISOString();\n\t\tconst frontmatter = generateFrontmatter({\n\t\t\ttitle: existingArticle.title,\n\t\t\tdescription: existingArticle.description,\n\t\t\tpublished: true,\n\t\t\tlang: existingArticle.lang,\n\t\t\ttags: existingArticle.tags,\n\t\t\tcoverImage: existingArticle.coverImage,\n\t\t\tcreatedAt: existingArticle.createdAt,\n\t\t\tupdatedAt: now,\n\t\t});\n\n\t\tconst fileContent = `${frontmatter}\\n\\n${existingArticle.content}`;\n\t\tconst path = `${ARTICLES_PATH}/${id}.md`;\n\n\t\tawait updateGitHubFile(\n\t\t\tpath,\n\t\t\tfileContent,\n\t\t\t`Publish article: ${existingArticle.title}`,\n\t\t\tsha,\n\t\t);\n\t\tlogger.info(\"Article published\", { articleId: id });\n\t\treturn { success: true, data: true };\n\t} catch (error) {\n\t\tlogger.error(\"Failed to publish article\", error, { articleId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function updateArticleMetadataAction(\n\tid: string,\n\tmetadata: {\n\t\tcreatedAt?: string;\n\t\tpublishedDate?: string;\n\t},\n): Promise<ActionResult<Article>> {\n\ttry {\n\t\tconst result = await getArticleAction(id);\n\n\t\tif (!result.success || !result.data) {\n\t\t\treturn { success: false, error: \"Article not found\" };\n\t\t}\n\n\t\tconst existingArticle = result.data;\n\n\t\tconst now = new Date().toISOString();\n\t\tconst frontmatter = generateFrontmatter({\n\t\t\ttitle: existingArticle.title,\n\t\t\tdescription: existingArticle.description,\n\t\t\tpublished: existingArticle.published,\n\t\t\tlang: existingArticle.lang,\n\t\t\ttags: existingArticle.tags,\n\t\t\tcoverImage: existingArticle.coverImage,\n\t\t\tcreatedAt: metadata.createdAt ?? existingArticle.createdAt,\n\t\t\tupdatedAt: now,\n\t\t\tpublishedDate: metadata.publishedDate ?? existingArticle.publishedAt,\n\t\t});\n\n\t\tconst fileContent = `${frontmatter}\\n\\n${existingArticle.content}`;\n\t\tconst path = `${ARTICLES_PATH}/${id}.md`;\n\n\t\tconst updatedSha = await updateGitHubFile(\n\t\t\tpath,\n\t\t\tfileContent,\n\t\t\t`Update article metadata: ${existingArticle.title}`,\n\t\t\texistingArticle.sha,\n\t\t);\n\n\t\tconst updated = {\n\t\t\t...existingArticle,\n\t\t\tcreatedAt: metadata.createdAt ?? existingArticle.createdAt,\n\t\t\tpublishedDate: metadata.publishedDate ?? existingArticle.publishedAt,\n\t\t\tupdatedAt: now,\n\t\t\tsha: updatedSha,\n\t\t};\n\t\tlogger.info(\"Article metadata updated\", { articleId: id });\n\t\treturn { success: true, data: updated };\n\t} catch (error) {\n\t\tlogger.error(\"Failed to update article metadata\", error, { articleId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function uploadImageAction(\n\tfile: File,\n\tfileName: string,\n): Promise<ActionResult<string>> {\n\ttry {\n\t\tconst arrayBuffer = await file.arrayBuffer();\n\t\tconst content = Buffer.from(arrayBuffer).toString(\"base64\");\n\t\tconst path = `${IMAGES_PATH}/${fileName}`;\n\n\t\tawait octokit.repos.createOrUpdateFileContents({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath,\n\t\t\tmessage: `Upload image: ${fileName}`,\n\t\t\tcontent,\n\t\t});\n\n\t\tconst url = `https://raw.githubusercontent.com/${githubRepoInfo.owner}/${githubRepoInfo.repo}/main/${path}`;\n\t\tlogger.info(\"Image uploaded\", { fileName, fileSize: file.size });\n\t\treturn { success: true, data: url };\n\t} catch (error) {\n\t\tlogger.error(\"Failed to upload image\", error, { fileName });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n"},"tags":["fixable"],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"\"use server\";\n\nimport type { ActionResult } from \"@/features/shared/shared.types\";\nasync function fetchLatestSha(path: string): Promise<string | undefined> {\n\t  try {\n\t\t    const fileData = await octokit.repos.getContent({\n\t\t\t      owner: githubRepoInfo.owner,\nrepo: githubRepoInfo.repo,\npath,\n});\nif (!Array.isArray(fileData.data) && \"sha\" in fileData.data) {\nreturn fileData.data.sha;\n}\n} catch (error) {\nlogger.error(\"Failed to fetch latest file SHA\", error, { path });\nreturn undefined;\n}\n\nfunction createArticleObject(\nid: string,\nfrontmatter: ArticleFrontmatter,\nbody: string,\nsha?: string,\n): Article {\nreturn {\nid,\ntitle: frontmatter.title,\ndescription: frontmatter.description,\ncontent: body,\nlang: frontmatter.lang,\ncreatedAt: frontmatter.createdAt || new Date().toISOString(),\nupdatedAt: frontmatter.updatedAt || new Date().toISOString(),\npublishedAt: frontmatter.publishedDate,\npublished: frontmatter.published,\nauthor: frontmatter.author,\ntags: frontmatter.tags,\ncoverImage: frontmatter.coverImage,\nsha,\n};\n}\n\nasync function updateGitHubFile(\npath: string,\ncontent: string,\nmessage: string,\nsha?: string,\n): Promise<string | undefined> {\nconst latestSha = sha ? await fetchLatestSha(path) : sha;\nconst response = await octokit.repos.createOrUpdateFileContents({\nmessage,\ncontent: Buffer.from(content).toString(\"base64\"),\nsha: latestSha || sha,\nupdateTag(\"articles\");\nreturn response.data.content?.sha;\n}\n\nexport async function listArticlesAction(): Promise<ActionResult<Article[]>> {\n\"use cache\";\ncacheTag(\"articles\");\nconst response = await octokit.repos.getContent({\npath: ARTICLES_PATH,\n});\n\nif (!Array.isArray(response.data)) {\nreturn { success: true, data: [] };\n}\n\nconst files = response.data as GitHubFile[];\nconst mdFiles = files.filter(\n(f) => f.name.endsWith(\".md\") || f.name.endsWith(\".mdx\"),\n);\n\nconst articles: Article[] = await Promise.all(\nmdFiles.map(async (file) => {\n\t\t\t\t        const content = await getArticleContentAction(file.path);\nconst { frontmatter, body } = parseArticleFrontmatter(content);\nconst id = file.name.replace(/\\.mdx?$/, \"\");\nreturn createArticleObject(id, frontmatter, body, file.sha);\n}),\nconst sorted = articles.sort(\n(a, b) =>\nnew Date(b.createdAt).getTime() - new Date(a.createdAt).getTime(),\nreturn { success: true, data: sorted };\nlogger.error(\"Failed to list articles\", error);\nreturn { success: false, error: createSafeErrorMessage(error) };\n}\n}\n\nexport async function getArticleContentAction(path: string): Promise<string> {\nif (Array.isArray(response.data) || response.data.type !== \"file\") {\nthrow new Error(\"Invalid file type\");\nconst content = Buffer.from(response.data.content, \"base64\").toString(\n\"utf-8\",\nreturn content;\nlogger.error(\"Failed to get article content\", error, { path });\nthrow error;\n}\n}\n\nexport async function getArticleAction(\nid: string,\n): Promise<ActionResult<Article>> {\nconst path = `${ARTICLES_PATH}/${id}.md`;\nreturn { success: false, error: \"Article not found\" };\nconst { frontmatter, body } = parseArticleFrontmatter(content);\n\nconst article = createArticleObject(\nfrontmatter,\nbody,\nresponse.data.sha,\nreturn { success: true, data: article };\nlogger.error(\"Failed to get article\", error, { articleId: id });\n}\n}\n\nexport async function createArticleAction(\ninput: unknown,\n): Promise<ActionResult<string>> {\nconst validatedInput = CreateArticleSchema.parse(input);\nconst id = randomUUID();\nconst now = new Date().toISOString();\nconst { body: cleanContent } = parseArticleFrontmatter(\nsanitizeMarkdown(validatedInput.content),\nconst currentUser = getCurrentUser();\n\nconst frontmatter = generateFrontmatter({\ntitle: validatedInput.title,\ndescription: validatedInput.description,\npublished: validatedInput.published ?? false,\nlang: validatedInput.lang,\ntags: validatedInput.tags,\ncoverImage: validatedInput.coverImage,\nauthor: validatedInput.author || currentUser,\ncreatedAt: now,\nupdatedAt: now,\nconst fileContent = `${frontmatter}\\n\\n${cleanContent}`;\nconst path = `${ARTICLES_PATH}/${id}.md`;\n\nawait updateGitHubFile(\nfileContent,\n`Create article: ${validatedInput.title}`,\nrefresh();\nlogger.info(\"Article created\", {\narticleId: id,\nreturn { success: true, data: id };\nif (\nerror instanceof Error &&\n\"code\" in error &&\nerror.code === \"ERR_BAD_REQUEST\"\n) {\nlogger.warn(\"Invalid article data provided\", { error: error.message });\nsuccess: false,\nerror: \"Invalid article data. Please check your input.\",\nlogger.error(\"Failed to create article\", error);\n}\n}\n\nexport async function updateArticleAction(\nconst validatedInput = UpdateArticleSchema.parse(input);\nconst result = await getArticleAction(id);\n\nif (!result.success || !result.data) {\nconst existingArticle = result.data;\n\nconst rawContent = validatedInput.content ?? existingArticle.content;\nconst sanitized = sanitizeMarkdown(rawContent);\nconst { body: cleanContent } = parseArticleFrontmatter(sanitized);\n\ntitle: validatedInput.title ?? existingArticle.title,\ndescription: validatedInput.description ?? existingArticle.description,\npublished: validatedInput.published ?? existingArticle.published,\nlang: validatedInput.lang ?? existingArticle.lang,\ntags: validatedInput.tags ?? existingArticle.tags,\ncoverImage: validatedInput.coverImage ?? existingArticle.coverImage,\nauthor: validatedInput.author ?? existingArticle.author,\ncreatedAt: existingArticle.createdAt,\n`Update article: ${validatedInput.title ?? existingArticle.title}`,\nexistingArticle.sha,\nlogger.info(\"Article updated\", { articleId: id });\nlogger.error(\"Failed to update article\", error, { articleId: id });\n}\n}\n\nexport async function deleteArticleAction(\nsha: string,\n): Promise<ActionResult<boolean>> {\nawait octokit.repos.deleteFile({\nmessage: `Delete article: ${id}`,\nlogger.info(\"Article deleted\", { articleId: id });\nreturn { success: true, data: true };\nlogger.error(\"Failed to delete article\", error, { articleId: id });\n}\n}\n\nexport async function unpublishArticleAction(\ntitle: existingArticle.title,\ndescription: existingArticle.description,\npublished: false,\nlang: existingArticle.lang,\ntags: existingArticle.tags,\ncoverImage: existingArticle.coverImage,\nconst fileContent = `${frontmatter}\\n\\n${existingArticle.content}`;\n`Unpublish article: ${existingArticle.title}`,\nlogger.info(\"Article unpublished\", { articleId: id });\nlogger.error(\"Failed to unpublish article\", error, { articleId: id });\n}\n}\n\nexport async function publishArticleAction(\npublished: true,\n`Publish article: ${existingArticle.title}`,\nlogger.info(\"Article published\", { articleId: id });\nlogger.error(\"Failed to publish article\", error, { articleId: id });\n}\n}\n\nexport async function updateArticleMetadataAction(\nmetadata: {\ncreatedAt?: string;\npublishedDate?: string;\n},\n): Promise<ActionResult<Article>> {\npublished: existingArticle.published,\ncreatedAt: metadata.createdAt ?? existingArticle.createdAt,\npublishedDate: metadata.publishedDate ?? existingArticle.publishedAt,\nconst updatedSha = await updateGitHubFile(\n`Update article metadata: ${existingArticle.title}`,\nconst updated = {\n...existingArticle,\nsha: updatedSha,\nlogger.info(\"Article metadata updated\", { articleId: id });\nreturn { success: true, data: updated };\nlogger.error(\"Failed to update article metadata\", error, { articleId: id });\n}\n}\n\nexport async function uploadImageAction(\nfile: File,\nfileName: string,\n): Promise<ActionResult<string>> {\nconst arrayBuffer = await file.arrayBuffer();\nconst content = Buffer.from(arrayBuffer).toString(\"base64\");\nconst path = `${IMAGES_PATH}/${fileName}`;\n\nawait octokit.repos.createOrUpdateFileContents({\nmessage: `Upload image: ${fileName}`,\ncontent,\nconst url = `https://raw.githubusercontent.com/${githubRepoInfo.owner}/${githubRepoInfo.repo}/main/${path}`;\nlogger.info(\"Image uploaded\", { fileName, fileSize: file.size });\nreturn { success: true, data: url };\nlogger.error(\"Failed to upload image\", error, { fileName });\n","ops":[{"diffOp":{"equal":{"range":[0,82]}}},{"equalLines":{"line_count":14}},{"diffOp":{"equal":{"range":[82,158]}}},{"diffOp":{"delete":{"range":[158,159]}}},{"diffOp":{"insert":{"range":[159,161]}}},{"diffOp":{"equal":{"range":[161,167]}}},{"diffOp":{"delete":{"range":[167,169]}}},{"diffOp":{"insert":{"range":[169,173]}}},{"diffOp":{"equal":{"range":[173,223]}}},{"diffOp":{"delete":{"range":[223,226]}}},{"diffOp":{"insert":{"range":[226,232]}}},{"diffOp":{"equal":{"range":[232,261]}}},{"diffOp":{"delete":{"range":[223,226]}}},{"diffOp":{"insert":{"range":[226,232]}}},{"diffOp":{"equal":{"range":[261,288]}}},{"diffOp":{"delete":{"range":[223,226]}}},{"diffOp":{"insert":{"range":[226,232]}}},{"diffOp":{"equal":{"range":[288,294]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[294,298]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[298,361]}}},{"diffOp":{"delete":{"range":[223,226]}}},{"diffOp":{"insert":{"range":[226,232]}}},{"diffOp":{"equal":{"range":[361,387]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[387,389]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[389,407]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[407,473]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[387,389]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[473,524]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[524,536]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[536,569]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[569,583]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[583,610]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[610,619]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[619,623]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[623,649]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[649,687]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[687,702]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[702,726]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[726,788]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[788,850]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[850,890]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[890,924]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[924,952]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[952,976]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[976,1012]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[1012,1017]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[1017,1056]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[1056,1070]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[1070,1087]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[1087,1104]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[1104,1151]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[1151,1209]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[1209,1275]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[232,261]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[261,288]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[288,294]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[1275,1284]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[1284,1334]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[1334,1357]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[294,298]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[1357,1380]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[1380,1497]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[1497,1510]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[1510,1532]}}},{"diffOp":{"delete":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[226,228]}}},{"diffOp":{"equal":{"range":[161,167]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[1532,1582]}}},{"diffOp":{"delete":{"range":[223,226]}}},{"diffOp":{"insert":{"range":[226,232]}}},{"diffOp":{"equal":{"range":[232,261]}}},{"diffOp":{"delete":{"range":[223,226]}}},{"diffOp":{"insert":{"range":[226,232]}}},{"diffOp":{"equal":{"range":[261,288]}}},{"diffOp":{"delete":{"range":[223,226]}}},{"diffOp":{"insert":{"range":[226,232]}}},{"diffOp":{"equal":{"range":[1582,1603]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[1603,1608]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[1608,1645]}}},{"diffOp":{"delete":{"range":[223,226]}}},{"diffOp":{"insert":{"range":[226,232]}}},{"diffOp":{"equal":{"range":[1645,1681]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[1681,1684]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[1684,1729]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[1729,1759]}}},{"diffOp":{"delete":{"range":[223,226]}}},{"diffOp":{"insert":{"range":[226,232]}}},{"diffOp":{"equal":{"range":[1759,1817]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[1817,1821]}}},{"diffOp":{"delete":{"range":[223,225]}}},{"diffOp":{"insert":{"range":[226,230]}}},{"diffOp":{"equal":{"range":[1821,1868]}}},{"diffOp":{"delete":{"range":[223,226]}}},{"diffOp":{"insert":{"range":[226,232]}}},{"diffOp":{"equal":{"range":[1868,1898]}}},{"diffOp":{"delete":{"range":[1898,1902]}}},{"diffOp":{"insert":{"range":[1902,1910]}}},{"diffOp":{"equal":{"range":[1910,1968]}}},{"diffOp":{"delete":{"range":[1898,1902]}}},{"diffOp":{"insert":{"range":[1902,1910]}}},{"diffOp":{"equal":{"range":[1968,2032]}}},{"diffOp":{"delete":{"range":[1898,1902]}}},{"diffOp":{"insert":{"range":[1902,1910]}}},{"diffOp":{"equal":{"range":[2032,2077]}}},{"diffOp":{"delete":{"range":[1898,1902]}}},{"diffOp":{"insert":{"range":[1902,1910]}}},{"diffOp":{"equal":{"range":[2077,2138]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[2138,2142]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1817,1821]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2142,2172]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[2172,2182]}}},{"diffOp":{"delete":{"range":[1898,1902]}}},{"diffOp":{"insert":{"range":[1902,1910]}}},{"diffOp":{"equal":{"range":[2182,2249]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1817,1820]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2249,2289]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[389,407]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2289,2337]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2337,2402]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[2402,2486]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[161,167]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1532,1582]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[232,261]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[261,288]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[288,294]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1603,1608]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2486,2555]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[2555,2593]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1681,1684]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2593,2664]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[2664,2673]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1817,1820]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2673,2689]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[389,407]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2689,2753]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2753,2766]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[2766,2811]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[2811,2859]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[1497,1510]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[1510,1532]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[161,167]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2859,2901]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1532,1582]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[232,261]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[261,288]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[288,294]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1603,1608]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2486,2555]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[2901,2956]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1681,1684]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2593,2664]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[2664,2673]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1817,1820]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2956,3021]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3021,3058]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[619,623]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[3058,3071]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[3071,3077]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[3077,3096]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1817,1820]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3096,3137]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[389,407]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3137,3202]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2337,2402]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[3202,3250]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[3250,3301]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[161,167]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3301,3358]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3358,3383]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3383,3421]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3421,3477]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[3477,3519]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1817,1820]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3519,3558]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3558,3600]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[3600,3629]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[3629,3670]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[3670,3716]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[3716,3743]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[3743,3770]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[3770,3809]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[3809,3855]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[3855,3871]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[3871,3887]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1603,1608]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3887,3944]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3944,3987]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3987,4011]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[288,294]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[4011,4024]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[4024,4067]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1817,1820]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1357,1380]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4067,4078]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4078,4111]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[4111,4126]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[3600,3629]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1603,1607]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4126,4162]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[389,407]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4162,4167]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[4167,4193]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[4193,4212]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[4212,4245]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4245,4249]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[4249,4321]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[610,619]}}},{"diffOp":{"delete":{"range":[1898,1902]}}},{"diffOp":{"insert":{"range":[1902,1910]}}},{"diffOp":{"equal":{"range":[4321,4337]}}},{"diffOp":{"delete":{"range":[1898,1902]}}},{"diffOp":{"insert":{"range":[1902,1910]}}},{"diffOp":{"equal":{"range":[4337,4394]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[1017,1020]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2402,2404]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4394,4443]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2337,2402]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[4443,4491]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[2811,2823]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[3250,3301]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[161,167]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4491,4548]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4548,4592]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4592,4631]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[2901,2956]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1681,1684]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4631,4669]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3383,3421]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4669,4739]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4739,4787]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4787,4855]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3558,3600]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[4855,4909]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[4909,4981]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[4981,5047]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5047,5098]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5098,5149]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5149,5218]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5218,5275]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5275,5313]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[3871,3887]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1603,1608]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3887,3944]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3944,3987]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3987,4011]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[288,294]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[4011,4024]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5313,5381]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5381,5402]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1817,1820]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1357,1380]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4067,4078]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[5402,5453]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4126,4162]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[389,407]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[5453,5521]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2337,2402]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[5521,5569]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[2811,2823]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[5569,5618]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[161,167]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3944,3987]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[5618,5651]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[232,261]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[261,288]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[288,294]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5651,5685]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[1012,1017]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1603,1607]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1357,1380]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4067,4078]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[5685,5736]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[5736,5774]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[389,407]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[5774,5842]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2337,2402]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[5842,5893]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[2811,2823]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[5569,5618]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[161,167]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4548,4592]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4592,4631]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[2901,2956]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1681,1684]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4631,4669]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3383,3421]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3558,3600]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5893,5923]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5923,5965]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5965,5983]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5983,6011]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[6011,6039]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[6039,6079]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5275,5313]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[3871,3887]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1603,1608]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[6079,6147]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3944,3987]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3987,4011]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[288,294]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[4011,4024]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[6147,6194]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[1012,1017]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1817,1820]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4067,4078]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[6194,6249]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[5736,5774]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[389,407]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[6249,6320]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2337,2402]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[6320,6369]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[2811,2823]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[5569,5618]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[161,167]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4548,4592]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4592,4631]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[2901,2956]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1681,1684]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4631,4669]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3383,3421]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3558,3600]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5893,5923]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5923,5965]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[6369,6386]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5983,6011]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[6011,6039]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[6039,6079]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5275,5313]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[3871,3887]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1603,1608]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[6079,6147]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3944,3987]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3987,4011]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[288,294]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[4011,4024]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[6386,6431]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[1012,1017]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1817,1820]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[6431,6484]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[5736,5774]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[389,407]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[6484,6553]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2337,2402]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[6553,6609]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[2811,2823]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[6609,6621]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[6621,6641]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[6641,6665]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[6665,6704]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[161,167]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4548,4592]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4592,4631]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[2901,2956]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1681,1684]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[4631,4669]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3383,3421]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3558,3600]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5893,5923]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5923,5965]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[6704,6742]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5983,6011]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[6011,6039]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[6039,6079]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[6742,6802]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[3871,3887]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[6802,6872]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1603,1608]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[6079,6147]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[3944,3987]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[6872,6915]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[288,294]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[4011,4024]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[6915,6968]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[5381,5402]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1817,1821]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[6968,6986]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[6986,7006]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[6742,6802]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[6802,6872]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[3871,3887]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[7006,7023]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1017,1020]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[7023,7083]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[7083,7124]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[389,407]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[7124,7201]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2337,2402]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[7201,7247]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[7247,7259]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[7259,7312]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[161,167]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[7312,7358]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[7358,7419]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[7419,7463]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[7463,7512]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[232,261]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[261,288]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[288,294]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[7512,7550]}}},{"diffOp":{"delete":{"range":[1898,1901]}}},{"diffOp":{"insert":{"range":[1902,1908]}}},{"diffOp":{"equal":{"range":[7550,7559]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[1603,1608]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[7559,7668]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[7668,7734]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[7734,7771]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[389,407]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[7771,7832]}}},{"diffOp":{"delete":{"range":[1898,1900]}}},{"diffOp":{"insert":{"range":[1902,1906]}}},{"diffOp":{"equal":{"range":[2337,2402]}}},{"diffOp":{"delete":{"range":[1898,1899]}}},{"diffOp":{"insert":{"range":[1902,1904]}}},{"diffOp":{"equal":{"range":[7201,7205]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\articles\\articles.actions.ts"},"span":null,"sourceCode":"\"use server\";\n\nimport type { ActionResult } from \"@/features/shared/shared.types\";\nimport { createSafeErrorMessage, logger } from \"@/lib/logger\";\nimport octokit, { githubRepoInfo } from \"@/lib/octokit\";\nimport { sanitizeMarkdown } from \"@/lib/sanitize\";\nimport { getCurrentUser } from \"@/lib/user\";\nimport {\n  CreateArticleSchema,\n  UpdateArticleSchema,\n} from \"@/lib/validation/article.schema\";\nimport { cacheTag, refresh, updateTag } from \"next/cache\";\nimport { randomUUID } from \"node:crypto\";\nimport type { Article, ArticleFrontmatter, GitHubFile } from \"./articles.types\";\nimport { generateFrontmatter, parseArticleFrontmatter } from \"./articles.utils\";\n\nconst { ARTICLES_PATH, MEDIA_PATH: IMAGES_PATH } = githubRepoInfo;\n\nasync function fetchLatestSha(path: string): Promise<string | undefined> {\n\ttry {\n\t\tconst fileData = await octokit.repos.getContent({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath,\n\t\t});\n\t\tif (!Array.isArray(fileData.data) && \"sha\" in fileData.data) {\n\t\t\treturn fileData.data.sha;\n\t\t}\n\t} catch (error) {\n\t\tlogger.error(\"Failed to fetch latest file SHA\", error, { path });\n\t}\n\treturn undefined;\n}\n\nfunction createArticleObject(\n\tid: string,\n\tfrontmatter: ArticleFrontmatter,\n\tbody: string,\n\tsha?: string,\n): Article {\n\treturn {\n\t\tid,\n\t\ttitle: frontmatter.title,\n\t\tdescription: frontmatter.description,\n\t\tcontent: body,\n\t\tlang: frontmatter.lang,\n\t\tcreatedAt: frontmatter.createdAt || new Date().toISOString(),\n\t\tupdatedAt: frontmatter.updatedAt || new Date().toISOString(),\n\t\tpublishedAt: frontmatter.publishedDate,\n\t\tpublished: frontmatter.published,\n\t\tauthor: frontmatter.author,\n\t\ttags: frontmatter.tags,\n\t\tcoverImage: frontmatter.coverImage,\n\t\tsha,\n\t};\n}\n\nasync function updateGitHubFile(\n\tpath: string,\n\tcontent: string,\n\tmessage: string,\n\tsha?: string,\n): Promise<string | undefined> {\n\tconst latestSha = sha ? await fetchLatestSha(path) : sha;\n\tconst response = await octokit.repos.createOrUpdateFileContents({\n\t\towner: githubRepoInfo.owner,\n\t\trepo: githubRepoInfo.repo,\n\t\tpath,\n\t\tmessage,\n\t\tcontent: Buffer.from(content).toString(\"base64\"),\n\t\tsha: latestSha || sha,\n\t});\n\tupdateTag(\"articles\");\n\treturn response.data.content?.sha;\n}\n\nexport async function listArticlesAction(): Promise<ActionResult<Article[]>> {\n\t\"use cache\";\n\tcacheTag(\"articles\");\n\ttry {\n\t\tconst response = await octokit.repos.getContent({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath: ARTICLES_PATH,\n\t\t});\n\n\t\tif (!Array.isArray(response.data)) {\n\t\t\treturn { success: true, data: [] };\n\t\t}\n\n\t\tconst files = response.data as GitHubFile[];\n\t\tconst mdFiles = files.filter(\n\t\t\t(f) => f.name.endsWith(\".md\") || f.name.endsWith(\".mdx\"),\n\t\t);\n\n\t\tconst articles: Article[] = await Promise.all(\n\t\t\tmdFiles.map(async (file) => {\n\t\t\t\tconst content = await getArticleContentAction(file.path);\n\t\t\t\tconst { frontmatter, body } = parseArticleFrontmatter(content);\n\t\t\t\tconst id = file.name.replace(/\\.mdx?$/, \"\");\n\t\t\t\treturn createArticleObject(id, frontmatter, body, file.sha);\n\t\t\t}),\n\t\t);\n\n\t\tconst sorted = articles.sort(\n\t\t\t(a, b) =>\n\t\t\t\tnew Date(b.createdAt).getTime() - new Date(a.createdAt).getTime(),\n\t\t);\n\t\treturn { success: true, data: sorted };\n\t} catch (error) {\n\t\tlogger.error(\"Failed to list articles\", error);\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function getArticleContentAction(path: string): Promise<string> {\n\ttry {\n\t\tconst response = await octokit.repos.getContent({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath,\n\t\t});\n\n\t\tif (Array.isArray(response.data) || response.data.type !== \"file\") {\n\t\t\tthrow new Error(\"Invalid file type\");\n\t\t}\n\n\t\tconst content = Buffer.from(response.data.content, \"base64\").toString(\n\t\t\t\"utf-8\",\n\t\t);\n\t\treturn content;\n\t} catch (error) {\n\t\tlogger.error(\"Failed to get article content\", error, { path });\n\t\tthrow error;\n\t}\n}\n\nexport async function getArticleAction(\n\tid: string,\n): Promise<ActionResult<Article>> {\n\t\"use cache\";\n\tcacheTag(\"articles\");\n\ttry {\n\t\tconst path = `${ARTICLES_PATH}/${id}.md`;\n\t\tconst response = await octokit.repos.getContent({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath,\n\t\t});\n\n\t\tif (Array.isArray(response.data) || response.data.type !== \"file\") {\n\t\t\treturn { success: false, error: \"Article not found\" };\n\t\t}\n\n\t\tconst content = Buffer.from(response.data.content, \"base64\").toString(\n\t\t\t\"utf-8\",\n\t\t);\n\t\tconst { frontmatter, body } = parseArticleFrontmatter(content);\n\n\t\tconst article = createArticleObject(\n\t\t\tid,\n\t\t\tfrontmatter,\n\t\t\tbody,\n\t\t\tresponse.data.sha,\n\t\t);\n\t\treturn { success: true, data: article };\n\t} catch (error) {\n\t\tlogger.error(\"Failed to get article\", error, { articleId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function createArticleAction(\n\tinput: unknown,\n): Promise<ActionResult<string>> {\n\ttry {\n\t\tconst validatedInput = CreateArticleSchema.parse(input);\n\t\tconst id = randomUUID();\n\t\tconst now = new Date().toISOString();\n\t\tconst { body: cleanContent } = parseArticleFrontmatter(\n\t\t\tsanitizeMarkdown(validatedInput.content),\n\t\t);\n\t\tconst currentUser = getCurrentUser();\n\n\t\tconst frontmatter = generateFrontmatter({\n\t\t\ttitle: validatedInput.title,\n\t\t\tdescription: validatedInput.description,\n\t\t\tpublished: validatedInput.published ?? false,\n\t\t\tlang: validatedInput.lang,\n\t\t\ttags: validatedInput.tags,\n\t\t\tcoverImage: validatedInput.coverImage,\n\t\t\tauthor: validatedInput.author || currentUser,\n\t\t\tcreatedAt: now,\n\t\t\tupdatedAt: now,\n\t\t});\n\n\t\tconst fileContent = `${frontmatter}\\n\\n${cleanContent}`;\n\t\tconst path = `${ARTICLES_PATH}/${id}.md`;\n\n\t\tawait updateGitHubFile(\n\t\t\tpath,\n\t\t\tfileContent,\n\t\t\t`Create article: ${validatedInput.title}`,\n\t\t);\n\t\tupdateTag(\"articles\");\n\t\trefresh();\n\t\tlogger.info(\"Article created\", {\n\t\t\tarticleId: id,\n\t\t\ttitle: validatedInput.title,\n\t\t});\n\t\treturn { success: true, data: id };\n\t} catch (error) {\n\t\tif (\n\t\t\terror instanceof Error &&\n\t\t\t\"code\" in error &&\n\t\t\terror.code === \"ERR_BAD_REQUEST\"\n\t\t) {\n\t\t\tlogger.warn(\"Invalid article data provided\", { error: error.message });\n\t\t\treturn {\n\t\t\t\tsuccess: false,\n\t\t\t\terror: \"Invalid article data. Please check your input.\",\n\t\t\t};\n\t\t}\n\t\tlogger.error(\"Failed to create article\", error);\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function updateArticleAction(\n\tid: string,\n\tinput: unknown,\n): Promise<ActionResult<string>> {\n\ttry {\n\t\tconst validatedInput = UpdateArticleSchema.parse(input);\n\t\tconst result = await getArticleAction(id);\n\n\t\tif (!result.success || !result.data) {\n\t\t\treturn { success: false, error: \"Article not found\" };\n\t\t}\n\n\t\tconst existingArticle = result.data;\n\n\t\tconst now = new Date().toISOString();\n\t\tconst rawContent = validatedInput.content ?? existingArticle.content;\n\t\tconst sanitized = sanitizeMarkdown(rawContent);\n\t\tconst { body: cleanContent } = parseArticleFrontmatter(sanitized);\n\n\t\tconst frontmatter = generateFrontmatter({\n\t\t\ttitle: validatedInput.title ?? existingArticle.title,\n\t\t\tdescription: validatedInput.description ?? existingArticle.description,\n\t\t\tpublished: validatedInput.published ?? existingArticle.published,\n\t\t\tlang: validatedInput.lang ?? existingArticle.lang,\n\t\t\ttags: validatedInput.tags ?? existingArticle.tags,\n\t\t\tcoverImage: validatedInput.coverImage ?? existingArticle.coverImage,\n\t\t\tauthor: validatedInput.author ?? existingArticle.author,\n\t\t\tcreatedAt: existingArticle.createdAt,\n\t\t\tupdatedAt: now,\n\t\t});\n\n\t\tconst fileContent = `${frontmatter}\\n\\n${cleanContent}`;\n\t\tconst path = `${ARTICLES_PATH}/${id}.md`;\n\n\t\tawait updateGitHubFile(\n\t\t\tpath,\n\t\t\tfileContent,\n\t\t\t`Update article: ${validatedInput.title ?? existingArticle.title}`,\n\t\t\texistingArticle.sha,\n\t\t);\n\t\tupdateTag(\"articles\");\n\t\trefresh();\n\t\tlogger.info(\"Article updated\", { articleId: id });\n\t\treturn { success: true, data: id };\n\t} catch (error) {\n\t\tlogger.error(\"Failed to update article\", error, { articleId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function deleteArticleAction(\n\tid: string,\n\tsha: string,\n): Promise<ActionResult<boolean>> {\n\ttry {\n\t\tconst path = `${ARTICLES_PATH}/${id}.md`;\n\n\t\tawait octokit.repos.deleteFile({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath,\n\t\t\tmessage: `Delete article: ${id}`,\n\t\t\tsha,\n\t\t});\n\t\tupdateTag(\"articles\");\n\t\trefresh();\n\t\tlogger.info(\"Article deleted\", { articleId: id });\n\t\treturn { success: true, data: true };\n\t} catch (error) {\n\t\tlogger.error(\"Failed to delete article\", error, { articleId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function unpublishArticleAction(\n\tid: string,\n\tsha: string,\n): Promise<ActionResult<boolean>> {\n\ttry {\n\t\tconst result = await getArticleAction(id);\n\n\t\tif (!result.success || !result.data) {\n\t\t\treturn { success: false, error: \"Article not found\" };\n\t\t}\n\n\t\tconst existingArticle = result.data;\n\n\t\tconst now = new Date().toISOString();\n\t\tconst frontmatter = generateFrontmatter({\n\t\t\ttitle: existingArticle.title,\n\t\t\tdescription: existingArticle.description,\n\t\t\tpublished: false,\n\t\t\tlang: existingArticle.lang,\n\t\t\ttags: existingArticle.tags,\n\t\t\tcoverImage: existingArticle.coverImage,\n\t\t\tcreatedAt: existingArticle.createdAt,\n\t\t\tupdatedAt: now,\n\t\t});\n\n\t\tconst fileContent = `${frontmatter}\\n\\n${existingArticle.content}`;\n\t\tconst path = `${ARTICLES_PATH}/${id}.md`;\n\n\t\tawait updateGitHubFile(\n\t\t\tpath,\n\t\t\tfileContent,\n\t\t\t`Unpublish article: ${existingArticle.title}`,\n\t\t\tsha,\n\t\t);\n\t\trefresh();\n\t\tlogger.info(\"Article unpublished\", { articleId: id });\n\t\treturn { success: true, data: true };\n\t} catch (error) {\n\t\tlogger.error(\"Failed to unpublish article\", error, { articleId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function publishArticleAction(\n\tid: string,\n\tsha: string,\n): Promise<ActionResult<boolean>> {\n\ttry {\n\t\tconst result = await getArticleAction(id);\n\n\t\tif (!result.success || !result.data) {\n\t\t\treturn { success: false, error: \"Article not found\" };\n\t\t}\n\n\t\tconst existingArticle = result.data;\n\n\t\tconst now = new Date().toISOString();\n\t\tconst frontmatter = generateFrontmatter({\n\t\t\ttitle: existingArticle.title,\n\t\t\tdescription: existingArticle.description,\n\t\t\tpublished: true,\n\t\t\tlang: existingArticle.lang,\n\t\t\ttags: existingArticle.tags,\n\t\t\tcoverImage: existingArticle.coverImage,\n\t\t\tcreatedAt: existingArticle.createdAt,\n\t\t\tupdatedAt: now,\n\t\t});\n\n\t\tconst fileContent = `${frontmatter}\\n\\n${existingArticle.content}`;\n\t\tconst path = `${ARTICLES_PATH}/${id}.md`;\n\n\t\tawait updateGitHubFile(\n\t\t\tpath,\n\t\t\tfileContent,\n\t\t\t`Publish article: ${existingArticle.title}`,\n\t\t\tsha,\n\t\t);\n\t\tlogger.info(\"Article published\", { articleId: id });\n\t\treturn { success: true, data: true };\n\t} catch (error) {\n\t\tlogger.error(\"Failed to publish article\", error, { articleId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function updateArticleMetadataAction(\n\tid: string,\n\tmetadata: {\n\t\tcreatedAt?: string;\n\t\tpublishedDate?: string;\n\t},\n): Promise<ActionResult<Article>> {\n\ttry {\n\t\tconst result = await getArticleAction(id);\n\n\t\tif (!result.success || !result.data) {\n\t\t\treturn { success: false, error: \"Article not found\" };\n\t\t}\n\n\t\tconst existingArticle = result.data;\n\n\t\tconst now = new Date().toISOString();\n\t\tconst frontmatter = generateFrontmatter({\n\t\t\ttitle: existingArticle.title,\n\t\t\tdescription: existingArticle.description,\n\t\t\tpublished: existingArticle.published,\n\t\t\tlang: existingArticle.lang,\n\t\t\ttags: existingArticle.tags,\n\t\t\tcoverImage: existingArticle.coverImage,\n\t\t\tcreatedAt: metadata.createdAt ?? existingArticle.createdAt,\n\t\t\tupdatedAt: now,\n\t\t\tpublishedDate: metadata.publishedDate ?? existingArticle.publishedAt,\n\t\t});\n\n\t\tconst fileContent = `${frontmatter}\\n\\n${existingArticle.content}`;\n\t\tconst path = `${ARTICLES_PATH}/${id}.md`;\n\n\t\tconst updatedSha = await updateGitHubFile(\n\t\t\tpath,\n\t\t\tfileContent,\n\t\t\t`Update article metadata: ${existingArticle.title}`,\n\t\t\texistingArticle.sha,\n\t\t);\n\n\t\tconst updated = {\n\t\t\t...existingArticle,\n\t\t\tcreatedAt: metadata.createdAt ?? existingArticle.createdAt,\n\t\t\tpublishedDate: metadata.publishedDate ?? existingArticle.publishedAt,\n\t\t\tupdatedAt: now,\n\t\t\tsha: updatedSha,\n\t\t};\n\t\tlogger.info(\"Article metadata updated\", { articleId: id });\n\t\treturn { success: true, data: updated };\n\t} catch (error) {\n\t\tlogger.error(\"Failed to update article metadata\", error, { articleId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function uploadImageAction(\n\tfile: File,\n\tfileName: string,\n): Promise<ActionResult<string>> {\n\ttry {\n\t\tconst arrayBuffer = await file.arrayBuffer();\n\t\tconst content = Buffer.from(arrayBuffer).toString(\"base64\");\n\t\tconst path = `${IMAGES_PATH}/${fileName}`;\n\n\t\tawait octokit.repos.createOrUpdateFileContents({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath,\n\t\t\tmessage: `Upload image: ${fileName}`,\n\t\t\tcontent,\n\t\t});\n\n\t\tconst url = `https://raw.githubusercontent.com/${githubRepoInfo.owner}/${githubRepoInfo.repo}/main/${path}`;\n\t\tlogger.info(\"Image uploaded\", { fileName, fileSize: file.size });\n\t\treturn { success: true, data: url };\n\t} catch (error) {\n\t\tlogger.error(\"Failed to upload image\", error, { fileName });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n"},"tags":[],"source":null},{"category":"assist/source/organizeImports","severity":"error","description":"The imports and exports are not sorted.","message":[{"elements":[],"content":"The imports and exports are not sorted."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Safe fix: Organize Imports (Biome)"}]]},{"diff":{"dictionary":"\"use client\";\n\nimport {import Link from \"next/link\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn \n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/libcomponents/ui/utilstooltip\";type { Article featuresuiarticlesarticles.types\nimport { getReadingTimeformatDate } from \"..@articles.utilsfeatures/shared/shared.utils{ Articlecn } from \"@/features/articles@/features/sharedshared.utils\nimport ArticleDeleteDialog from \"./article-delete-dialog\";\nimport { PostMetadataEditor } from \"./article-metadata-editor\";  );\n}\n","ops":[{"diffOp":{"equal":{"range":[0,23]}}},{"equalLines":{"line_count":12}},{"diffOp":{"equal":{"range":[23,148]}}},{"diffOp":{"equal":{"range":[148,157]}}},{"diffOp":{"delete":{"range":[157,161]}}},{"diffOp":{"insert":{"range":[161,228]}}},{"diffOp":{"equal":{"range":[228,238]}}},{"diffOp":{"delete":{"range":[238,241]}}},{"diffOp":{"insert":{"range":[241,254]}}},{"diffOp":{"equal":{"range":[254,255]}}},{"diffOp":{"delete":{"range":[255,260]}}},{"diffOp":{"insert":{"range":[260,267]}}},{"diffOp":{"equal":{"range":[267,269]}}},{"diffOp":{"equal":{"range":[148,156]}}},{"diffOp":{"insert":{"range":[269,274]}}},{"diffOp":{"equal":{"range":[274,275]}}},{"diffOp":{"delete":{"range":[161,228]}}},{"diffOp":{"insert":{"range":[275,284]}}},{"diffOp":{"equal":{"range":[228,238]}}},{"diffOp":{"delete":{"range":[241,251]}}},{"diffOp":{"insert":{"range":[284,292]}}},{"diffOp":{"equal":{"range":[254,255]}}},{"diffOp":{"delete":{"range":[292,294]}}},{"diffOp":{"insert":{"range":[294,302]}}},{"diffOp":{"equal":{"range":[254,255]}}},{"diffOp":{"delete":{"range":[260,267]}}},{"diffOp":{"insert":{"range":[302,316]}}},{"diffOp":{"equal":{"range":[267,269]}}},{"diffOp":{"equal":{"range":[316,326]}}},{"diffOp":{"delete":{"range":[326,340]}}},{"diffOp":{"insert":{"range":[340,350]}}},{"diffOp":{"equal":{"range":[350,359]}}},{"diffOp":{"delete":{"range":[359,361]}}},{"diffOp":{"insert":{"range":[361,362]}}},{"diffOp":{"equal":{"range":[254,255]}}},{"diffOp":{"delete":{"range":[362,376]}}},{"diffOp":{"insert":{"range":[376,404]}}},{"diffOp":{"equal":{"range":[267,269]}}},{"diffOp":{"equal":{"range":[316,324]}}},{"diffOp":{"delete":{"range":[269,274]}}},{"diffOp":{"equal":{"range":[404,406]}}},{"diffOp":{"delete":{"range":[406,413]}}},{"diffOp":{"insert":{"range":[413,415]}}},{"diffOp":{"equal":{"range":[415,426]}}},{"diffOp":{"delete":{"range":[426,443]}}},{"diffOp":{"insert":{"range":[238,241]}}},{"diffOp":{"equal":{"range":[254,255]}}},{"diffOp":{"delete":{"range":[302,316]}}},{"diffOp":{"insert":{"range":[255,260]}}},{"diffOp":{"equal":{"range":[267,269]}}},{"diffOp":{"equal":{"range":[316,326]}}},{"diffOp":{"delete":{"range":[340,350]}}},{"diffOp":{"insert":{"range":[326,340]}}},{"diffOp":{"equal":{"range":[415,424]}}},{"diffOp":{"delete":{"range":[443,460]}}},{"diffOp":{"insert":{"range":[359,361]}}},{"diffOp":{"equal":{"range":[254,255]}}},{"diffOp":{"delete":{"range":[460,472]}}},{"diffOp":{"insert":{"range":[362,376]}}},{"diffOp":{"equal":{"range":[267,269]}}},{"diffOp":{"equal":{"range":[472,595]}}},{"equalLines":{"line_count":233}},{"diffOp":{"equal":{"range":[595,602]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\articles\\components\\article-card.tsx"},"span":[15,192],"sourceCode":"\"use client\";\n\nimport {\n  IconCalendar,\n  IconCheck,\n  IconEdit,\n  IconEye,\n  IconFileText,\n  IconHourglass,\n  IconLanguage,\n  IconSettings,\n  IconTrash,\n  IconX,\n} from \"@tabler/icons-react\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { getReadingTime } from \"../articles.utils\";\nimport type { Article } from \"@/features/articles/articles.types\";\nimport { formatDate } from \"@/features/shared/shared.utils\";\nimport ArticleDeleteDialog from \"./article-delete-dialog\";\nimport { PostMetadataEditor } from \"./article-metadata-editor\";\nimport { ArticlePublishDialog } from \"./article-publish-dialog\";\n\ninterface ArticleCardProps {\n  article: Article;\n}\n\nexport function ArticleCard({ article }: ArticleCardProps) {\n  const formattedDate = formatDate(new Date(article.createdAt));\n  const readingTime = getReadingTime(article.content);\n\n  return (\n    <TooltipProvider>\n      <div\n        className={cn(\n          \"group relative flex flex-col overflow-hidden rounded-2xl border transition-all hover:shadow-lg hover:border-primary/20\",\n          article.published ? \"bg-card\" : \"bg-card/50 border-dashed border-muted-foreground/30 shadow-xs\"\n        )}\n      >\n        {/* Cover Image */}\n        <div className=\"relative aspect-video w-full overflow-hidden bg-muted\">\n          {article.coverImage ? (\n            <Image\n              src={article.coverImage}\n              alt={article.title}\n              fill\n              priority\n              className=\"object-cover transition-transform duration-500 group-hover:scale-105\"\n              sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\n            />\n          ) : (\n            <div className=\"flex h-full w-full items-center justify-center bg-muted/50\">\n              <IconFileText className=\"size-10 text-muted-foreground/20\" />\n            </div>\n          )}\n          <div className=\"absolute inset-0 bg-linear-to-t from-black/60 via-transparent to-transparent opacity-60\" />\n\n          {/* Status Badge on Image */}\n          <div className=\"absolute inset-x-3 top-3 flex gap-2\">\n            <Badge\n              variant={article.published ? \"default\" : \"secondary\"}\n              className=\"h-6 gap-1 rounded-lg px-2 text-[10px] font-bold uppercase tracking-wider shadow-lg backdrop-blur-md\"\n            >\n              {article.published ? (\n                <>\n                  <IconCheck className=\"size-3\" />\n                  Published\n                </>\n              ) : (\n                \"Draft\"\n              )}\n            </Badge>\n            <Badge\n              variant=\"outline\"\n              className=\"h-6 gap-1 rounded-lg px-2 text-[10px] font-semibold uppercase tracking-wide shadow-lg backdrop-blur-md bg-background/90 border-primary/30\"\n            >\n              <IconLanguage className=\"size-3\" />\n              {article.lang === \"fr\" ? \"FR\" : \"EN\"}\n            </Badge>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"flex flex-1 flex-col p-5\">\n          <div className=\"mb-3 flex flex-wrap gap-2\">\n            {article.tags?.slice(0, 2).map((tag: string) => (\n              <Badge\n                key={tag}\n                variant=\"outline\"\n                className=\"rounded-lg border-muted bg-muted/30 px-2 py-0 text-[10px] font-medium text-muted-foreground\"\n              >\n                {tag}\n              </Badge>\n            ))}\n            {article.tags && article.tags.length > 2 && (\n              <Badge\n                variant=\"outline\"\n                className=\"rounded-lg border-muted bg-muted/30 px-2 py-0 text-[10px] font-medium text-muted-foreground\"\n              >\n                +{article.tags.length - 2}\n              </Badge>\n            )}\n          </div>\n\n          <h3 className=\"mb-2 line-clamp-1 text-lg font-bold tracking-tight group-hover:text-primary transition-colors\">\n            {article.title}\n          </h3>\n\n          <p className=\"mb-4 line-clamp-2 flex-1 text-sm leading-relaxed text-muted-foreground\">\n            {article.description || \"No description provided for this article.\"}\n          </p>\n\n          <div className=\"flex items-center gap-3 text-[11px] font-medium text-muted-foreground\">\n            <span className=\"flex items-center gap-1.5 shrink-0\">\n              <IconCalendar className=\"size-3.5\" />\n              {formattedDate}\n            </span>\n            <span className=\"flex items-center gap-1.5 shrink-0 border-l pl-3\">\n              <IconHourglass className=\"size-3.5\" />\n              {readingTime} min read\n            </span>\n            {article.author && (\n              <span className=\"flex items-center gap-1.5 border-l pl-3 truncate\">\n                By {article.author}\n              </span>\n            )}\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex items-center justify-between border-t pt-4 gap-2\">\n            <div className=\"flex items-center gap-1\">\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button\n                    asChild\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"h-8 w-8 rounded-lg hover:bg-primary/10 hover:text-primary\"\n                  >\n                    <Link href={`/cms/articles/${article.id}`}>\n                      <IconEye className=\"size-4\" />\n                    </Link>\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent>View article</TooltipContent>\n              </Tooltip>\n\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button\n                    asChild\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"h-8 w-8 rounded-lg hover:bg-primary/10 hover:text-primary\"\n                  >\n                    <Link href={`/cms/articles/${article.id}/edit`}>\n                      <IconEdit className=\"size-4\" />\n                    </Link>\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent>Edit article</TooltipContent>\n              </Tooltip>\n\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <PostMetadataEditor article={article}>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"h-8 w-8 rounded-lg hover:bg-primary/10 hover:text-primary\"\n                    >\n                      <IconSettings className=\"size-4\" />\n                    </Button>\n                  </PostMetadataEditor>\n                </TooltipTrigger>\n                <TooltipContent>Settings</TooltipContent>\n              </Tooltip>\n            </div>\n\n            <div className=\"flex items-center gap-1\">\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <ArticlePublishDialog article={article}>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"h-8 w-8 rounded-lg hover:bg-primary/10 hover:text-primary\"\n                    >\n                      {article.published ? (\n                        <IconX className=\"size-4 text-amber-600\" />\n                      ) : (\n                        <IconCheck className=\"size-4 text-emerald-600\" />\n                      )}\n                    </Button>\n                  </ArticlePublishDialog>\n                </TooltipTrigger>\n                <TooltipContent>\n                  {article.published ? \"Unpublish\" : \"Publish\"}\n                </TooltipContent>\n              </Tooltip>\n\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <ArticleDeleteDialog\n                    articleId={article.id}\n                    articleSha={article.sha}\n                  >\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"h-8 w-8 rounded-lg text-destructive hover:bg-destructive/10 hover:text-destructive\"\n                    >\n                      <IconTrash className=\"size-4\" />\n                    </Button>\n                  </ArticleDeleteDialog>\n                </TooltipTrigger>\n                <TooltipContent>Delete article</TooltipContent>\n              </Tooltip>\n            </div>\n          </div>\n        </div>\n      </div>\n    </TooltipProvider>\n  );\n}\n\n// Loading Skeleton\nexport function ArticleCardSkeleton() {\n  return (\n    <div className=\"flex flex-col overflow-hidden rounded-2xl border bg-card\">\n      <div className=\"aspect-video w-full animate-pulse bg-muted\" />\n      <div className=\"p-5 space-y-4\">\n        <div className=\"flex gap-2\">\n          <div className=\"h-5 w-16 animate-pulse rounded-lg bg-muted\" />\n          <div className=\"h-5 w-12 animate-pulse rounded-lg bg-muted\" />\n        </div>\n        <div className=\"space-y-2\">\n          <div className=\"h-6 w-3/4 animate-pulse rounded-lg bg-muted\" />\n          <div className=\"h-4 w-full animate-pulse rounded-lg bg-muted\" />\n        </div>\n        <div className=\"h-4 w-1/3 animate-pulse rounded-lg bg-muted\" />\n        <div className=\"flex justify-between pt-4 border-t\">\n          <div className=\"flex gap-2\">\n            <div className=\"h-8 w-8 animate-pulse rounded-lg bg-muted\" />\n            <div className=\"h-8 w-8 animate-pulse rounded-lg bg-muted\" />\n            <div className=\"h-8 w-8 animate-pulse rounded-lg bg-muted\" />\n          </div>\n          <div className=\"flex gap-2\">\n            <div className=\"h-8 w-8 animate-pulse rounded-lg bg-muted\" />\n            <div className=\"h-8 w-8 animate-pulse rounded-lg bg-muted\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"},"tags":["fixable"],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"\"use client\";\n\nimport {        className={cn(\n          \"group relative flex flex-col overflow-hidden rounded-2xl border transition-all hover:shadow-lg hover:border-primary/20\",\n          article.published\n            ? \"bg-card\": \"bg-card/50 border-dashed border-muted-foreground/30 shadow-xs\",\n        )}\n      >  );\n}\n","ops":[{"diffOp":{"equal":{"range":[0,23]}}},{"equalLines":{"line_count":40}},{"diffOp":{"equal":{"range":[23,205]}}},{"diffOp":{"delete":{"range":[23,24]}}},{"diffOp":{"insert":{"range":[205,218]}}},{"diffOp":{"equal":{"range":[218,229]}}},{"diffOp":{"delete":{"range":[23,24]}}},{"diffOp":{"insert":{"range":[205,218]}}},{"diffOp":{"equal":{"range":[229,294]}}},{"diffOp":{"insert":{"range":[294,295]}}},{"diffOp":{"equal":{"range":[295,314]}}},{"equalLines":{"line_count":215}},{"diffOp":{"equal":{"range":[314,321]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\articles\\components\\article-card.tsx"},"span":null,"sourceCode":"\"use client\";\n\nimport {\n  IconCalendar,\n  IconCheck,\n  IconEdit,\n  IconEye,\n  IconFileText,\n  IconHourglass,\n  IconLanguage,\n  IconSettings,\n  IconTrash,\n  IconX,\n} from \"@tabler/icons-react\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { getReadingTime } from \"../articles.utils\";\nimport type { Article } from \"@/features/articles/articles.types\";\nimport { formatDate } from \"@/features/shared/shared.utils\";\nimport ArticleDeleteDialog from \"./article-delete-dialog\";\nimport { PostMetadataEditor } from \"./article-metadata-editor\";\nimport { ArticlePublishDialog } from \"./article-publish-dialog\";\n\ninterface ArticleCardProps {\n  article: Article;\n}\n\nexport function ArticleCard({ article }: ArticleCardProps) {\n  const formattedDate = formatDate(new Date(article.createdAt));\n  const readingTime = getReadingTime(article.content);\n\n  return (\n    <TooltipProvider>\n      <div\n        className={cn(\n          \"group relative flex flex-col overflow-hidden rounded-2xl border transition-all hover:shadow-lg hover:border-primary/20\",\n          article.published ? \"bg-card\" : \"bg-card/50 border-dashed border-muted-foreground/30 shadow-xs\"\n        )}\n      >\n        {/* Cover Image */}\n        <div className=\"relative aspect-video w-full overflow-hidden bg-muted\">\n          {article.coverImage ? (\n            <Image\n              src={article.coverImage}\n              alt={article.title}\n              fill\n              priority\n              className=\"object-cover transition-transform duration-500 group-hover:scale-105\"\n              sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\n            />\n          ) : (\n            <div className=\"flex h-full w-full items-center justify-center bg-muted/50\">\n              <IconFileText className=\"size-10 text-muted-foreground/20\" />\n            </div>\n          )}\n          <div className=\"absolute inset-0 bg-linear-to-t from-black/60 via-transparent to-transparent opacity-60\" />\n\n          {/* Status Badge on Image */}\n          <div className=\"absolute inset-x-3 top-3 flex gap-2\">\n            <Badge\n              variant={article.published ? \"default\" : \"secondary\"}\n              className=\"h-6 gap-1 rounded-lg px-2 text-[10px] font-bold uppercase tracking-wider shadow-lg backdrop-blur-md\"\n            >\n              {article.published ? (\n                <>\n                  <IconCheck className=\"size-3\" />\n                  Published\n                </>\n              ) : (\n                \"Draft\"\n              )}\n            </Badge>\n            <Badge\n              variant=\"outline\"\n              className=\"h-6 gap-1 rounded-lg px-2 text-[10px] font-semibold uppercase tracking-wide shadow-lg backdrop-blur-md bg-background/90 border-primary/30\"\n            >\n              <IconLanguage className=\"size-3\" />\n              {article.lang === \"fr\" ? \"FR\" : \"EN\"}\n            </Badge>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"flex flex-1 flex-col p-5\">\n          <div className=\"mb-3 flex flex-wrap gap-2\">\n            {article.tags?.slice(0, 2).map((tag: string) => (\n              <Badge\n                key={tag}\n                variant=\"outline\"\n                className=\"rounded-lg border-muted bg-muted/30 px-2 py-0 text-[10px] font-medium text-muted-foreground\"\n              >\n                {tag}\n              </Badge>\n            ))}\n            {article.tags && article.tags.length > 2 && (\n              <Badge\n                variant=\"outline\"\n                className=\"rounded-lg border-muted bg-muted/30 px-2 py-0 text-[10px] font-medium text-muted-foreground\"\n              >\n                +{article.tags.length - 2}\n              </Badge>\n            )}\n          </div>\n\n          <h3 className=\"mb-2 line-clamp-1 text-lg font-bold tracking-tight group-hover:text-primary transition-colors\">\n            {article.title}\n          </h3>\n\n          <p className=\"mb-4 line-clamp-2 flex-1 text-sm leading-relaxed text-muted-foreground\">\n            {article.description || \"No description provided for this article.\"}\n          </p>\n\n          <div className=\"flex items-center gap-3 text-[11px] font-medium text-muted-foreground\">\n            <span className=\"flex items-center gap-1.5 shrink-0\">\n              <IconCalendar className=\"size-3.5\" />\n              {formattedDate}\n            </span>\n            <span className=\"flex items-center gap-1.5 shrink-0 border-l pl-3\">\n              <IconHourglass className=\"size-3.5\" />\n              {readingTime} min read\n            </span>\n            {article.author && (\n              <span className=\"flex items-center gap-1.5 border-l pl-3 truncate\">\n                By {article.author}\n              </span>\n            )}\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex items-center justify-between border-t pt-4 gap-2\">\n            <div className=\"flex items-center gap-1\">\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button\n                    asChild\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"h-8 w-8 rounded-lg hover:bg-primary/10 hover:text-primary\"\n                  >\n                    <Link href={`/cms/articles/${article.id}`}>\n                      <IconEye className=\"size-4\" />\n                    </Link>\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent>View article</TooltipContent>\n              </Tooltip>\n\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button\n                    asChild\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"h-8 w-8 rounded-lg hover:bg-primary/10 hover:text-primary\"\n                  >\n                    <Link href={`/cms/articles/${article.id}/edit`}>\n                      <IconEdit className=\"size-4\" />\n                    </Link>\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent>Edit article</TooltipContent>\n              </Tooltip>\n\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <PostMetadataEditor article={article}>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"h-8 w-8 rounded-lg hover:bg-primary/10 hover:text-primary\"\n                    >\n                      <IconSettings className=\"size-4\" />\n                    </Button>\n                  </PostMetadataEditor>\n                </TooltipTrigger>\n                <TooltipContent>Settings</TooltipContent>\n              </Tooltip>\n            </div>\n\n            <div className=\"flex items-center gap-1\">\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <ArticlePublishDialog article={article}>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"h-8 w-8 rounded-lg hover:bg-primary/10 hover:text-primary\"\n                    >\n                      {article.published ? (\n                        <IconX className=\"size-4 text-amber-600\" />\n                      ) : (\n                        <IconCheck className=\"size-4 text-emerald-600\" />\n                      )}\n                    </Button>\n                  </ArticlePublishDialog>\n                </TooltipTrigger>\n                <TooltipContent>\n                  {article.published ? \"Unpublish\" : \"Publish\"}\n                </TooltipContent>\n              </Tooltip>\n\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <ArticleDeleteDialog\n                    articleId={article.id}\n                    articleSha={article.sha}\n                  >\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"h-8 w-8 rounded-lg text-destructive hover:bg-destructive/10 hover:text-destructive\"\n                    >\n                      <IconTrash className=\"size-4\" />\n                    </Button>\n                  </ArticleDeleteDialog>\n                </TooltipTrigger>\n                <TooltipContent>Delete article</TooltipContent>\n              </Tooltip>\n            </div>\n          </div>\n        </div>\n      </div>\n    </TooltipProvider>\n  );\n}\n\n// Loading Skeleton\nexport function ArticleCardSkeleton() {\n  return (\n    <div className=\"flex flex-col overflow-hidden rounded-2xl border bg-card\">\n      <div className=\"aspect-video w-full animate-pulse bg-muted\" />\n      <div className=\"p-5 space-y-4\">\n        <div className=\"flex gap-2\">\n          <div className=\"h-5 w-16 animate-pulse rounded-lg bg-muted\" />\n          <div className=\"h-5 w-12 animate-pulse rounded-lg bg-muted\" />\n        </div>\n        <div className=\"space-y-2\">\n          <div className=\"h-6 w-3/4 animate-pulse rounded-lg bg-muted\" />\n          <div className=\"h-4 w-full animate-pulse rounded-lg bg-muted\" />\n        </div>\n        <div className=\"h-4 w-1/3 animate-pulse rounded-lg bg-muted\" />\n        <div className=\"flex justify-between pt-4 border-t\">\n          <div className=\"flex gap-2\">\n            <div className=\"h-8 w-8 animate-pulse rounded-lg bg-muted\" />\n            <div className=\"h-8 w-8 animate-pulse rounded-lg bg-muted\" />\n            <div className=\"h-8 w-8 animate-pulse rounded-lg bg-muted\" />\n          </div>\n          <div className=\"flex gap-2\">\n            <div className=\"h-8 w-8 animate-pulse rounded-lg bg-muted\" />\n            <div className=\"h-8 w-8 animate-pulse rounded-lg bg-muted\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"},"tags":[],"source":null},{"category":"assist/source/organizeImports","severity":"error","description":"The imports and exports are not sorted.","message":[{"elements":[],"content":"The imports and exports are not sorted."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Safe fix: Organize Imports (Biome)"}]]},{"diff":{"dictionary":"\"use client\";\nimport { IconLoader2 } from \"@tabler/icons-react\";\nimport { useRouter } from \"next/navigation\";  AlertDialogTitle,\n  AlertDialogTrigger,\n} from \"@/components/ui/alert-dialog\";\nimport { ARTICLE_ROUTESdeleteArticleAction } from \"../articles.constantsarticles.actions\";\n\ninterface ArticleDeleteDialogProps {\nexport default ArticleDeleteDialog;\n","ops":[{"diffOp":{"equal":{"range":[0,109]}}},{"equalLines":{"line_count":10}},{"diffOp":{"equal":{"range":[109,189]}}},{"diffOp":{"equal":{"range":[189,199]}}},{"diffOp":{"delete":{"range":[199,213]}}},{"diffOp":{"insert":{"range":[213,232]}}},{"diffOp":{"equal":{"range":[232,244]}}},{"diffOp":{"delete":{"range":[244,262]}}},{"diffOp":{"insert":{"range":[262,278]}}},{"diffOp":{"equal":{"range":[278,280]}}},{"diffOp":{"equal":{"range":[189,199]}}},{"diffOp":{"delete":{"range":[213,232]}}},{"diffOp":{"insert":{"range":[199,213]}}},{"diffOp":{"equal":{"range":[232,244]}}},{"diffOp":{"delete":{"range":[262,278]}}},{"diffOp":{"insert":{"range":[244,262]}}},{"diffOp":{"equal":{"range":[278,280]}}},{"diffOp":{"equal":{"range":[280,318]}}},{"equalLines":{"line_count":62}},{"diffOp":{"equal":{"range":[318,355]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\articles\\components\\article-delete-dialog.tsx"},"span":[14,64],"sourceCode":"\"use client\";\nimport { IconLoader2 } from \"@tabler/icons-react\";\nimport { useRouter } from \"next/navigation\";\nimport { type ReactNode, useState, useTransition } from \"react\";\nimport { toast } from \"sonner\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from \"@/components/ui/alert-dialog\";\nimport { ARTICLE_ROUTES } from \"../articles.constants\";\nimport { deleteArticleAction } from \"../articles.actions\";\n\ninterface ArticleDeleteDialogProps {\n  children: ReactNode;\n  articleId: string;\n  articleSha?: string;\n}\n\nconst ArticleDeleteDialog = ({\n  children,\n  articleId,\n  articleSha,\n}: ArticleDeleteDialogProps) => {\n  const router = useRouter();\n  const [open, setOpen] = useState(false);\n  const [isPending, startTransition] = useTransition();\n\n  const handleDelete = () => {\n    if (!articleSha) return;\n\n    startTransition(async () => {\n      try {\n        await deleteArticleAction(articleId, articleSha);\n        toast.success(\"Article deleted\");\n        router.push(ARTICLE_ROUTES.LIST);\n        router.refresh();\n      } catch (error) {\n        const message =\n          error instanceof Error ? error.message : \"Failed to delete article\";\n        toast.error(message);\n        console.error(\"Error deleting article:\", error);\n      } finally {\n        setOpen(false);\n      }\n    });\n  };\n\n  return (\n    <AlertDialog open={open} onOpenChange={setOpen}>\n      <AlertDialogTrigger asChild>{children}</AlertDialogTrigger>\n      <AlertDialogContent className=\"rounded-2xl\">\n        <AlertDialogHeader>\n          <AlertDialogTitle>Delete this article?</AlertDialogTitle>\n          <AlertDialogDescription>\n            This action cannot be undone. The article will be permanently\n            removed.\n          </AlertDialogDescription>\n        </AlertDialogHeader>\n        <AlertDialogFooter className=\"gap-2\">\n          <AlertDialogCancel className=\"rounded-lg\">Cancel</AlertDialogCancel>\n          <AlertDialogAction\n            onClick={handleDelete}\n            disabled={isPending}\n            className=\"rounded-lg bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n          >\n            {isPending ? (\n              <IconLoader2 className=\"mr-2 size-4 animate-spin\" />\n            ) : null}\n            Delete\n          </AlertDialogAction>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n};\n\nexport default ArticleDeleteDialog;\n"},"tags":["fixable"],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"\"use client\";\n\nimport {        </Button>\n\n        \n\n        {mode === \"edit\" && article && (\n          <>\n            <ArticlePublishDialog article={article}>              >\n                <IconTrash className=\"size-3.5\" />\n                <span className=\"hidden sm:inline\">\n                  {ARTICLE_LABELS.DELETE}</span>\n              </Button>\n            </ArticleDeleteDialog>  );\n}\n","ops":[{"diffOp":{"equal":{"range":[0,23]}}},{"equalLines":{"line_count":183}},{"diffOp":{"equal":{"range":[23,50]}}},{"diffOp":{"delete":{"range":[50,60]}}},{"diffOp":{"equal":{"range":[60,158]}}},{"equalLines":{"line_count":31}},{"diffOp":{"equal":{"range":[158,276]}}},{"diffOp":{"insert":{"range":[276,295]}}},{"diffOp":{"equal":{"range":[295,318]}}},{"diffOp":{"insert":{"range":[276,293]}}},{"diffOp":{"equal":{"range":[318,384]}}},{"equalLines":{"line_count":23}},{"diffOp":{"equal":{"range":[384,391]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\articles\\components\\article-editor-header.tsx"},"span":null,"sourceCode":"\"use client\";\n\nimport {\n  IconArrowLeft,\n  IconCheck,\n  IconChevronRight,\n  IconCloud,\n  IconCloudOff,\n  IconDeviceFloppy,\n  IconEye,\n  IconFileText,\n  IconLoader2,\n  IconSettings,\n  IconTrash,\n  IconX,\n} from \"@tabler/icons-react\";\nimport Link from \"next/link\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport {\n  ARTICLE_LABELS,\n  ARTICLE_ROUTES,\n  ARTICLE_STATUS,\n} from \"../articles.constants\";\nimport type { Article } from \"../articles.types\";\nimport ArticleDeleteDialog from \"./article-delete-dialog\";\nimport { ArticlePublishDialog } from \"./article-publish-dialog\";\n\ninterface ArticleEditorHeaderProps {\n  readonly title: string;\n  readonly id?: string;\n  readonly mode: \"create\" | \"edit\";\n  readonly article?: Article;\n  readonly isSaving: boolean;\n  readonly hasUnsavedChanges: boolean;\n  readonly sidebarCollapsed: boolean;\n  readonly onSave: () => void;\n  readonly onToggleSidebar: () => void;\n}\n\nexport function ArticleEditorHeader({\n  title,\n  mode,\n  article,\n  isSaving,\n  hasUnsavedChanges,\n  sidebarCollapsed,\n  onSave,\n  onToggleSidebar,\n}: ArticleEditorHeaderProps) {\n  return (\n    <header className=\"flex h-14 shrink-0 items-center justify-between border-b bg-background/95 px-4 backdrop-blur supports-backdrop-filter:bg-background/60\">\n      {/* Left: Back & Breadcrumbs */}\n      <div className=\"flex items-center gap-3\">\n        <Tooltip>\n          <TooltipTrigger asChild>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"size-8 rounded-lg\"\n              asChild\n            >\n              <Link href={ARTICLE_ROUTES.LIST}>\n                <IconArrowLeft className=\"size-4\" />\n              </Link>\n            </Button>\n          </TooltipTrigger>\n          <TooltipContent side=\"bottom\">\n            {ARTICLE_LABELS.BACK_TO_ARTICLES}\n          </TooltipContent>\n        </Tooltip>\n\n        <Separator orientation=\"vertical\" className=\"h-5\" />\n\n        <nav className=\"flex items-center gap-1.5 text-sm\">\n          <Link\n            href={ARTICLE_ROUTES.LIST}\n            className=\"text-muted-foreground transition-colors hover:text-foreground\"\n          >\n            Articles\n          </Link>\n          <IconChevronRight className=\"size-3.5 text-muted-foreground/50\" />\n          <span className=\"max-w-50 truncate font-medium\">\n            {title || \"Untitled\"}\n          </span>\n        </nav>\n\n        {/* Status Indicator */}\n        <div className=\"ml-3 flex items-center gap-2\">\n          {article?.published ? (\n            <Badge\n              variant=\"secondary\"\n              className=\"h-5 gap-1 rounded-full bg-emerald-500/10 px-2 text-[10px] font-medium text-emerald-600 dark:text-emerald-400\"\n            >\n              <IconCheck className=\"size-3\" />\n              {ARTICLE_STATUS.PUBLISHED}\n            </Badge>\n          ) : (\n            <Badge\n              variant=\"secondary\"\n              className=\"h-5 gap-1 rounded-full bg-amber-500/10 px-2 text-[10px] font-medium text-amber-600 dark:text-amber-400\"\n            >\n              <IconFileText className=\"size-3\" />\n              {ARTICLE_STATUS.DRAFT}\n            </Badge>\n          )}\n\n          {hasUnsavedChanges && (\n            <span className=\"flex items-center gap-1 text-xs text-muted-foreground\">\n              <IconCloudOff className=\"size-3\" />\n              {ARTICLE_STATUS.UNSAVED}\n            </span>\n          )}\n          {!hasUnsavedChanges && mode === \"edit\" && (\n            <span className=\"flex items-center gap-1 text-xs text-muted-foreground\">\n              <IconCloud className=\"size-3\" />\n              {ARTICLE_STATUS.SAVED}\n            </span>\n          )}\n        </div>\n      </div>\n\n      {/* Right: Actions */}\n      <div className=\"flex items-center gap-2\">\n        {mode === \"edit\" && (\n          <Tooltip>\n            <TooltipTrigger asChild>\n              {article?.id ? (\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"h-8 gap-1.5 rounded-lg text-muted-foreground\"\n                  asChild\n                >\n                  <a\n                    href={ARTICLE_ROUTES.PREVIEW(article.id)}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    <IconEye className=\"size-3.5\" />\n                    <span className=\"hidden sm:inline\">\n                      {ARTICLE_LABELS.PREVIEW}\n                    </span>\n                  </a>\n                </Button>\n              ) : (\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  disabled\n                  className=\"h-8 gap-1.5 rounded-lg text-muted-foreground\"\n                >\n                  <IconEye className=\"size-3.5\" />\n                  <span className=\"hidden sm:inline\">\n                    {ARTICLE_LABELS.PREVIEW}\n                  </span>\n                </Button>\n              )}\n            </TooltipTrigger>\n            <TooltipContent side=\"bottom\">\n              {article?.id\n                ? ARTICLE_LABELS.PREVIEW_ARTICLE\n                : \"Save article first to preview\"}\n            </TooltipContent>\n          </Tooltip>\n        )}\n\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={onSave}\n          disabled={isSaving || !title}\n          className=\"h-8 gap-1.5 rounded-lg\"\n        >\n          {isSaving ? (\n            <IconLoader2 className=\"size-3.5 animate-spin\" />\n          ) : (\n            <IconDeviceFloppy className=\"size-3.5\" />\n          )}\n          <span className=\"hidden sm:inline\">{ARTICLE_LABELS.SAVE}</span>\n        </Button>\n\n        \n\n        {mode === \"edit\" && article && (\n          <>\n            <ArticlePublishDialog article={article}>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                className=\"h-8 gap-1.5 rounded-lg\"\n              >\n                {article.published ? (\n                  <>\n                    <IconX className=\"size-3.5\" />\n                    <span className=\"hidden sm:inline\">\n                      {ARTICLE_LABELS.UNPUBLISH}\n                    </span>\n                  </>\n                ) : (\n                  <>\n                    <IconCheck className=\"size-3.5\" />\n                    <span className=\"hidden sm:inline\">\n                      {ARTICLE_LABELS.PUBLISH}\n                    </span>\n                  </>\n                )}\n              </Button>\n            </ArticlePublishDialog>\n\n            <ArticleDeleteDialog\n              articleSha={article.sha}\n              articleId={article.id}\n            >\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                className=\"h-8 gap-1.5 rounded-lg text-destructive hover:text-destructive\"\n              >\n                <IconTrash className=\"size-3.5\" />\n                <span className=\"hidden sm:inline\">{ARTICLE_LABELS.DELETE}</span>\n              </Button>\n            </ArticleDeleteDialog>\n          </>\n        )}\n\n        {/* Settings sidebar toggle */}\n        <Tooltip>\n          <TooltipTrigger asChild>\n            <Button\n              variant={sidebarCollapsed ? \"secondary\" : \"ghost\"}\n              size=\"icon\"\n              className=\"size-8 rounded-lg\"\n              onClick={onToggleSidebar}\n            >\n              <IconSettings className=\"size-4\" />\n            </Button>\n          </TooltipTrigger>\n          <TooltipContent side=\"bottom\">\n            {sidebarCollapsed\n              ? ARTICLE_LABELS.SHOW_SETTINGS\n              : ARTICLE_LABELS.HIDE_SETTINGS}\n          </TooltipContent>\n        </Tooltip>\n      </div>\n    </header>\n  );\n}\n"},"tags":[],"source":null},{"category":"assist/source/organizeImports","severity":"error","description":"The imports and exports are not sorted.","message":[{"elements":[],"content":"The imports and exports are not sorted."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Safe fix: Organize Imports (Biome)"}]]},{"diff":{"dictionary":"\"use client\";\n\nimport type { MDXEditorMethods } from \"@mdxeditor/editor\";\nimport { useRouterRoute } from \"next/navigation\";useCallback, useRef, useState, useTransitionreactnext/navigationtoastuseRef, useState, useTransition } from \"sonnertype { MediaFile@/features/medias/medias.typesImageInsertDialog..features/medias/componentsimage-insert-dialogmedias.typesuploadImageAction } from \"../../medias/medias.actionscomponents/image-insert-dialogcreateArticleAction,updateArticleAction } from \"../articles.actions../medias/medias.actionsARTICLE_MESSAGES, ARTICLE_ROUTESarticles.constantsArticleCreateArticleInputarticles.typesgetContentStatsArticle, CreateArticleInputarticles.utilsArticleEditorHeaderarticle-editor-headerArticleEditorSettingsSidebar } from \"./article-editor-settings-sidebarheaderForwardRefEditorforward-refeditorsidebar./forward-ref-editor\n\ninterface ArticleEditorLayoutProps {  );\n}\n","ops":[{"diffOp":{"equal":{"range":[0,73]}}},{"diffOp":{"equal":{"range":[73,83]}}},{"diffOp":{"delete":{"range":[83,92]}}},{"diffOp":{"insert":{"range":[92,97]}}},{"diffOp":{"equal":{"range":[97,110]}}},{"diffOp":{"delete":{"range":[110,121]}}},{"diffOp":{"equal":{"range":[121,123]}}},{"diffOp":{"equal":{"range":[73,83]}}},{"diffOp":{"delete":{"range":[123,167]}}},{"diffOp":{"insert":{"range":[83,92]}}},{"diffOp":{"equal":{"range":[97,106]}}},{"diffOp":{"delete":{"range":[167,172]}}},{"diffOp":{"insert":{"range":[172,187]}}},{"diffOp":{"equal":{"range":[121,123]}}},{"diffOp":{"equal":{"range":[73,83]}}},{"diffOp":{"delete":{"range":[187,192]}}},{"diffOp":{"insert":{"range":[123,135]}}},{"diffOp":{"equal":{"range":[97,98]}}},{"diffOp":{"insert":{"range":[192,224]}}},{"diffOp":{"equal":{"range":[224,232]}}},{"diffOp":{"delete":{"range":[232,238]}}},{"diffOp":{"insert":{"range":[167,172]}}},{"diffOp":{"equal":{"range":[121,123]}}},{"diffOp":{"equal":{"range":[73,81]}}},{"diffOp":{"delete":{"range":[238,243]}}},{"diffOp":{"equal":{"range":[243,245]}}},{"diffOp":{"delete":{"range":[245,254]}}},{"diffOp":{"insert":{"range":[187,192]}}},{"diffOp":{"equal":{"range":[97,106]}}},{"diffOp":{"delete":{"range":[254,284]}}},{"diffOp":{"insert":{"range":[232,238]}}},{"diffOp":{"equal":{"range":[121,123]}}},{"diffOp":{"equal":{"range":[73,81]}}},{"diffOp":{"insert":{"range":[238,243]}}},{"diffOp":{"equal":{"range":[243,245]}}},{"diffOp":{"delete":{"range":[284,301]}}},{"diffOp":{"insert":{"range":[245,254]}}},{"diffOp":{"equal":{"range":[97,106]}}},{"diffOp":{"delete":{"range":[301,303]}}},{"diffOp":{"insert":{"range":[254,255]}}},{"diffOp":{"equal":{"range":[110,111]}}},{"diffOp":{"delete":{"range":[301,303]}}},{"diffOp":{"insert":{"range":[303,311]}}},{"diffOp":{"equal":{"range":[311,318]}}},{"diffOp":{"delete":{"range":[318,329]}}},{"diffOp":{"equal":{"range":[110,111]}}},{"diffOp":{"delete":{"range":[329,348]}}},{"diffOp":{"insert":{"range":[348,360]}}},{"diffOp":{"equal":{"range":[121,123]}}},{"diffOp":{"equal":{"range":[73,83]}}},{"diffOp":{"delete":{"range":[360,377]}}},{"diffOp":{"insert":{"range":[284,301]}}},{"diffOp":{"equal":{"range":[377,399]}}},{"diffOp":{"delete":{"range":[399,413]}}},{"diffOp":{"insert":{"range":[413,443]}}},{"diffOp":{"equal":{"range":[121,123]}}},{"diffOp":{"equal":{"range":[73,83]}}},{"diffOp":{"delete":{"range":[443,463]}}},{"diffOp":{"insert":{"range":[360,377]}}},{"diffOp":{"equal":{"range":[97,98]}}},{"diffOp":{"delete":{"range":[463,483]}}},{"diffOp":{"equal":{"range":[483,494]}}},{"diffOp":{"delete":{"range":[494,510]}}},{"diffOp":{"insert":{"range":[510,534]}}},{"diffOp":{"equal":{"range":[121,123]}}},{"diffOp":{"equal":{"range":[73,83]}}},{"diffOp":{"delete":{"range":[534,550]}}},{"diffOp":{"insert":{"range":[443,462]}}},{"diffOp":{"equal":{"range":[550,552]}}},{"diffOp":{"delete":{"range":[552,566]}}},{"diffOp":{"insert":{"range":[463,482]}}},{"diffOp":{"equal":{"range":[377,389]}}},{"diffOp":{"delete":{"range":[566,584]}}},{"diffOp":{"insert":{"range":[494,510]}}},{"diffOp":{"equal":{"range":[121,123]}}},{"diffOp":{"equal":{"range":[73,81]}}},{"diffOp":{"delete":{"range":[238,243]}}},{"diffOp":{"equal":{"range":[243,245]}}},{"diffOp":{"delete":{"range":[584,591]}}},{"diffOp":{"insert":{"range":[534,550]}}},{"diffOp":{"equal":{"range":[550,552]}}},{"diffOp":{"delete":{"range":[591,609]}}},{"diffOp":{"insert":{"range":[552,566]}}},{"diffOp":{"equal":{"range":[377,389]}}},{"diffOp":{"delete":{"range":[609,623]}}},{"diffOp":{"insert":{"range":[566,584]}}},{"diffOp":{"equal":{"range":[121,123]}}},{"diffOp":{"equal":{"range":[73,81]}}},{"diffOp":{"insert":{"range":[238,243]}}},{"diffOp":{"equal":{"range":[243,245]}}},{"diffOp":{"delete":{"range":[623,638]}}},{"diffOp":{"insert":{"range":[638,665]}}},{"diffOp":{"equal":{"range":[377,389]}}},{"diffOp":{"delete":{"range":[665,679]}}},{"diffOp":{"insert":{"range":[609,623]}}},{"diffOp":{"equal":{"range":[121,123]}}},{"diffOp":{"equal":{"range":[73,83]}}},{"diffOp":{"delete":{"range":[679,698]}}},{"diffOp":{"insert":{"range":[623,638]}}},{"diffOp":{"equal":{"range":[377,387]}}},{"diffOp":{"insert":{"range":[510,511]}}},{"diffOp":{"equal":{"range":[110,111]}}},{"diffOp":{"delete":{"range":[698,719]}}},{"diffOp":{"insert":{"range":[665,679]}}},{"diffOp":{"equal":{"range":[121,123]}}},{"diffOp":{"equal":{"range":[73,83]}}},{"diffOp":{"delete":{"range":[719,747]}}},{"diffOp":{"insert":{"range":[679,698]}}},{"diffOp":{"equal":{"range":[747,773]}}},{"diffOp":{"delete":{"range":[773,789]}}},{"diffOp":{"insert":{"range":[789,795]}}},{"diffOp":{"equal":{"range":[121,123]}}},{"diffOp":{"equal":{"range":[73,83]}}},{"diffOp":{"delete":{"range":[795,811]}}},{"diffOp":{"insert":{"range":[719,747]}}},{"diffOp":{"equal":{"range":[747,758]}}},{"diffOp":{"delete":{"range":[811,818]}}},{"diffOp":{"insert":{"range":[698,712]}}},{"diffOp":{"equal":{"range":[818,819]}}},{"diffOp":{"delete":{"range":[819,822]}}},{"diffOp":{"insert":{"range":[773,781]}}},{"diffOp":{"equal":{"range":[818,819]}}},{"diffOp":{"delete":{"range":[822,828]}}},{"diffOp":{"insert":{"range":[828,835]}}},{"diffOp":{"equal":{"range":[121,123]}}},{"diffOp":{"equal":{"range":[73,83]}}},{"diffOp":{"delete":{"range":[92,97]}}},{"diffOp":{"insert":{"range":[795,811]}}},{"diffOp":{"equal":{"range":[97,106]}}},{"diffOp":{"delete":{"range":[172,176]}}},{"diffOp":{"insert":{"range":[835,855]}}},{"diffOp":{"equal":{"range":[121,123]}}},{"diffOp":{"equal":{"range":[855,893]}}},{"equalLines":{"line_count":225}},{"diffOp":{"equal":{"range":[893,900]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\articles\\components\\article-editor.tsx"},"span":[15,73],"sourceCode":"\"use client\";\n\nimport type { MDXEditorMethods } from \"@mdxeditor/editor\";\nimport { useRouter } from \"next/navigation\";\nimport { useCallback, useRef, useState, useTransition } from \"react\";\nimport { toast } from \"sonner\";\nimport type { MediaFile } from \"@/features/medias/medias.types\";\nimport { ImageInsertDialog } from \"../../medias/components/image-insert-dialog\";\nimport { uploadImageAction } from \"../../medias/medias.actions\";\nimport { createArticleAction, updateArticleAction } from \"../articles.actions\";\nimport { ARTICLE_MESSAGES, ARTICLE_ROUTES } from \"../articles.constants\";\nimport type { Article, CreateArticleInput } from \"../articles.types\";\nimport { getContentStats } from \"../articles.utils\";\nimport { ArticleEditorHeader } from \"./article-editor-header\";\nimport { ArticleEditorSettingsSidebar } from \"./article-editor-settings-sidebar\";\nimport { ForwardRefEditor } from \"./forward-ref-editor\";\nimport { Route } from \"next\";\n\ninterface ArticleEditorLayoutProps {\n  article?: Article;\n  mode: \"create\" | \"edit\";\n}\n\ninterface EditorUIState {\n  imageInsertDialogOpen: boolean;\n  hasUnsavedChanges: boolean;\n  sidebarCollapsed: boolean;\n}\n\nexport function ArticleEditor({ article, mode }: ArticleEditorLayoutProps) {\n  const router = useRouter();\n  const editorRef = useRef<MDXEditorMethods>(null);\n  const [isPending, startTransition] = useTransition();\n\n  const [title, setTitle] = useState(article?.title ?? \"\");\n  const [lang, setLang] = useState<\"fr\" | \"en\">(article?.lang ?? \"en\");\n  const [description, setDescription] = useState(article?.description ?? \"\");\n  const [tags, setTags] = useState<string[]>(article?.tags ?? []);\n  const [tagInput, setTagInput] = useState(\"\");\n  const [coverImage, setCoverImage] = useState(article?.coverImage ?? \"\");\n\n  const [uiState, setUiState] = useState<EditorUIState>({\n    imageInsertDialogOpen: false,\n    hasUnsavedChanges: false,\n    sidebarCollapsed: false,\n  });\n\n  const handleTitleChange = (value: string) => {\n    setTitle(value);\n    setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }));\n  };\n\n  const addTag = () => {\n    const trimmedTag = tagInput.trim();\n    if (trimmedTag && !tags.includes(trimmedTag)) {\n      setTags([...tags, trimmedTag]);\n      setTagInput(\"\");\n      setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }));\n    }\n  };\n\n  const removeTag = (tagToRemove: string) => {\n    setTags(tags.filter((tag) => tag !== tagToRemove));\n    setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }));\n  };\n\n  // Image upload handler for MDXEditor\n  const handleImageUpload = useCallback(async (file: File): Promise<string> => {\n    const result = await uploadImageAction(file);\n    if (!result.success) {\n      throw new Error(result.error);\n    }\n    return result.data.url;\n  }, []);\n\n  const handleImageInsert = (image: MediaFile) => {\n    if (editorRef.current) {\n      editorRef.current.insertMarkdown(`![image](${image.url})`);\n    }\n    setUiState((prev) => ({ ...prev, imageInsertDialogOpen: false }));\n  };\n\n  const handleSave = () => {\n    // Client-side validation\n    if (!coverImage.trim()) {\n      toast.warning(\"Please add a cover image before saving\", {\n        description: \"Cover image is required for articles\",\n      });\n      return;\n    }\n\n    startTransition(async () => {\n      try {\n        const content = editorRef.current?.getMarkdown() ?? \"\";\n        const input: CreateArticleInput = {\n          title,\n          lang,\n          content,\n          description,\n          tags,\n          coverImage,\n          published: article?.published ?? false,\n        };\n\n        let result: Awaited<ReturnType<typeof createArticleAction>>;\n        if (mode === \"create\") {\n          result = await createArticleAction(input);\n        } else if (article?.sha) {\n          result = await updateArticleAction(article.id, {\n            ...input,\n            sha: article.sha,\n          });\n        } else {\n          throw new Error(\"Failed to save article\");\n        }\n\n        if (!result.success) {\n          throw new Error(result.error);\n        }\n\n        setUiState((prev) => ({ ...prev, hasUnsavedChanges: false }));\n        toast.success(ARTICLE_MESSAGES.SAVE_SUCCESS, {\n          description: ARTICLE_MESSAGES.SAVE_SUCCESS_DESC,\n        });\n\n        // Redirect to edit page if new article was created\n        if (mode === \"create\") {\n          router.push(ARTICLE_ROUTES.EDIT(result.data) as Route);\n          router.refresh();\n        }\n      } catch (error) {\n        const message =\n          error instanceof Error ? error.message : ARTICLE_MESSAGES.SAVE_ERROR;\n        toast.error(message);\n        console.error(\"Error saving article:\", error);\n      }\n    });\n  };;\n\n  // Content stats - computed on each render (refs don't trigger re-renders)\n  const content = editorRef.current?.getMarkdown() ?? \"\";\n  const { wordCount, readTime } = getContentStats(content);\n\n  return (\n    <div className=\"flex h-screen flex-col overflow-hidden bg-background\">\n      {/* Top Navigation Bar */}\n      <ArticleEditorHeader\n        title={title}\n        id={article?.id}\n        mode={mode}\n        article={article}\n        isSaving={isPending}\n        hasUnsavedChanges={uiState.hasUnsavedChanges}\n        sidebarCollapsed={uiState.sidebarCollapsed}\n        onSave={handleSave}\n        onToggleSidebar={() =>\n          setUiState((prev) => ({\n            ...prev,\n            sidebarCollapsed: !prev.sidebarCollapsed,\n          }))\n        }\n      />\n\n      {/* Main Content Area */}\n      <div className=\"flex flex-1 overflow-hidden\">\n        {/* Editor Panel - Takes remaining space */}\n        <div className=\"flex flex-1 flex-col overflow-hidden\">\n          {/* Title Input - Clean, prominent */}\n          <div className=\"shrink-0 border-b bg-linear-to-b from-muted/30 to-transparent px-8 py-6\">\n            <input\n              type=\"text\"\n              placeholder=\"Article title...\"\n              value={title}\n              onChange={(e) => handleTitleChange(e.target.value)}\n              className=\"w-full bg-transparent text-3xl font-bold tracking-tight outline-none placeholder:text-muted-foreground/40\"\n            />\n            <div className=\"mt-2 flex items-center gap-4 text-xs text-muted-foreground\">\n              <span>{wordCount} words</span>\n              <span>•</span>\n              <span>{readTime} min read</span>\n              {article?.createdAt && (\n                <>\n                  <span>•</span>\n                  <span>\n                    Created {new Date(article.createdAt).toLocaleDateString()}\n                  </span>\n                </>\n              )}\n            </div>\n          </div>\n\n          {/* MDX Editor - Full Height with sticky toolbar */}\n          <div className=\"flex flex-1 flex-col min-h-0 overflow-hidden\">\n            <ForwardRefEditor\n              ref={editorRef}\n              markdown={article?.content ?? \"\"}\n              onImageUpload={handleImageUpload}\n              onImageInsertClick={() =>\n                setUiState((prev) => ({ ...prev, imageInsertDialogOpen: true }))\n              }\n              onChange={() =>\n                setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }))\n              }\n            />\n          </div>\n        </div>\n\n        {/* Right Sidebar - Metadata Panel */}\n        <ArticleEditorSettingsSidebar\n          lang={lang}\n          description={description}\n          tags={tags}\n          tagInput={tagInput}\n          coverImage={coverImage}\n          collapsed={uiState.sidebarCollapsed}\n          onLangChange={(value) => {\n            setLang(value);\n            setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }));\n          }}\n          onDescriptionChange={(value) => {\n            setDescription(value);\n            setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }));\n          }}\n          onTagInputChange={setTagInput}\n          onAddTag={addTag}\n          onRemoveTag={removeTag}\n          onCoverImageChange={(url) => {\n            setCoverImage(url);\n            setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }));\n          }}\n          onCollapse={() =>\n            setUiState((prev) => ({ ...prev, sidebarCollapsed: true }))\n          }\n        />\n      </div>\n\n      <ImageInsertDialog\n        open={uiState.imageInsertDialogOpen}\n        onClose={() =>\n          setUiState((prev) => ({ ...prev, imageInsertDialogOpen: false }))\n        }\n        onSelect={handleImageInsert}\n      />\n    </div>\n  );\n}\n"},"tags":["fixable"],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"\"use client\";\n\nimport type { MDXEditorMethods } from \"@mdxeditor/editor\";      }\n    });\n  };;\n\n  // Content stats - computed on each render (refs don't trigger re-renders)  );\n}\n","ops":[{"diffOp":{"equal":{"range":[0,73]}}},{"equalLines":{"line_count":132}},{"diffOp":{"equal":{"range":[73,93]}}},{"diffOp":{"delete":{"range":[93,94]}}},{"diffOp":{"equal":{"range":[94,172]}}},{"equalLines":{"line_count":104}},{"diffOp":{"equal":{"range":[172,179]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\articles\\components\\article-editor.tsx"},"span":null,"sourceCode":"\"use client\";\n\nimport type { MDXEditorMethods } from \"@mdxeditor/editor\";\nimport { useRouter } from \"next/navigation\";\nimport { useCallback, useRef, useState, useTransition } from \"react\";\nimport { toast } from \"sonner\";\nimport type { MediaFile } from \"@/features/medias/medias.types\";\nimport { ImageInsertDialog } from \"../../medias/components/image-insert-dialog\";\nimport { uploadImageAction } from \"../../medias/medias.actions\";\nimport { createArticleAction, updateArticleAction } from \"../articles.actions\";\nimport { ARTICLE_MESSAGES, ARTICLE_ROUTES } from \"../articles.constants\";\nimport type { Article, CreateArticleInput } from \"../articles.types\";\nimport { getContentStats } from \"../articles.utils\";\nimport { ArticleEditorHeader } from \"./article-editor-header\";\nimport { ArticleEditorSettingsSidebar } from \"./article-editor-settings-sidebar\";\nimport { ForwardRefEditor } from \"./forward-ref-editor\";\nimport { Route } from \"next\";\n\ninterface ArticleEditorLayoutProps {\n  article?: Article;\n  mode: \"create\" | \"edit\";\n}\n\ninterface EditorUIState {\n  imageInsertDialogOpen: boolean;\n  hasUnsavedChanges: boolean;\n  sidebarCollapsed: boolean;\n}\n\nexport function ArticleEditor({ article, mode }: ArticleEditorLayoutProps) {\n  const router = useRouter();\n  const editorRef = useRef<MDXEditorMethods>(null);\n  const [isPending, startTransition] = useTransition();\n\n  const [title, setTitle] = useState(article?.title ?? \"\");\n  const [lang, setLang] = useState<\"fr\" | \"en\">(article?.lang ?? \"en\");\n  const [description, setDescription] = useState(article?.description ?? \"\");\n  const [tags, setTags] = useState<string[]>(article?.tags ?? []);\n  const [tagInput, setTagInput] = useState(\"\");\n  const [coverImage, setCoverImage] = useState(article?.coverImage ?? \"\");\n\n  const [uiState, setUiState] = useState<EditorUIState>({\n    imageInsertDialogOpen: false,\n    hasUnsavedChanges: false,\n    sidebarCollapsed: false,\n  });\n\n  const handleTitleChange = (value: string) => {\n    setTitle(value);\n    setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }));\n  };\n\n  const addTag = () => {\n    const trimmedTag = tagInput.trim();\n    if (trimmedTag && !tags.includes(trimmedTag)) {\n      setTags([...tags, trimmedTag]);\n      setTagInput(\"\");\n      setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }));\n    }\n  };\n\n  const removeTag = (tagToRemove: string) => {\n    setTags(tags.filter((tag) => tag !== tagToRemove));\n    setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }));\n  };\n\n  // Image upload handler for MDXEditor\n  const handleImageUpload = useCallback(async (file: File): Promise<string> => {\n    const result = await uploadImageAction(file);\n    if (!result.success) {\n      throw new Error(result.error);\n    }\n    return result.data.url;\n  }, []);\n\n  const handleImageInsert = (image: MediaFile) => {\n    if (editorRef.current) {\n      editorRef.current.insertMarkdown(`![image](${image.url})`);\n    }\n    setUiState((prev) => ({ ...prev, imageInsertDialogOpen: false }));\n  };\n\n  const handleSave = () => {\n    // Client-side validation\n    if (!coverImage.trim()) {\n      toast.warning(\"Please add a cover image before saving\", {\n        description: \"Cover image is required for articles\",\n      });\n      return;\n    }\n\n    startTransition(async () => {\n      try {\n        const content = editorRef.current?.getMarkdown() ?? \"\";\n        const input: CreateArticleInput = {\n          title,\n          lang,\n          content,\n          description,\n          tags,\n          coverImage,\n          published: article?.published ?? false,\n        };\n\n        let result: Awaited<ReturnType<typeof createArticleAction>>;\n        if (mode === \"create\") {\n          result = await createArticleAction(input);\n        } else if (article?.sha) {\n          result = await updateArticleAction(article.id, {\n            ...input,\n            sha: article.sha,\n          });\n        } else {\n          throw new Error(\"Failed to save article\");\n        }\n\n        if (!result.success) {\n          throw new Error(result.error);\n        }\n\n        setUiState((prev) => ({ ...prev, hasUnsavedChanges: false }));\n        toast.success(ARTICLE_MESSAGES.SAVE_SUCCESS, {\n          description: ARTICLE_MESSAGES.SAVE_SUCCESS_DESC,\n        });\n\n        // Redirect to edit page if new article was created\n        if (mode === \"create\") {\n          router.push(ARTICLE_ROUTES.EDIT(result.data) as Route);\n          router.refresh();\n        }\n      } catch (error) {\n        const message =\n          error instanceof Error ? error.message : ARTICLE_MESSAGES.SAVE_ERROR;\n        toast.error(message);\n        console.error(\"Error saving article:\", error);\n      }\n    });\n  };;\n\n  // Content stats - computed on each render (refs don't trigger re-renders)\n  const content = editorRef.current?.getMarkdown() ?? \"\";\n  const { wordCount, readTime } = getContentStats(content);\n\n  return (\n    <div className=\"flex h-screen flex-col overflow-hidden bg-background\">\n      {/* Top Navigation Bar */}\n      <ArticleEditorHeader\n        title={title}\n        id={article?.id}\n        mode={mode}\n        article={article}\n        isSaving={isPending}\n        hasUnsavedChanges={uiState.hasUnsavedChanges}\n        sidebarCollapsed={uiState.sidebarCollapsed}\n        onSave={handleSave}\n        onToggleSidebar={() =>\n          setUiState((prev) => ({\n            ...prev,\n            sidebarCollapsed: !prev.sidebarCollapsed,\n          }))\n        }\n      />\n\n      {/* Main Content Area */}\n      <div className=\"flex flex-1 overflow-hidden\">\n        {/* Editor Panel - Takes remaining space */}\n        <div className=\"flex flex-1 flex-col overflow-hidden\">\n          {/* Title Input - Clean, prominent */}\n          <div className=\"shrink-0 border-b bg-linear-to-b from-muted/30 to-transparent px-8 py-6\">\n            <input\n              type=\"text\"\n              placeholder=\"Article title...\"\n              value={title}\n              onChange={(e) => handleTitleChange(e.target.value)}\n              className=\"w-full bg-transparent text-3xl font-bold tracking-tight outline-none placeholder:text-muted-foreground/40\"\n            />\n            <div className=\"mt-2 flex items-center gap-4 text-xs text-muted-foreground\">\n              <span>{wordCount} words</span>\n              <span>•</span>\n              <span>{readTime} min read</span>\n              {article?.createdAt && (\n                <>\n                  <span>•</span>\n                  <span>\n                    Created {new Date(article.createdAt).toLocaleDateString()}\n                  </span>\n                </>\n              )}\n            </div>\n          </div>\n\n          {/* MDX Editor - Full Height with sticky toolbar */}\n          <div className=\"flex flex-1 flex-col min-h-0 overflow-hidden\">\n            <ForwardRefEditor\n              ref={editorRef}\n              markdown={article?.content ?? \"\"}\n              onImageUpload={handleImageUpload}\n              onImageInsertClick={() =>\n                setUiState((prev) => ({ ...prev, imageInsertDialogOpen: true }))\n              }\n              onChange={() =>\n                setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }))\n              }\n            />\n          </div>\n        </div>\n\n        {/* Right Sidebar - Metadata Panel */}\n        <ArticleEditorSettingsSidebar\n          lang={lang}\n          description={description}\n          tags={tags}\n          tagInput={tagInput}\n          coverImage={coverImage}\n          collapsed={uiState.sidebarCollapsed}\n          onLangChange={(value) => {\n            setLang(value);\n            setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }));\n          }}\n          onDescriptionChange={(value) => {\n            setDescription(value);\n            setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }));\n          }}\n          onTagInputChange={setTagInput}\n          onAddTag={addTag}\n          onRemoveTag={removeTag}\n          onCoverImageChange={(url) => {\n            setCoverImage(url);\n            setUiState((prev) => ({ ...prev, hasUnsavedChanges: true }));\n          }}\n          onCollapse={() =>\n            setUiState((prev) => ({ ...prev, sidebarCollapsed: true }))\n          }\n        />\n      </div>\n\n      <ImageInsertDialog\n        open={uiState.imageInsertDialogOpen}\n        onClose={() =>\n          setUiState((prev) => ({ ...prev, imageInsertDialogOpen: false }))\n        }\n        onSelect={handleImageInsert}\n      />\n    </div>\n  );\n}\n"},"tags":[],"source":null},{"category":"assist/source/organizeImports","severity":"error","description":"The imports and exports are not sorted.","message":[{"elements":[],"content":"The imports and exports are not sorted."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Safe fix: Organize Imports (Biome)"}]]},{"diff":{"dictionary":"import { IconFileText, IconSearchOff } from \"@tabler/icons-react\";\nimport type { EmptyStateSearchParams } from \"@nuqs/components/ui/empty-stateserver\";Article } from \"@/featuresarticlesuiarticles.typesempty-stateArticleCard } from \"@/features/articles/components/article-cardArticleSearchBarArticleCard } from \".@/features/articles/components/article-search-barcard\nimport { articlesSearchParamsCache } from \"../articles.search-params\";type { SearchParams } from \"article-search-bar\n\ninterface ArticlesListProps {  );\n}\n","ops":[{"diffOp":{"equal":{"range":[0,66]}}},{"diffOp":{"equal":{"range":[66,74]}}},{"diffOp":{"insert":{"range":[74,79]}}},{"diffOp":{"equal":{"range":[79,81]}}},{"diffOp":{"delete":{"range":[81,91]}}},{"diffOp":{"insert":{"range":[91,103]}}},{"diffOp":{"equal":{"range":[103,112]}}},{"diffOp":{"delete":{"range":[112,113]}}},{"diffOp":{"insert":{"range":[113,117]}}},{"diffOp":{"equal":{"range":[117,118]}}},{"diffOp":{"delete":{"range":[118,143]}}},{"diffOp":{"insert":{"range":[143,149]}}},{"diffOp":{"equal":{"range":[149,151]}}},{"diffOp":{"equal":{"range":[66,74]}}},{"diffOp":{"delete":{"range":[74,79]}}},{"diffOp":{"equal":{"range":[79,81]}}},{"diffOp":{"delete":{"range":[151,158]}}},{"diffOp":{"insert":{"range":[81,91]}}},{"diffOp":{"equal":{"range":[158,169]}}},{"diffOp":{"delete":{"range":[169,177]}}},{"diffOp":{"insert":{"range":[118,128]}}},{"diffOp":{"equal":{"range":[117,118]}}},{"diffOp":{"delete":{"range":[177,185]}}},{"diffOp":{"insert":{"range":[185,187]}}},{"diffOp":{"equal":{"range":[117,118]}}},{"diffOp":{"delete":{"range":[187,201]}}},{"diffOp":{"insert":{"range":[201,212]}}},{"diffOp":{"equal":{"range":[149,151]}}},{"diffOp":{"equal":{"range":[66,74]}}},{"diffOp":{"insert":{"range":[74,79]}}},{"diffOp":{"equal":{"range":[79,81]}}},{"diffOp":{"delete":{"range":[212,223]}}},{"diffOp":{"insert":{"range":[212,219]}}},{"diffOp":{"equal":{"range":[223,252]}}},{"diffOp":{"delete":{"range":[252,275]}}},{"diffOp":{"insert":{"range":[187,201]}}},{"diffOp":{"equal":{"range":[149,151]}}},{"diffOp":{"equal":{"range":[66,74]}}},{"diffOp":{"delete":{"range":[275,291]}}},{"diffOp":{"insert":{"range":[79,80]}}},{"diffOp":{"equal":{"range":[223,224]}}},{"diffOp":{"insert":{"range":[291,305]}}},{"diffOp":{"equal":{"range":[305,311]}}},{"diffOp":{"delete":{"range":[311,312]}}},{"diffOp":{"insert":{"range":[312,342]}}},{"diffOp":{"equal":{"range":[342,351]}}},{"diffOp":{"delete":{"range":[351,361]}}},{"diffOp":{"insert":{"range":[361,365]}}},{"diffOp":{"equal":{"range":[149,151]}}},{"diffOp":{"equal":{"range":[365,436]}}},{"diffOp":{"equal":{"range":[365,373]}}},{"diffOp":{"delete":{"range":[436,457]}}},{"diffOp":{"insert":{"range":[275,291]}}},{"diffOp":{"equal":{"range":[457,464]}}},{"diffOp":{"delete":{"range":[113,117]}}},{"diffOp":{"insert":{"range":[311,312]}}},{"diffOp":{"equal":{"range":[342,343]}}},{"diffOp":{"delete":{"range":[143,149]}}},{"diffOp":{"insert":{"range":[464,482]}}},{"diffOp":{"equal":{"range":[149,151]}}},{"diffOp":{"equal":{"range":[482,513]}}},{"equalLines":{"line_count":56}},{"diffOp":{"equal":{"range":[513,520]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\articles\\components\\articles-list.tsx"},"span":[0,66],"sourceCode":"import { IconFileText, IconSearchOff } from \"@tabler/icons-react\";\nimport { EmptyState } from \"@/components/ui/empty-state\";\nimport type { Article } from \"@/features/articles/articles.types\";\nimport { ArticleCard } from \"@/features/articles/components/article-card\";\nimport ArticleSearchBar from \"./article-search-bar\";\nimport { articlesSearchParamsCache } from \"../articles.search-params\";\nimport type { SearchParams } from \"nuqs/server\";\n\ninterface ArticlesListProps {\n  filteredArticles: Article[];\n  allTags: string[];\n  searchParams: SearchParams;\n}\n\nexport function ArticlesList({\n  filteredArticles,\n  allTags,\n  searchParams,\n}: ArticlesListProps) {\n  const { searchQuery, status, tags, lang } =\n    articlesSearchParamsCache.parse(searchParams);\n\n  const isFiltered = !!(\n    searchQuery ||\n    (status && status !== \"all\") ||\n    (tags && tags.length > 0) ||\n    (lang && lang !== \"all\")\n  );\n\n  return (\n    <div className=\"flex w-full flex-col gap-8\">\n      <ArticleSearchBar allTags={allTags} />\n\n      {filteredArticles.length > 0 ? (\n        <div className=\"grid grid-cols-[repeat(auto-fill,minmax(min(250px,100%),1fr))] gap-6\">\n          {filteredArticles.map((article) => (\n            <ArticleCard key={article.id} article={article} />\n          ))}\n        </div>\n      ) : (\n        <div className=\"flex min-h-100 items-center justify-center rounded-3xl border border-dashed bg-muted/30 p-12\">\n          {isFiltered ? (\n            <EmptyState\n              icon={<IconSearchOff className=\"size-8\" />}\n              title=\"No results found\"\n              description=\"We couldn't find any articles matching your current filters. Try clearing them or using different terms.\"\n              action={{\n                label: \"Clear Search\",\n                href: \"/cms/articles\",\n              }}\n            />\n          ) : (\n            <EmptyState\n              icon={<IconFileText className=\"size-8\" />}\n              title=\"Start writing articles\"\n              description=\"Your vault is currently empty. Create your first article to see it appear here.\"\n              action={{\n                label: \"Create Article\",\n                href: \"/cms/articles/new\",\n              }}\n            />\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n"},"tags":["fixable"],"source":null},{"category":"assist/source/organizeImports","severity":"error","description":"The imports and exports are not sorted.","message":[{"elements":[],"content":"The imports and exports are not sorted."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Safe fix: Organize Imports (Biome)"}]]},{"diff":{"dictionary":"\"use client\";\r\n\r\nimport type { Activity \r\n  IconClock,\r\n  IconEdit,\r\n  IconEye,\r\n  IconFileText,\r\n  IconPhoto,\r\n} from \"..@tabler/dashboard.typesicons-react\";\r\nimport {\r\n  IconFileText,\r\n  IconPhoto,\r\n  IconEye,\r\n  IconEdit,\r\n  IconClock,\r\n formatDistanceToNow @tabler/iconsdate-reactfns\r\nimport Link from \"next/link\";\r\nimport { formatDistanceToNowcn } from \"date-fns@/lib/utils{ Activityutils\r\n\r\nconst iconMap = {\r  );\r\n}\r\n","ops":[{"diffOp":{"equal":{"range":[0,13]}}},{"diffOp":{"equal":{"range":[13,24]}}},{"diffOp":{"delete":{"range":[24,29]}}},{"diffOp":{"equal":{"range":[29,30]}}},{"diffOp":{"delete":{"range":[30,40]}}},{"diffOp":{"insert":{"range":[40,112]}}},{"diffOp":{"equal":{"range":[112,120]}}},{"diffOp":{"delete":{"range":[120,122]}}},{"diffOp":{"insert":{"range":[122,129]}}},{"diffOp":{"equal":{"range":[129,130]}}},{"diffOp":{"delete":{"range":[130,145]}}},{"diffOp":{"insert":{"range":[145,156]}}},{"diffOp":{"equal":{"range":[156,158]}}},{"diffOp":{"equal":{"range":[158,168]}}},{"diffOp":{"delete":{"range":[168,240]}}},{"diffOp":{"insert":{"range":[240,261]}}},{"diffOp":{"equal":{"range":[112,120]}}},{"diffOp":{"delete":{"range":[261,274]}}},{"diffOp":{"insert":{"range":[274,278]}}},{"diffOp":{"equal":{"range":[278,279]}}},{"diffOp":{"delete":{"range":[279,284]}}},{"diffOp":{"insert":{"range":[284,287]}}},{"diffOp":{"equal":{"range":[156,158]}}},{"diffOp":{"equal":{"range":[287,318]}}},{"diffOp":{"equal":{"range":[318,329]}}},{"diffOp":{"delete":{"range":[329,348]}}},{"diffOp":{"insert":{"range":[348,350]}}},{"diffOp":{"equal":{"range":[350,359]}}},{"diffOp":{"delete":{"range":[359,367]}}},{"diffOp":{"insert":{"range":[367,378]}}},{"diffOp":{"equal":{"range":[156,158]}}},{"diffOp":{"equal":{"range":[318,327]}}},{"diffOp":{"insert":{"range":[24,29]}}},{"diffOp":{"equal":{"range":[378,380]}}},{"diffOp":{"delete":{"range":[348,350]}}},{"diffOp":{"insert":{"range":[380,388]}}},{"diffOp":{"equal":{"range":[350,359]}}},{"diffOp":{"delete":{"range":[367,372]}}},{"diffOp":{"insert":{"range":[120,122]}}},{"diffOp":{"equal":{"range":[129,130]}}},{"diffOp":{"delete":{"range":[388,393]}}},{"diffOp":{"insert":{"range":[130,145]}}},{"diffOp":{"equal":{"range":[156,158]}}},{"diffOp":{"equal":{"range":[393,415]}}},{"equalLines":{"line_count":72}},{"diffOp":{"equal":{"range":[415,424]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\dashboard\\components\\recent-activity.tsx"},"span":[17,68],"sourceCode":"\"use client\";\r\n\r\nimport type { Activity } from \"../dashboard.types\";\r\nimport {\r\n  IconFileText,\r\n  IconPhoto,\r\n  IconEye,\r\n  IconEdit,\r\n  IconClock,\r\n} from \"@tabler/icons-react\";\r\nimport Link from \"next/link\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst iconMap = {\r\n  file: IconFileText,\r\n  image: IconPhoto,\r\n  eye: IconEye,\r\n  edit: IconEdit,\r\n};\r\n\r\nconst colorMap = {\r\n  article_created: \"text-blue-500 bg-blue-500/10\",\r\n  article_published: \"text-green-500 bg-green-500/10\",\r\n  article_updated: \"text-amber-500 bg-amber-500/10\",\r\n  image_uploaded: \"text-purple-500 bg-purple-500/10\",\r\n};\r\n\r\ninterface RecentActivityProps {\r\n  activities: Activity[];\r\n}\r\n\r\nexport function RecentActivity({ activities }: Readonly<RecentActivityProps>) {\r\n  if (activities.length === 0) {\r\n    return (\r\n      <div className=\"rounded-xl border border-dashed p-8 text-center\">\r\n        <p className=\"text-sm text-muted-foreground\">No recent activity yet.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h2 className=\"text-lg font-semibold\">Recent Activity</h2>\r\n      </div>\r\n      <div className=\"rounded-xl border bg-card\">\r\n        <div className=\"divide-y\">\r\n          {activities.map((activity) => {\r\n            const Icon = iconMap[activity.icon as keyof typeof iconMap] || IconFileText;\r\n            const colorClass = colorMap[activity.type as keyof typeof colorMap] || \"text-gray-500 bg-gray-500/10\";\r\n\r\n            return (\r\n              <div\r\n                key={activity.id}\r\n                className=\"flex items-center gap-4 p-4 transition-colors hover:bg-muted/50\"\r\n              >\r\n                <div className={cn(\"flex size-10 shrink-0 items-center justify-center rounded-full\", colorClass)}>\r\n                  <Icon className=\"size-5\" />\r\n                </div>\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <p className=\"font-medium text-sm sm:text-base truncate\">\r\n                    {activity.title}: <span className=\"font-normal text-muted-foreground\">{activity.description}</span>\r\n                  </p>\r\n                  <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground mt-0.5\">\r\n                    <IconClock className=\"size-3.5\" />\r\n                    <span>\r\n                      {formatDistanceToNow(new Date(activity.timestamp), {\r\n                        addSuffix: true,\r\n                      })}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                {activity.link && (\r\n                  <Link\r\n                    href={activity.link as \"/\"}\r\n                    className=\"text-xs font-medium text-primary hover:underline\"\r\n                  >\r\n                    View\r\n                  </Link>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"},"tags":["fixable"],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"\"use client\";\r\n\r\n\n\nimport type { Activity } from \"../dashboard.types\";import {  IconFileText,  IconPhoto,  IconEye,  IconEdit,  IconClock,} from \"@tabler/icons-react\";import Link from \"next/link\";import { formatDistanceToNow } from \"date-fns\";import { cn } from \"@/lib/utils\";const iconMap = {  file: IconFileText,  image: IconPhoto,  eye: IconEye,  edit: IconEdit,};const colorMap = {  article_created: \"text-blue-500 bg-blue-500/10\",  article_published: \"text-green-500 bg-green-500/10\",  article_updated: \"text-amber-500 bg-amber-500/10\",  image_uploaded: \"text-purple-500 bg-purple-500/10\",interface RecentActivityProps {  activities: Activity[];export function RecentActivity({ activities }: Readonly<RecentActivityProps>) {  if (activities.length === 0) {    return (      <div className=\"rounded-xl border border-dashed p-8 text-center\">        <p className=\"text-sm text-muted-foreground\">No recent activity yet.</p>      </div>    );  }  return (    <div className=\"space-y-4\">      <div className=\"flex items-center justify-between\">        <h2 className=\"text-lg font-semibold\">Recent Activity</h2>      <div className=\"rounded-xl border bg-card\">        <div className=\"divide-y\">          {activities.map((activity) => {            const Icon =\n              iconMap[activity.icon as keyof typeof iconMap] || IconFileText;            const colorClass =colorMap[activity.type as keyof typeof colorMap] ||\"text-gray-500 bg-gray-500/10\";            return (              <div                key={activity.id}                className=\"flex items-center gap-4 p-4 transition-colors hover:bg-muted/50\"              >                <div\n                  className={cn(\n                    \"flex size-10 shrink-0 items-center justify-center rounded-full\",colorClass,\n                  )}>                  <Icon className=\"size-5\" />                </div>                <div className=\"flex-1 min-w-0\">                  <p className=\"font-medium text-sm sm:text-base truncate\">                    {activity.title}:{\"\"}\n                    <span className=\"font-normal text-muted-foreground\">\n                      {activity.description}</span>                  </p>                  <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground mt-0.5\">                    <IconClock className=\"size-3.5\" />                    <span>                      {formatDistanceToNow(new Date(activity.timestamp), {                        addSuffix: true,                      })}                    </span>                  </div>                {activity.link && (                  <Link                    href={activity.link as \"/\"}                    className=\"text-xs font-medium text-primary hover:underline\"                  >                    View                  </Link>                )}              </div>            );          })}        </div>    </div>  );","ops":[{"diffOp":{"equal":{"range":[0,13]}}},{"diffOp":{"delete":{"range":[13,17]}}},{"diffOp":{"insert":{"range":[17,19]}}},{"diffOp":{"equal":{"range":[19,70]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[70,78]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[78,93]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[93,105]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[105,115]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[115,126]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[126,138]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[138,167]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[167,196]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[196,243]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[243,276]}}},{"diffOp":{"delete":{"range":[13,17]}}},{"diffOp":{"insert":{"range":[17,19]}}},{"diffOp":{"equal":{"range":[276,293]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[293,314]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[314,333]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[333,348]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[348,365]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[365,367]}}},{"diffOp":{"delete":{"range":[13,17]}}},{"diffOp":{"insert":{"range":[17,19]}}},{"diffOp":{"equal":{"range":[367,385]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[385,435]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[435,489]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[489,541]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[541,594]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[365,367]}}},{"diffOp":{"delete":{"range":[13,17]}}},{"diffOp":{"insert":{"range":[17,19]}}},{"diffOp":{"equal":{"range":[594,625]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[625,650]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[365,366]}}},{"diffOp":{"delete":{"range":[13,17]}}},{"diffOp":{"insert":{"range":[17,19]}}},{"diffOp":{"equal":{"range":[650,729]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[729,761]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[761,773]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[773,844]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[844,924]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[924,936]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[936,942]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[942,945]}}},{"diffOp":{"delete":{"range":[13,17]}}},{"diffOp":{"insert":{"range":[17,19]}}},{"diffOp":{"equal":{"range":[945,955]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[955,986]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[986,1043]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[1043,1109]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[924,936]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[1109,1158]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[1158,1192]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[1192,1233]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[1233,1257]}}},{"diffOp":{"delete":{"range":[942,943]}}},{"diffOp":{"insert":{"range":[1257,1272]}}},{"diffOp":{"equal":{"range":[1272,1335]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[1257,1258]}}},{"diffOp":{"equal":{"range":[1335,1365]}}},{"diffOp":{"delete":{"range":[942,943]}}},{"diffOp":{"insert":{"range":[1257,1272]}}},{"diffOp":{"equal":{"range":[1365,1416]}}},{"diffOp":{"delete":{"range":[942,943]}}},{"diffOp":{"insert":{"range":[1257,1272]}}},{"diffOp":{"equal":{"range":[1416,1447]}}},{"diffOp":{"delete":{"range":[13,17]}}},{"diffOp":{"insert":{"range":[17,19]}}},{"diffOp":{"equal":{"range":[1447,1467]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[1257,1258]}}},{"diffOp":{"equal":{"range":[1467,1485]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[1257,1258]}}},{"diffOp":{"equal":{"range":[1485,1518]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[1257,1258]}}},{"diffOp":{"equal":{"range":[1518,1609]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[1257,1258]}}},{"diffOp":{"equal":{"range":[1609,1624]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[1257,1258]}}},{"diffOp":{"equal":{"range":[1624,1644]}}},{"diffOp":{"delete":{"range":[942,943]}}},{"diffOp":{"insert":{"range":[1644,1663]}}},{"diffOp":{"equal":{"range":[1663,1677]}}},{"diffOp":{"insert":{"range":[1677,1698]}}},{"diffOp":{"equal":{"range":[1698,1763]}}},{"diffOp":{"delete":{"range":[942,943]}}},{"diffOp":{"insert":{"range":[1677,1698]}}},{"diffOp":{"equal":{"range":[1763,1773]}}},{"diffOp":{"insert":{"range":[1773,1793]}}},{"diffOp":{"equal":{"range":[1793,1795]}}},{"diffOp":{"insert":{"range":[1677,1694]}}},{"diffOp":{"equal":{"range":[1795,1796]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[1677,1678]}}},{"diffOp":{"equal":{"range":[1796,1841]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[1677,1678]}}},{"diffOp":{"equal":{"range":[1841,1863]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[1677,1678]}}},{"diffOp":{"equal":{"range":[1863,1911]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[1677,1678]}}},{"diffOp":{"equal":{"range":[1911,1986]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[1677,1678]}}},{"diffOp":{"equal":{"range":[1986,2023]}}},{"diffOp":{"insert":{"range":[2023,2025]}}},{"diffOp":{"equal":{"range":[942,943]}}},{"diffOp":{"insert":{"range":[2025,2048]}}},{"diffOp":{"equal":{"range":[2048,2100]}}},{"diffOp":{"insert":{"range":[2100,2123]}}},{"diffOp":{"equal":{"range":[2123,2145]}}},{"diffOp":{"insert":{"range":[2100,2121]}}},{"diffOp":{"equal":{"range":[2145,2152]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2152,2174]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2174,2272]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2272,2326]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2326,2352]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2352,2426]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2426,2466]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2466,2491]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2491,2518]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2518,2542]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[1841,1863]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2542,2577]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2577,2600]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2600,2647]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2647,2727]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2727,2746]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2746,2770]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2770,2795]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2795,2813]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2813,2833]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2833,2847]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2847,2860]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2860,2874]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[924,936]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2874,2884]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[2884,2888]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}},{"diffOp":{"equal":{"range":[365,366]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[2100,2101]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\dashboard\\components\\recent-activity.tsx"},"span":null,"sourceCode":"\"use client\";\r\n\r\nimport type { Activity } from \"../dashboard.types\";\r\nimport {\r\n  IconFileText,\r\n  IconPhoto,\r\n  IconEye,\r\n  IconEdit,\r\n  IconClock,\r\n} from \"@tabler/icons-react\";\r\nimport Link from \"next/link\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst iconMap = {\r\n  file: IconFileText,\r\n  image: IconPhoto,\r\n  eye: IconEye,\r\n  edit: IconEdit,\r\n};\r\n\r\nconst colorMap = {\r\n  article_created: \"text-blue-500 bg-blue-500/10\",\r\n  article_published: \"text-green-500 bg-green-500/10\",\r\n  article_updated: \"text-amber-500 bg-amber-500/10\",\r\n  image_uploaded: \"text-purple-500 bg-purple-500/10\",\r\n};\r\n\r\ninterface RecentActivityProps {\r\n  activities: Activity[];\r\n}\r\n\r\nexport function RecentActivity({ activities }: Readonly<RecentActivityProps>) {\r\n  if (activities.length === 0) {\r\n    return (\r\n      <div className=\"rounded-xl border border-dashed p-8 text-center\">\r\n        <p className=\"text-sm text-muted-foreground\">No recent activity yet.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h2 className=\"text-lg font-semibold\">Recent Activity</h2>\r\n      </div>\r\n      <div className=\"rounded-xl border bg-card\">\r\n        <div className=\"divide-y\">\r\n          {activities.map((activity) => {\r\n            const Icon = iconMap[activity.icon as keyof typeof iconMap] || IconFileText;\r\n            const colorClass = colorMap[activity.type as keyof typeof colorMap] || \"text-gray-500 bg-gray-500/10\";\r\n\r\n            return (\r\n              <div\r\n                key={activity.id}\r\n                className=\"flex items-center gap-4 p-4 transition-colors hover:bg-muted/50\"\r\n              >\r\n                <div className={cn(\"flex size-10 shrink-0 items-center justify-center rounded-full\", colorClass)}>\r\n                  <Icon className=\"size-5\" />\r\n                </div>\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <p className=\"font-medium text-sm sm:text-base truncate\">\r\n                    {activity.title}: <span className=\"font-normal text-muted-foreground\">{activity.description}</span>\r\n                  </p>\r\n                  <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground mt-0.5\">\r\n                    <IconClock className=\"size-3.5\" />\r\n                    <span>\r\n                      {formatDistanceToNow(new Date(activity.timestamp), {\r\n                        addSuffix: true,\r\n                      })}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                {activity.link && (\r\n                  <Link\r\n                    href={activity.link as \"/\"}\r\n                    className=\"text-xs font-medium text-primary hover:underline\"\r\n                  >\r\n                    View\r\n                  </Link>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"},"tags":[],"source":null},{"category":"assist/source/organizeImports","severity":"error","description":"The imports and exports are not sorted.","message":[{"elements":[],"content":"The imports and exports are not sorted."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Safe fix: Organize Imports (Biome)"}]]},{"diff":{"dictionary":"\"use server\";\n\nimport { listArticlesActioncacheTag } from \"@next/features/articles/articles.actions\";\nimport { listImagesAction } from \"@/features/mediasarticlesmedias.actionsarticles.actionsoctokit, { githubRepoInfolibmedias/medias.actionslib/octokit\nimport type { Activity, DashboardStats } from \"./dashboard.types\";\n\t}\n}\n","ops":[{"diffOp":{"equal":{"range":[0,13]}}},{"diffOp":{"equal":{"range":[13,24]}}},{"diffOp":{"delete":{"range":[24,42]}}},{"diffOp":{"insert":{"range":[42,50]}}},{"diffOp":{"equal":{"range":[50,59]}}},{"diffOp":{"delete":{"range":[59,60]}}},{"diffOp":{"insert":{"range":[60,64]}}},{"diffOp":{"equal":{"range":[64,65]}}},{"diffOp":{"delete":{"range":[65,99]}}},{"diffOp":{"insert":{"range":[42,47]}}},{"diffOp":{"equal":{"range":[99,101]}}},{"diffOp":{"equal":{"range":[101,111]}}},{"diffOp":{"delete":{"range":[111,127]}}},{"diffOp":{"insert":{"range":[24,42]}}},{"diffOp":{"equal":{"range":[127,147]}}},{"diffOp":{"delete":{"range":[147,153]}}},{"diffOp":{"insert":{"range":[153,161]}}},{"diffOp":{"equal":{"range":[64,65]}}},{"diffOp":{"delete":{"range":[161,175]}}},{"diffOp":{"insert":{"range":[175,191]}}},{"diffOp":{"equal":{"range":[99,101]}}},{"diffOp":{"equal":{"range":[101,109]}}},{"diffOp":{"delete":{"range":[191,200]}}},{"diffOp":{"equal":{"range":[200,202]}}},{"diffOp":{"delete":{"range":[202,216]}}},{"diffOp":{"insert":{"range":[111,127]}}},{"diffOp":{"equal":{"range":[127,138]}}},{"diffOp":{"delete":{"range":[216,219]}}},{"diffOp":{"insert":{"range":[65,73]}}},{"diffOp":{"equal":{"range":[64,65]}}},{"diffOp":{"delete":{"range":[191,198]}}},{"diffOp":{"insert":{"range":[219,240]}}},{"diffOp":{"equal":{"range":[99,101]}}},{"diffOp":{"equal":{"range":[101,109]}}},{"diffOp":{"insert":{"range":[191,200]}}},{"diffOp":{"equal":{"range":[200,202]}}},{"diffOp":{"delete":{"range":[42,50]}}},{"diffOp":{"insert":{"range":[202,216]}}},{"diffOp":{"equal":{"range":[127,136]}}},{"diffOp":{"delete":{"range":[60,64]}}},{"diffOp":{"insert":{"range":[59,60]}}},{"diffOp":{"equal":{"range":[64,65]}}},{"diffOp":{"delete":{"range":[42,47]}}},{"diffOp":{"insert":{"range":[240,251]}}},{"diffOp":{"equal":{"range":[99,101]}}},{"diffOp":{"equal":{"range":[251,319]}}},{"equalLines":{"line_count":122}},{"diffOp":{"equal":{"range":[319,324]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\dashboard\\dashboard.actions.ts"},"span":[15,89],"sourceCode":"\"use server\";\n\nimport { listArticlesAction } from \"@/features/articles/articles.actions\";\nimport { listImagesAction } from \"@/features/medias/medias.actions\";\nimport octokit, { githubRepoInfo } from \"@/lib/octokit\";\nimport { cacheTag } from \"next/cache\";\nimport type { Activity, DashboardStats } from \"./dashboard.types\";\n\nexport async function getDashboardStatsAction(): Promise<DashboardStats> {\n\t\"use cache\";\n\tcacheTag(\"articles\", \"medias\");\n\ttry {\n\t\tconst [articlesResult, imagesResult] = await Promise.all([\n\t\t\tlistArticlesAction(),\n\t\t\tlistImagesAction(),\n\t\t]);\n\n\t\tconst articles = articlesResult.success ? articlesResult.data : [];\n\t\tconst images = imagesResult.success ? imagesResult.data : [];\n\n\t\tconst publishedCount = articles.filter(\n\t\t\t(article) => article.published,\n\t\t).length;\n\t\tconst draftCount = articles.filter((article) => !article.published).length;\n\n\t\treturn {\n\t\t\ttotalArticles: articles.length,\n\t\t\tpublishedArticles: publishedCount,\n\t\t\tdraftArticles: draftCount,\n\t\t\tmediaFiles: images.length,\n\t\t};\n\t} catch (error) {\n\t\tconsole.error(\"Error fetching dashboard stats:\", error);\n\t\treturn {\n\t\t\ttotalArticles: 0,\n\t\t\tpublishedArticles: 0,\n\t\t\tdraftArticles: 0,\n\t\t\tmediaFiles: 0,\n\t\t};\n\t}\n}\n\nexport async function getRecentActivityAction(\n\tlimit: number = 8,\n): Promise<Activity[]> {\n\t\"use cache\";\n\tcacheTag(\"articles\", \"medias\");\n\ttry {\n\t\tconst articlesResult = await listArticlesAction();\n\t\tconst articles = articlesResult.success ? articlesResult.data : [];\n\n\t\tconst activities: Activity[] = [];\n\n\t\t// Add article activities (from frontmatter metadata)\n\t\tarticles.forEach((article) => {\n\t\t\t// Created\n\t\t\tactivities.push({\n\t\t\t\tid: `article-create-${article.id}`,\n\t\t\t\ttype: \"article_created\",\n\t\t\t\ttitle: \"Article created\",\n\t\t\t\tdescription: article.title,\n\t\t\t\ttimestamp: article.createdAt,\n\t\t\t\ticon: \"file\",\n\t\t\t\tlink: `/cms/articles/${article.id}/edit`,\n\t\t\t});\n\n\t\t\t// Updated\n\t\t\tif (article.updatedAt !== article.createdAt) {\n\t\t\t\tactivities.push({\n\t\t\t\t\tid: `article-update-${article.id}-${article.updatedAt}`,\n\t\t\t\t\ttype: \"article_updated\",\n\t\t\t\t\ttitle: \"Article updated\",\n\t\t\t\t\tdescription: article.title,\n\t\t\t\t\ttimestamp: article.updatedAt,\n\t\t\t\t\ticon: \"edit\",\n\t\t\t\t\tlink: `/cms/articles/${article.id}/edit`,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Published\n\t\t\tif (article.published && article.publishedAt) {\n\t\t\t\tactivities.push({\n\t\t\t\t\tid: `article-pub-${article.id}`,\n\t\t\t\t\ttype: \"article_published\",\n\t\t\t\t\ttitle: \"Article published\",\n\t\t\t\t\tdescription: article.title,\n\t\t\t\t\ttimestamp: article.publishedAt,\n\t\t\t\t\ticon: \"eye\",\n\t\t\t\t\tlink: `/cms/articles/${article.id}/edit`,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// Add image upload activities (from Git commits for accuracy)\n\t\ttry {\n\t\t\tconst commitRes = await octokit.repos.listCommits({\n\t\t\t\towner: githubRepoInfo.owner,\n\t\t\t\trepo: githubRepoInfo.repo,\n\t\t\t\tpath: githubRepoInfo.MEDIA_PATH,\n\t\t\t\tper_page: 5,\n\t\t\t});\n\n\t\t\tfor (const commit of commitRes.data) {\n\t\t\t\tactivities.push({\n\t\t\t\t\tid: `image-commit-${commit.sha}`,\n\t\t\t\t\ttype: \"image_uploaded\",\n\t\t\t\t\ttitle: \"Images uploaded\",\n\t\t\t\t\tdescription: commit.commit.message\n\t\t\t\t\t\t.replace(\"Upload image: \", \"\")\n\t\t\t\t\t\t.replace(\"Upload images: \", \"\"),\n\t\t\t\t\ttimestamp: commit.commit.author?.date || \"\",\n\t\t\t\t\ticon: \"image\",\n\t\t\t\t\tlink: \"/cms/media\",\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.warn(\"Could not fetch image commits for activity:\", err);\n\t\t}\n\n\t\t// Sort by timestamp (newest first) and limit results\n\t\treturn activities\n\t\t\t.sort(\n\t\t\t\t(a, b) =>\n\t\t\t\t\tnew Date(b.timestamp).getTime() - new Date(a.timestamp).getTime(),\n\t\t\t)\n\t\t\t.filter((a) => new Date(a.timestamp).getTime() > 0) // Ensure valid dates\n\t\t\t.slice(0, limit);\n\t} catch (error) {\n\t\tconsole.error(\"Error fetching recent activity:\", error);\n\t\treturn [];\n\t}\n}\n"},"tags":["fixable"],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"\"use server\";\n\nimport { listArticlesAction } from \"@/features/articles/articles.actions\";\nexport async function getDashboardStatsAction(): Promise<DashboardStats> {\n\t  \"use cache\";\ncacheTag(\"articles\", \"medias\");\ntry {\n\t\t    const [articlesResult, imagesResult] = await Promise.all([\n\t\t\t      listArticlesAction(),\nlistImagesAction(),\n]);\n\nconst articles = articlesResult.success ? articlesResult.data : [];\nconst images = imagesResult.success ? imagesResult.data : [];\n\nconst publishedCount = articles.filter(\n(article) => article.published,\n).length;\nconst draftCount = articles.filter((article) => !article.published).length;\n\nreturn {\ntotalArticles: articles.length,\npublishedArticles: publishedCount,\ndraftArticles: draftCount,\nmediaFiles: images.length,\n};\n} catch (error) {\nconsole.error(\"Error fetching dashboard stats:\", error);\ntotalArticles: 0,\npublishedArticles: 0,\ndraftArticles: 0,\nmediaFiles: 0,\n}\n}\n\nexport async function getRecentActivityAction(\nlimit: number = 8,\n): Promise<Activity[]> {\nconst articlesResult = await listArticlesAction();\nconst articles = articlesResult.success ? articlesResult.data : [];\n\nconst activities: Activity[] = [];\n\n// Add article activities (from frontmatter metadata)\narticles.forEach((article) => {\n// Created\nactivities.push({\n\t\t\t\t        id: `article-create-${article.id}`,\ntype: \"article_created\",\ntitle: \"Article created\",\ndescription: article.title,\ntimestamp: article.createdAt,\nicon: \"file\",\nlink: `/cms/articles/${article.id}/edit`,\n});\n\n// Updated\nif (article.updatedAt !== article.createdAt) {\n\t\t\t\t\t          id: `article-update-${article.id}-${article.updatedAt}`,\ntype: \"article_updated\",\ntitle: \"Article updated\",\ntimestamp: article.updatedAt,\nicon: \"edit\",\n}\n\n// Published\nif (article.published && article.publishedAt) {\nid: `article-pub-${article.id}`,\ntype: \"article_published\",\ntitle: \"Article published\",\ntimestamp: article.publishedAt,\nicon: \"eye\",\n// Add image upload activities (from Git commits for accuracy)\nconst commitRes = await octokit.repos.listCommits({\nowner: githubRepoInfo.owner,\nrepo: githubRepoInfo.repo,\npath: githubRepoInfo.MEDIA_PATH,\nper_page: 5,\nfor (const commit of commitRes.data) {\nid: `image-commit-${commit.sha}`,\ntype: \"image_uploaded\",\ntitle: \"Images uploaded\",\ndescription: commit.commit.message\n\t\t\t\t\t\t            .replace(\"Upload image: \", \"\")\n.replace(\"Upload images: \", \"\"),\ntimestamp: commit.commit.author?.date || \"\",\nicon: \"image\",\nlink: \"/cms/media\",\n} catch (err) {\nconsole.warn(\"Could not fetch image commits for activity:\", err);\n// Sort by timestamp (newest first) and limit results\nreturn activities\n.sort(\n(a, b) =>\nnew Date(b.timestamp).getTime() - new Date(a.timestamp).getTime(),\n)\n.filter((a) => new Date(a.timestamp).getTime() > 0) // Ensure valid dates\n.slice(0, limit);\nconsole.error(\"Error fetching recent activity:\", error);\nreturn [];\n","ops":[{"diffOp":{"equal":{"range":[0,89]}}},{"equalLines":{"line_count":4}},{"diffOp":{"equal":{"range":[89,165]}}},{"diffOp":{"delete":{"range":[165,166]}}},{"diffOp":{"insert":{"range":[166,168]}}},{"diffOp":{"equal":{"range":[168,181]}}},{"diffOp":{"delete":{"range":[165,166]}}},{"diffOp":{"insert":{"range":[166,168]}}},{"diffOp":{"equal":{"range":[181,213]}}},{"diffOp":{"delete":{"range":[165,166]}}},{"diffOp":{"insert":{"range":[166,168]}}},{"diffOp":{"equal":{"range":[213,219]}}},{"diffOp":{"delete":{"range":[219,221]}}},{"diffOp":{"insert":{"range":[221,225]}}},{"diffOp":{"equal":{"range":[225,284]}}},{"diffOp":{"delete":{"range":[284,287]}}},{"diffOp":{"insert":{"range":[287,293]}}},{"diffOp":{"equal":{"range":[293,315]}}},{"diffOp":{"delete":{"range":[284,287]}}},{"diffOp":{"insert":{"range":[287,293]}}},{"diffOp":{"equal":{"range":[315,335]}}},{"diffOp":{"delete":{"range":[284,286]}}},{"diffOp":{"insert":{"range":[287,291]}}},{"diffOp":{"equal":{"range":[335,340]}}},{"diffOp":{"delete":{"range":[284,286]}}},{"diffOp":{"insert":{"range":[287,291]}}},{"diffOp":{"equal":{"range":[340,408]}}},{"diffOp":{"delete":{"range":[284,286]}}},{"diffOp":{"insert":{"range":[287,291]}}},{"diffOp":{"equal":{"range":[408,471]}}},{"diffOp":{"delete":{"range":[284,286]}}},{"diffOp":{"insert":{"range":[287,291]}}},{"diffOp":{"equal":{"range":[471,511]}}},{"diffOp":{"delete":{"range":[284,287]}}},{"diffOp":{"insert":{"range":[287,293]}}},{"diffOp":{"equal":{"range":[511,543]}}},{"diffOp":{"delete":{"range":[284,286]}}},{"diffOp":{"insert":{"range":[287,291]}}},{"diffOp":{"equal":{"range":[543,553]}}},{"diffOp":{"delete":{"range":[284,286]}}},{"diffOp":{"insert":{"range":[287,291]}}},{"diffOp":{"equal":{"range":[553,630]}}},{"diffOp":{"delete":{"range":[284,286]}}},{"diffOp":{"insert":{"range":[287,291]}}},{"diffOp":{"equal":{"range":[630,639]}}},{"diffOp":{"delete":{"range":[284,287]}}},{"diffOp":{"insert":{"range":[287,293]}}},{"diffOp":{"equal":{"range":[639,671]}}},{"diffOp":{"delete":{"range":[284,287]}}},{"diffOp":{"insert":{"range":[287,293]}}},{"diffOp":{"equal":{"range":[671,706]}}},{"diffOp":{"delete":{"range":[284,287]}}},{"diffOp":{"insert":{"range":[287,293]}}},{"diffOp":{"equal":{"range":[706,733]}}},{"diffOp":{"delete":{"range":[284,287]}}},{"diffOp":{"insert":{"range":[287,293]}}},{"diffOp":{"equal":{"range":[733,760]}}},{"diffOp":{"delete":{"range":[284,286]}}},{"diffOp":{"insert":{"range":[287,291]}}},{"diffOp":{"equal":{"range":[760,763]}}},{"diffOp":{"delete":{"range":[284,285]}}},{"diffOp":{"insert":{"range":[287,289]}}},{"diffOp":{"equal":{"range":[763,781]}}},{"diffOp":{"delete":{"range":[284,286]}}},{"diffOp":{"insert":{"range":[287,291]}}},{"diffOp":{"equal":{"range":[781,838]}}},{"diffOp":{"delete":{"range":[284,286]}}},{"diffOp":{"insert":{"range":[287,291]}}},{"diffOp":{"equal":{"range":[630,639]}}},{"diffOp":{"delete":{"range":[284,287]}}},{"diffOp":{"insert":{"range":[287,293]}}},{"diffOp":{"equal":{"range":[838,856]}}},{"diffOp":{"delete":{"range":[284,287]}}},{"diffOp":{"insert":{"range":[287,293]}}},{"diffOp":{"equal":{"range":[856,878]}}},{"diffOp":{"delete":{"range":[284,287]}}},{"diffOp":{"insert":{"range":[287,293]}}},{"diffOp":{"equal":{"range":[878,896]}}},{"diffOp":{"delete":{"range":[284,287]}}},{"diffOp":{"insert":{"range":[287,293]}}},{"diffOp":{"equal":{"range":[896,911]}}},{"diffOp":{"delete":{"range":[284,286]}}},{"diffOp":{"insert":{"range":[287,291]}}},{"diffOp":{"equal":{"range":[760,763]}}},{"diffOp":{"delete":{"range":[284,285]}}},{"diffOp":{"insert":{"range":[287,289]}}},{"diffOp":{"equal":{"range":[911,963]}}},{"diffOp":{"delete":{"range":[284,285]}}},{"diffOp":{"insert":{"range":[287,289]}}},{"diffOp":{"equal":{"range":[963,1007]}}},{"diffOp":{"delete":{"range":[284,285]}}},{"diffOp":{"insert":{"range":[287,289]}}},{"diffOp":{"equal":{"range":[168,181]}}},{"diffOp":{"delete":{"range":[284,285]}}},{"diffOp":{"insert":{"range":[287,289]}}},{"diffOp":{"equal":{"range":[181,213]}}},{"diffOp":{"delete":{"range":[284,285]}}},{"diffOp":{"insert":{"range":[287,289]}}},{"diffOp":{"equal":{"range":[213,219]}}},{"diffOp":{"delete":{"range":[284,286]}}},{"diffOp":{"insert":{"range":[287,291]}}},{"diffOp":{"equal":{"range":[1007,1058]}}},{"diffOp":{"delete":{"range":[284,286]}}},{"diffOp":{"insert":{"range":[287,291]}}},{"diffOp":{"equal":{"range":[1058,1127]}}},{"diffOp":{"delete":{"range":[284,286]}}},{"diffOp":{"insert":{"range":[287,291]}}},{"diffOp":{"equal":{"range":[1127,1163]}}},{"diffOp":{"delete":{"range":[284,286]}}},{"diffOp":{"insert":{"range":[287,291]}}},{"diffOp":{"equal":{"range":[1163,1217]}}},{"diffOp":{"delete":{"range":[284,286]}}},{"diffOp":{"insert":{"range":[287,291]}}},{"diffOp":{"equal":{"range":[1217,1249]}}},{"diffOp":{"delete":{"range":[284,287]}}},{"diffOp":{"insert":{"range":[287,293]}}},{"diffOp":{"equal":{"range":[1249,1260]}}},{"diffOp":{"delete":{"range":[284,287]}}},{"diffOp":{"insert":{"range":[287,293]}}},{"diffOp":{"equal":{"range":[1260,1278]}}},{"diffOp":{"delete":{"range":[1278,1282]}}},{"diffOp":{"insert":{"range":[1282,1290]}}},{"diffOp":{"equal":{"range":[1290,1326]}}},{"diffOp":{"delete":{"range":[1278,1282]}}},{"diffOp":{"insert":{"range":[1282,1290]}}},{"diffOp":{"equal":{"range":[1326,1351]}}},{"diffOp":{"delete":{"range":[1278,1282]}}},{"diffOp":{"insert":{"range":[1282,1290]}}},{"diffOp":{"equal":{"range":[1351,1377]}}},{"diffOp":{"delete":{"range":[1278,1282]}}},{"diffOp":{"insert":{"range":[1282,1290]}}},{"diffOp":{"equal":{"range":[1377,1405]}}},{"diffOp":{"delete":{"range":[1278,1282]}}},{"diffOp":{"insert":{"range":[1282,1290]}}},{"diffOp":{"equal":{"range":[1405,1435]}}},{"diffOp":{"delete":{"range":[1278,1282]}}},{"diffOp":{"insert":{"range":[1282,1290]}}},{"diffOp":{"equal":{"range":[1435,1449]}}},{"diffOp":{"delete":{"range":[1278,1282]}}},{"diffOp":{"insert":{"range":[1282,1290]}}},{"diffOp":{"equal":{"range":[1449,1491]}}},{"diffOp":{"delete":{"range":[1278,1281]}}},{"diffOp":{"insert":{"range":[1282,1288]}}},{"diffOp":{"equal":{"range":[1491,1496]}}},{"diffOp":{"delete":{"range":[1278,1281]}}},{"diffOp":{"insert":{"range":[1282,1288]}}},{"diffOp":{"equal":{"range":[1496,1507]}}},{"diffOp":{"delete":{"range":[1278,1281]}}},{"diffOp":{"insert":{"range":[1282,1288]}}},{"diffOp":{"equal":{"range":[1507,1554]}}},{"diffOp":{"delete":{"range":[1278,1282]}}},{"diffOp":{"insert":{"range":[1282,1290]}}},{"diffOp":{"equal":{"range":[1260,1278]}}},{"diffOp":{"delete":{"range":[1554,1559]}}},{"diffOp":{"insert":{"range":[1559,1569]}}},{"diffOp":{"equal":{"range":[1569,1626]}}},{"diffOp":{"delete":{"range":[1554,1559]}}},{"diffOp":{"insert":{"range":[1559,1569]}}},{"diffOp":{"equal":{"range":[1626,1651]}}},{"diffOp":{"delete":{"range":[1554,1559]}}},{"diffOp":{"insert":{"range":[1559,1569]}}},{"diffOp":{"equal":{"range":[1651,1677]}}},{"diffOp":{"delete":{"range":[1554,1559]}}},{"diffOp":{"insert":{"range":[1559,1569]}}},{"diffOp":{"equal":{"range":[1377,1405]}}},{"diffOp":{"delete":{"range":[1554,1559]}}},{"diffOp":{"insert":{"range":[1559,1569]}}},{"diffOp":{"equal":{"range":[1677,1707]}}},{"diffOp":{"delete":{"range":[1554,1559]}}},{"diffOp":{"insert":{"range":[1559,1569]}}},{"diffOp":{"equal":{"range":[1707,1721]}}},{"diffOp":{"delete":{"range":[1554,1559]}}},{"diffOp":{"insert":{"range":[1559,1569]}}},{"diffOp":{"equal":{"range":[1449,1491]}}},{"diffOp":{"delete":{"range":[1554,1558]}}},{"diffOp":{"insert":{"range":[1559,1567]}}},{"diffOp":{"equal":{"range":[1491,1495]}}},{"diffOp":{"delete":{"range":[1554,1557]}}},{"diffOp":{"insert":{"range":[1559,1565]}}},{"diffOp":{"equal":{"range":[1721,1724]}}},{"diffOp":{"delete":{"range":[1554,1557]}}},{"diffOp":{"insert":{"range":[1559,1565]}}},{"diffOp":{"equal":{"range":[1724,1737]}}},{"diffOp":{"delete":{"range":[1554,1557]}}},{"diffOp":{"insert":{"range":[1559,1565]}}},{"diffOp":{"equal":{"range":[1737,1785]}}},{"diffOp":{"delete":{"range":[1554,1558]}}},{"diffOp":{"insert":{"range":[1559,1567]}}},{"diffOp":{"equal":{"range":[1260,1278]}}},{"diffOp":{"delete":{"range":[1554,1559]}}},{"diffOp":{"insert":{"range":[1559,1569]}}},{"diffOp":{"equal":{"range":[1785,1818]}}},{"diffOp":{"delete":{"range":[1554,1559]}}},{"diffOp":{"insert":{"range":[1559,1569]}}},{"diffOp":{"equal":{"range":[1818,1845]}}},{"diffOp":{"delete":{"range":[1554,1559]}}},{"diffOp":{"insert":{"range":[1559,1569]}}},{"diffOp":{"equal":{"range":[1845,1873]}}},{"diffOp":{"delete":{"range":[1554,1559]}}},{"diffOp":{"insert":{"range":[1559,1569]}}},{"diffOp":{"equal":{"range":[1377,1405]}}},{"diffOp":{"delete":{"range":[1554,1559]}}},{"diffOp":{"insert":{"range":[1559,1569]}}},{"diffOp":{"equal":{"range":[1873,1905]}}},{"diffOp":{"delete":{"range":[1554,1559]}}},{"diffOp":{"insert":{"range":[1559,1569]}}},{"diffOp":{"equal":{"range":[1905,1918]}}},{"diffOp":{"delete":{"range":[1554,1559]}}},{"diffOp":{"insert":{"range":[1559,1569]}}},{"diffOp":{"equal":{"range":[1449,1491]}}},{"diffOp":{"delete":{"range":[1554,1558]}}},{"diffOp":{"insert":{"range":[1559,1567]}}},{"diffOp":{"equal":{"range":[1491,1495]}}},{"diffOp":{"delete":{"range":[1554,1557]}}},{"diffOp":{"insert":{"range":[1559,1565]}}},{"diffOp":{"equal":{"range":[911,913]}}},{"diffOp":{"delete":{"range":[1554,1556]}}},{"diffOp":{"insert":{"range":[1559,1563]}}},{"diffOp":{"equal":{"range":[1491,1496]}}},{"diffOp":{"delete":{"range":[1554,1556]}}},{"diffOp":{"insert":{"range":[1559,1563]}}},{"diffOp":{"equal":{"range":[1918,1981]}}},{"diffOp":{"delete":{"range":[1554,1556]}}},{"diffOp":{"insert":{"range":[1559,1563]}}},{"diffOp":{"equal":{"range":[213,219]}}},{"diffOp":{"delete":{"range":[1554,1557]}}},{"diffOp":{"insert":{"range":[1559,1565]}}},{"diffOp":{"equal":{"range":[1981,2033]}}},{"diffOp":{"delete":{"range":[1554,1558]}}},{"diffOp":{"insert":{"range":[1559,1567]}}},{"diffOp":{"equal":{"range":[2033,2062]}}},{"diffOp":{"delete":{"range":[1554,1558]}}},{"diffOp":{"insert":{"range":[1559,1567]}}},{"diffOp":{"equal":{"range":[2062,2089]}}},{"diffOp":{"delete":{"range":[1554,1558]}}},{"diffOp":{"insert":{"range":[1559,1567]}}},{"diffOp":{"equal":{"range":[2089,2122]}}},{"diffOp":{"delete":{"range":[1554,1558]}}},{"diffOp":{"insert":{"range":[1559,1567]}}},{"diffOp":{"equal":{"range":[2122,2135]}}},{"diffOp":{"delete":{"range":[1554,1557]}}},{"diffOp":{"insert":{"range":[1559,1565]}}},{"diffOp":{"equal":{"range":[1491,1496]}}},{"diffOp":{"delete":{"range":[1554,1557]}}},{"diffOp":{"insert":{"range":[1559,1565]}}},{"diffOp":{"equal":{"range":[2135,2174]}}},{"diffOp":{"delete":{"range":[1554,1558]}}},{"diffOp":{"insert":{"range":[1559,1567]}}},{"diffOp":{"equal":{"range":[1260,1278]}}},{"diffOp":{"delete":{"range":[1554,1559]}}},{"diffOp":{"insert":{"range":[1559,1569]}}},{"diffOp":{"equal":{"range":[2174,2208]}}},{"diffOp":{"delete":{"range":[1554,1559]}}},{"diffOp":{"insert":{"range":[1559,1569]}}},{"diffOp":{"equal":{"range":[2208,2232]}}},{"diffOp":{"delete":{"range":[1554,1559]}}},{"diffOp":{"insert":{"range":[1559,1569]}}},{"diffOp":{"equal":{"range":[2232,2258]}}},{"diffOp":{"delete":{"range":[1554,1559]}}},{"diffOp":{"insert":{"range":[1559,1569]}}},{"diffOp":{"equal":{"range":[2258,2293]}}},{"diffOp":{"delete":{"range":[2293,2299]}}},{"diffOp":{"insert":{"range":[2299,2311]}}},{"diffOp":{"equal":{"range":[2311,2342]}}},{"diffOp":{"delete":{"range":[2293,2299]}}},{"diffOp":{"insert":{"range":[2299,2311]}}},{"diffOp":{"equal":{"range":[2342,2375]}}},{"diffOp":{"delete":{"range":[2293,2298]}}},{"diffOp":{"insert":{"range":[2299,2309]}}},{"diffOp":{"equal":{"range":[2375,2420]}}},{"diffOp":{"delete":{"range":[2293,2298]}}},{"diffOp":{"insert":{"range":[2299,2309]}}},{"diffOp":{"equal":{"range":[2420,2435]}}},{"diffOp":{"delete":{"range":[2293,2298]}}},{"diffOp":{"insert":{"range":[2299,2309]}}},{"diffOp":{"equal":{"range":[2435,2455]}}},{"diffOp":{"delete":{"range":[2293,2297]}}},{"diffOp":{"insert":{"range":[2299,2307]}}},{"diffOp":{"equal":{"range":[1491,1495]}}},{"diffOp":{"delete":{"range":[2293,2296]}}},{"diffOp":{"insert":{"range":[2299,2305]}}},{"diffOp":{"equal":{"range":[911,913]}}},{"diffOp":{"delete":{"range":[2293,2295]}}},{"diffOp":{"insert":{"range":[2299,2303]}}},{"diffOp":{"equal":{"range":[2455,2471]}}},{"diffOp":{"delete":{"range":[2293,2296]}}},{"diffOp":{"insert":{"range":[2299,2305]}}},{"diffOp":{"equal":{"range":[2471,2537]}}},{"diffOp":{"delete":{"range":[2293,2295]}}},{"diffOp":{"insert":{"range":[2299,2303]}}},{"diffOp":{"equal":{"range":[1721,1724]}}},{"diffOp":{"delete":{"range":[2293,2295]}}},{"diffOp":{"insert":{"range":[2299,2303]}}},{"diffOp":{"equal":{"range":[2537,2591]}}},{"diffOp":{"delete":{"range":[2293,2295]}}},{"diffOp":{"insert":{"range":[2299,2303]}}},{"diffOp":{"equal":{"range":[2591,2609]}}},{"diffOp":{"delete":{"range":[2293,2296]}}},{"diffOp":{"insert":{"range":[2299,2305]}}},{"diffOp":{"equal":{"range":[2609,2616]}}},{"diffOp":{"delete":{"range":[2293,2297]}}},{"diffOp":{"insert":{"range":[2299,2307]}}},{"diffOp":{"equal":{"range":[2616,2626]}}},{"diffOp":{"delete":{"range":[2293,2298]}}},{"diffOp":{"insert":{"range":[2299,2309]}}},{"diffOp":{"equal":{"range":[2626,2693]}}},{"diffOp":{"delete":{"range":[2293,2296]}}},{"diffOp":{"insert":{"range":[2299,2305]}}},{"diffOp":{"equal":{"range":[2693,2695]}}},{"diffOp":{"delete":{"range":[2293,2296]}}},{"diffOp":{"insert":{"range":[2299,2305]}}},{"diffOp":{"equal":{"range":[2695,2769]}}},{"diffOp":{"delete":{"range":[2293,2296]}}},{"diffOp":{"insert":{"range":[2299,2305]}}},{"diffOp":{"equal":{"range":[2769,2787]}}},{"diffOp":{"delete":{"range":[2293,2294]}}},{"diffOp":{"insert":{"range":[2299,2301]}}},{"diffOp":{"equal":{"range":[763,781]}}},{"diffOp":{"delete":{"range":[2293,2295]}}},{"diffOp":{"insert":{"range":[2299,2303]}}},{"diffOp":{"equal":{"range":[2787,2844]}}},{"diffOp":{"delete":{"range":[2293,2295]}}},{"diffOp":{"insert":{"range":[2299,2303]}}},{"diffOp":{"equal":{"range":[2844,2855]}}},{"diffOp":{"delete":{"range":[2293,2294]}}},{"diffOp":{"insert":{"range":[2299,2301]}}},{"diffOp":{"equal":{"range":[911,915]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\dashboard\\dashboard.actions.ts"},"span":null,"sourceCode":"\"use server\";\n\nimport { listArticlesAction } from \"@/features/articles/articles.actions\";\nimport { listImagesAction } from \"@/features/medias/medias.actions\";\nimport octokit, { githubRepoInfo } from \"@/lib/octokit\";\nimport { cacheTag } from \"next/cache\";\nimport type { Activity, DashboardStats } from \"./dashboard.types\";\n\nexport async function getDashboardStatsAction(): Promise<DashboardStats> {\n\t\"use cache\";\n\tcacheTag(\"articles\", \"medias\");\n\ttry {\n\t\tconst [articlesResult, imagesResult] = await Promise.all([\n\t\t\tlistArticlesAction(),\n\t\t\tlistImagesAction(),\n\t\t]);\n\n\t\tconst articles = articlesResult.success ? articlesResult.data : [];\n\t\tconst images = imagesResult.success ? imagesResult.data : [];\n\n\t\tconst publishedCount = articles.filter(\n\t\t\t(article) => article.published,\n\t\t).length;\n\t\tconst draftCount = articles.filter((article) => !article.published).length;\n\n\t\treturn {\n\t\t\ttotalArticles: articles.length,\n\t\t\tpublishedArticles: publishedCount,\n\t\t\tdraftArticles: draftCount,\n\t\t\tmediaFiles: images.length,\n\t\t};\n\t} catch (error) {\n\t\tconsole.error(\"Error fetching dashboard stats:\", error);\n\t\treturn {\n\t\t\ttotalArticles: 0,\n\t\t\tpublishedArticles: 0,\n\t\t\tdraftArticles: 0,\n\t\t\tmediaFiles: 0,\n\t\t};\n\t}\n}\n\nexport async function getRecentActivityAction(\n\tlimit: number = 8,\n): Promise<Activity[]> {\n\t\"use cache\";\n\tcacheTag(\"articles\", \"medias\");\n\ttry {\n\t\tconst articlesResult = await listArticlesAction();\n\t\tconst articles = articlesResult.success ? articlesResult.data : [];\n\n\t\tconst activities: Activity[] = [];\n\n\t\t// Add article activities (from frontmatter metadata)\n\t\tarticles.forEach((article) => {\n\t\t\t// Created\n\t\t\tactivities.push({\n\t\t\t\tid: `article-create-${article.id}`,\n\t\t\t\ttype: \"article_created\",\n\t\t\t\ttitle: \"Article created\",\n\t\t\t\tdescription: article.title,\n\t\t\t\ttimestamp: article.createdAt,\n\t\t\t\ticon: \"file\",\n\t\t\t\tlink: `/cms/articles/${article.id}/edit`,\n\t\t\t});\n\n\t\t\t// Updated\n\t\t\tif (article.updatedAt !== article.createdAt) {\n\t\t\t\tactivities.push({\n\t\t\t\t\tid: `article-update-${article.id}-${article.updatedAt}`,\n\t\t\t\t\ttype: \"article_updated\",\n\t\t\t\t\ttitle: \"Article updated\",\n\t\t\t\t\tdescription: article.title,\n\t\t\t\t\ttimestamp: article.updatedAt,\n\t\t\t\t\ticon: \"edit\",\n\t\t\t\t\tlink: `/cms/articles/${article.id}/edit`,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Published\n\t\t\tif (article.published && article.publishedAt) {\n\t\t\t\tactivities.push({\n\t\t\t\t\tid: `article-pub-${article.id}`,\n\t\t\t\t\ttype: \"article_published\",\n\t\t\t\t\ttitle: \"Article published\",\n\t\t\t\t\tdescription: article.title,\n\t\t\t\t\ttimestamp: article.publishedAt,\n\t\t\t\t\ticon: \"eye\",\n\t\t\t\t\tlink: `/cms/articles/${article.id}/edit`,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// Add image upload activities (from Git commits for accuracy)\n\t\ttry {\n\t\t\tconst commitRes = await octokit.repos.listCommits({\n\t\t\t\towner: githubRepoInfo.owner,\n\t\t\t\trepo: githubRepoInfo.repo,\n\t\t\t\tpath: githubRepoInfo.MEDIA_PATH,\n\t\t\t\tper_page: 5,\n\t\t\t});\n\n\t\t\tfor (const commit of commitRes.data) {\n\t\t\t\tactivities.push({\n\t\t\t\t\tid: `image-commit-${commit.sha}`,\n\t\t\t\t\ttype: \"image_uploaded\",\n\t\t\t\t\ttitle: \"Images uploaded\",\n\t\t\t\t\tdescription: commit.commit.message\n\t\t\t\t\t\t.replace(\"Upload image: \", \"\")\n\t\t\t\t\t\t.replace(\"Upload images: \", \"\"),\n\t\t\t\t\ttimestamp: commit.commit.author?.date || \"\",\n\t\t\t\t\ticon: \"image\",\n\t\t\t\t\tlink: \"/cms/media\",\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.warn(\"Could not fetch image commits for activity:\", err);\n\t\t}\n\n\t\t// Sort by timestamp (newest first) and limit results\n\t\treturn activities\n\t\t\t.sort(\n\t\t\t\t(a, b) =>\n\t\t\t\t\tnew Date(b.timestamp).getTime() - new Date(a.timestamp).getTime(),\n\t\t\t)\n\t\t\t.filter((a) => new Date(a.timestamp).getTime() > 0) // Ensure valid dates\n\t\t\t.slice(0, limit);\n\t} catch (error) {\n\t\tconsole.error(\"Error fetching recent activity:\", error);\n\t\treturn [];\n\t}\n}\n"},"tags":[],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"export interface Activity {\n  id: string;\n  type:\n    | \"article_created\"| \"article_published\"| \"article_updated\"| \"image_uploaded\";\n  title: string;\n  description: string;  mediaFiles: number;\n}\n","ops":[{"diffOp":{"equal":{"range":[0,49]}}},{"diffOp":{"insert":{"range":[49,55]}}},{"diffOp":{"equal":{"range":[55,73]}}},{"diffOp":{"delete":{"range":[55,56]}}},{"diffOp":{"insert":{"range":[49,54]}}},{"diffOp":{"equal":{"range":[73,94]}}},{"diffOp":{"delete":{"range":[55,56]}}},{"diffOp":{"insert":{"range":[49,54]}}},{"diffOp":{"equal":{"range":[94,113]}}},{"diffOp":{"delete":{"range":[55,56]}}},{"diffOp":{"insert":{"range":[49,54]}}},{"diffOp":{"equal":{"range":[113,172]}}},{"equalLines":{"line_count":8}},{"diffOp":{"equal":{"range":[172,196]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\dashboard\\dashboard.types.ts"},"span":null,"sourceCode":"export interface Activity {\n  id: string;\n  type: \"article_created\" | \"article_published\" | \"article_updated\" | \"image_uploaded\";\n  title: string;\n  description: string;\n  timestamp: string;\n  icon: \"file\" | \"image\" | \"eye\" | \"edit\";\n  link?: string;\n}\nexport interface DashboardStats {\n  totalArticles: number;\n  publishedArticles: number;\n  draftArticles: number;\n  mediaFiles: number;\n}\n"},"tags":[],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"\"use client\";\n\nimport {  const maxLength = 12;\n  if (name.length <= maxLength) return name;\n\n  const lastDot = name.lastIndexOf(\".\");\n  const extension = lastDot > 0 ? name.slice(lastDot) : \"\";\n\n  // Calculate how many chars we can use from the name part\n  const availableForName = maxLength - extension.length - 3; // 3 for \"...\"\n\n  if (availableForName <= 0) {\n    // If extension is too long, just truncate everything\n    return name.slice(0, maxLength);\n  }\n\n  const nameWithoutExt = lastDot > 0 ? name.slice(0, lastDot) : name;\n  return nameWithoutExt.slice(0, availableForName) + \"...\" + extension;            <div className=\"max-h-96 overflow-y-auto pr-2 pb-4 [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-track]:bg-muted/30 [&::-webkit-scrollbar-thumb]:bg-muted-foreground/30 [&::-webkit-scrollbar-thumb]:rounded-full hover:[&::-webkit-scrollbar-thumb]:bg-muted-foreground/50\">\n              <div className=\"grid gap-3\">\n                              {uploadedFiles.map((item) => (\n                  <div\n                    key={item.file.name + item.file.lastModified}\nclassName=\"group relative flex items-center gap-3 rounded-xl border bg-card p-3 shadow-sm transition-all hover:shadow-md\"\n>\n<div className=\"relative size-16 shrink-0 overflow-hidden rounded-lg bg-muted border\">\n                      {item.preview ? (\n                        <Image\n                          src={item.preview}\nalt={item.file.name}\nfill\nunoptimized\nclassName=\"object-cover\"\n/>\n) : (\n<div className=\"flex h-full w-full items-center justify-center\">\n<IconFileDescription className=\"size-6 text-muted-foreground/40\" />\n</div>\n)}\n</div>\n\n<div className=\"flex-1 min-w-0 space-y-1.5 overflow-hidden\">\n<div className=\"min-w-0\">\n<p\n                          className=\"text-sm font-bold truncate leading-none mb-1\"title={item.file.name}>\n                          {abbreviateFilename(item.file.name)}\n</p>\n<p className=\"text-[10px] font-medium text-muted-foreground\">\n{(item.file.size / 1024 / 1024).toFixed(2)} MB\n<div className=\"flex items-center gap-1.5 flex-wrap\">\n{item.uploaded && (\n<Badge\n                            variant=\"secondary\"\nclassName=\"bg-green-500/10 text-green-600 border-green-500/20 gap-1 px-1.5 py-0 h-5 text-[10px] whitespace-nowrap\"\n<IconCheck className=\"size-3\" />\nDone\n                          </Badge>\n                        )}                          </Badge>\n                        )}\n{(item.progress > 0 ||\n(isPending && !item.uploaded && !item.error)) && (\n<div className=\"h-1.5 w-full overflow-hidden rounded-full bg-muted\">\nclassName={`h-full transition-all duration-500 ${\n                              item.error\n                                ? \"bg-destructive\"\n: item.progress === 100\n                                  ? \"bg-green-500\"\n: \"bg-primary animate-pulse\"\n}`}\nstyle={{\nwidth: `${item.progress || (isPending ? 40 : 0)}%`,\n}}\n)}\n\n{item.error && (\n<p className=\"text-[10px] font-medium text-destructive\">\n{item.error}\n<div className=\"flex items-center gap-1 shrink-0 ml-auto\">\n{!item.uploaded && !item.error && (\n<Tooltip>\n<TooltipTrigger asChild>\n<Button\nonClick={() => handleUpload(item)}\ndisabled={isPending}\nsize=\"icon\"\nvariant=\"ghost\"\nclassName=\"size-8 rounded-lg text-primary hover:bg-primary/10 shrink-0\"\n{isPending ? (\n<IconLoader2 className=\"size-4 animate-spin\" />\n<IconUpload className=\"size-4\" />\n</Button>\n</TooltipTrigger>\n<TooltipContent>Upload</TooltipContent>\n</Tooltip>\nonClick={() => handleRetry(item)}\n<TooltipContent>Retry</TooltipContent>\nonClick={() => removeFile(item.file)}\nclassName=\"size-8 rounded-lg text-muted-foreground hover:text-destructive hover:bg-destructive/10 shrink-0\"\n<IconX className=\"size-4\" />\n<TooltipContent>Remove</TooltipContent>\n))}\n              </div>\n            </div>  );\n}\n","ops":[{"diffOp":{"equal":{"range":[0,23]}}},{"equalLines":{"line_count":34}},{"diffOp":{"equal":{"range":[23,92]}}},{"diffOp":{"delete":{"range":[23,25]}}},{"diffOp":{"equal":{"range":[92,194]}}},{"diffOp":{"delete":{"range":[23,25]}}},{"diffOp":{"equal":{"range":[194,331]}}},{"diffOp":{"delete":{"range":[23,25]}}},{"diffOp":{"equal":{"range":[331,462]}}},{"diffOp":{"delete":{"range":[23,25]}}},{"diffOp":{"equal":{"range":[462,604]}}},{"equalLines":{"line_count":229}},{"diffOp":{"equal":{"range":[604,932]}}},{"diffOp":{"delete":{"range":[932,946]}}},{"diffOp":{"insert":{"range":[946,962]}}},{"diffOp":{"equal":{"range":[962,993]}}},{"diffOp":{"delete":{"range":[946,962]}}},{"diffOp":{"insert":{"range":[993,1011]}}},{"diffOp":{"equal":{"range":[1011,1016]}}},{"diffOp":{"delete":{"range":[993,1011]}}},{"diffOp":{"insert":{"range":[1016,1036]}}},{"diffOp":{"equal":{"range":[1036,1082]}}},{"diffOp":{"delete":{"range":[1016,1034]}}},{"diffOp":{"insert":{"range":[1016,1036]}}},{"diffOp":{"equal":{"range":[1082,1204]}}},{"diffOp":{"delete":{"range":[1016,1032]}}},{"diffOp":{"insert":{"range":[1016,1034]}}},{"diffOp":{"equal":{"range":[1204,1206]}}},{"diffOp":{"delete":{"range":[1016,1034]}}},{"diffOp":{"insert":{"range":[1016,1036]}}},{"diffOp":{"equal":{"range":[1206,1293]}}},{"diffOp":{"delete":{"range":[1016,1036]}}},{"diffOp":{"insert":{"range":[1293,1315]}}},{"diffOp":{"equal":{"range":[1315,1333]}}},{"diffOp":{"delete":{"range":[1293,1315]}}},{"diffOp":{"insert":{"range":[1333,1357]}}},{"diffOp":{"equal":{"range":[1357,1364]}}},{"diffOp":{"delete":{"range":[1333,1357]}}},{"diffOp":{"insert":{"range":[1364,1390]}}},{"diffOp":{"equal":{"range":[1390,1409]}}},{"diffOp":{"delete":{"range":[1364,1388]}}},{"diffOp":{"insert":{"range":[1364,1390]}}},{"diffOp":{"equal":{"range":[1409,1430]}}},{"diffOp":{"delete":{"range":[1364,1388]}}},{"diffOp":{"insert":{"range":[1364,1390]}}},{"diffOp":{"equal":{"range":[1430,1435]}}},{"diffOp":{"delete":{"range":[1364,1388]}}},{"diffOp":{"insert":{"range":[1364,1390]}}},{"diffOp":{"equal":{"range":[1435,1447]}}},{"diffOp":{"delete":{"range":[1364,1388]}}},{"diffOp":{"insert":{"range":[1364,1390]}}},{"diffOp":{"equal":{"range":[1447,1472]}}},{"diffOp":{"delete":{"range":[1364,1386]}}},{"diffOp":{"insert":{"range":[1364,1388]}}},{"diffOp":{"equal":{"range":[1472,1475]}}},{"diffOp":{"delete":{"range":[1364,1384]}}},{"diffOp":{"insert":{"range":[1364,1386]}}},{"diffOp":{"equal":{"range":[1475,1481]}}},{"diffOp":{"delete":{"range":[1364,1386]}}},{"diffOp":{"insert":{"range":[1364,1388]}}},{"diffOp":{"equal":{"range":[1481,1546]}}},{"diffOp":{"delete":{"range":[1364,1388]}}},{"diffOp":{"insert":{"range":[1364,1390]}}},{"diffOp":{"equal":{"range":[1546,1614]}}},{"diffOp":{"delete":{"range":[1364,1386]}}},{"diffOp":{"insert":{"range":[1364,1388]}}},{"diffOp":{"equal":{"range":[1614,1621]}}},{"diffOp":{"delete":{"range":[1364,1384]}}},{"diffOp":{"insert":{"range":[1364,1386]}}},{"diffOp":{"equal":{"range":[1621,1624]}}},{"diffOp":{"delete":{"range":[1364,1382]}}},{"diffOp":{"insert":{"range":[1364,1384]}}},{"diffOp":{"equal":{"range":[1624,1632]}}},{"diffOp":{"delete":{"range":[1364,1382]}}},{"diffOp":{"insert":{"range":[1364,1384]}}},{"diffOp":{"equal":{"range":[1632,1693]}}},{"diffOp":{"delete":{"range":[1364,1384]}}},{"diffOp":{"insert":{"range":[1364,1386]}}},{"diffOp":{"equal":{"range":[1693,1719]}}},{"diffOp":{"delete":{"range":[1364,1386]}}},{"diffOp":{"insert":{"range":[1364,1388]}}},{"diffOp":{"equal":{"range":[1719,1721]}}},{"diffOp":{"delete":{"range":[23,24]}}},{"diffOp":{"insert":{"range":[1721,1748]}}},{"diffOp":{"equal":{"range":[1748,1804]}}},{"diffOp":{"delete":{"range":[23,24]}}},{"diffOp":{"insert":{"range":[1721,1748]}}},{"diffOp":{"equal":{"range":[1804,1826]}}},{"diffOp":{"delete":{"range":[1204,1205]}}},{"diffOp":{"equal":{"range":[1721,1746]}}},{"diffOp":{"insert":{"range":[1826,1854]}}},{"diffOp":{"equal":{"range":[1854,1891]}}},{"diffOp":{"delete":{"range":[1364,1386]}}},{"diffOp":{"insert":{"range":[1364,1388]}}},{"diffOp":{"equal":{"range":[1891,1896]}}},{"diffOp":{"delete":{"range":[1364,1386]}}},{"diffOp":{"insert":{"range":[1364,1388]}}},{"diffOp":{"equal":{"range":[1896,1958]}}},{"diffOp":{"delete":{"range":[1364,1388]}}},{"diffOp":{"insert":{"range":[1364,1390]}}},{"diffOp":{"equal":{"range":[1958,2005]}}},{"diffOp":{"delete":{"range":[1364,1386]}}},{"diffOp":{"insert":{"range":[1364,1388]}}},{"diffOp":{"equal":{"range":[1891,1896]}}},{"diffOp":{"delete":{"range":[1364,1384]}}},{"diffOp":{"insert":{"range":[1364,1386]}}},{"diffOp":{"equal":{"range":[1624,1632]}}},{"diffOp":{"delete":{"range":[1364,1384]}}},{"diffOp":{"insert":{"range":[1364,1386]}}},{"diffOp":{"equal":{"range":[2005,2059]}}},{"diffOp":{"delete":{"range":[1364,1386]}}},{"diffOp":{"insert":{"range":[1364,1388]}}},{"diffOp":{"equal":{"range":[2059,2079]}}},{"diffOp":{"delete":{"range":[1364,1388]}}},{"diffOp":{"insert":{"range":[1364,1390]}}},{"diffOp":{"equal":{"range":[2079,2086]}}},{"diffOp":{"delete":{"range":[1364,1390]}}},{"diffOp":{"insert":{"range":[2086,2114]}}},{"diffOp":{"equal":{"range":[2114,2134]}}},{"diffOp":{"delete":{"range":[2086,2112]}}},{"diffOp":{"insert":{"range":[2086,2114]}}},{"diffOp":{"equal":{"range":[2134,2249]}}},{"diffOp":{"delete":{"range":[2086,2110]}}},{"diffOp":{"insert":{"range":[2086,2112]}}},{"diffOp":{"equal":{"range":[1826,1828]}}},{"diffOp":{"delete":{"range":[2086,2112]}}},{"diffOp":{"insert":{"range":[2086,2114]}}},{"diffOp":{"equal":{"range":[2249,2282]}}},{"diffOp":{"delete":{"range":[2086,2112]}}},{"diffOp":{"insert":{"range":[2086,2114]}}},{"diffOp":{"equal":{"range":[2282,2348]}}},{"equalLines":{"line_count":7}},{"diffOp":{"equal":{"range":[2348,2410]}}},{"diffOp":{"delete":{"range":[2348,2368]}}},{"diffOp":{"insert":{"range":[2348,2370]}}},{"diffOp":{"equal":{"range":[1624,1632]}}},{"diffOp":{"delete":{"range":[2348,2368]}}},{"diffOp":{"insert":{"range":[2348,2370]}}},{"diffOp":{"equal":{"range":[2410,2433]}}},{"diffOp":{"delete":{"range":[2348,2370]}}},{"diffOp":{"insert":{"range":[2348,2372]}}},{"diffOp":{"equal":{"range":[2433,2484]}}},{"diffOp":{"delete":{"range":[2348,2370]}}},{"diffOp":{"insert":{"range":[2348,2372]}}},{"diffOp":{"equal":{"range":[2484,2553]}}},{"diffOp":{"delete":{"range":[2348,2372]}}},{"diffOp":{"insert":{"range":[2348,2374]}}},{"diffOp":{"equal":{"range":[1011,1016]}}},{"diffOp":{"delete":{"range":[2348,2374]}}},{"diffOp":{"insert":{"range":[2086,2114]}}},{"diffOp":{"equal":{"range":[2553,2603]}}},{"diffOp":{"delete":{"range":[2086,2114]}}},{"diffOp":{"insert":{"range":[2603,2633]}}},{"diffOp":{"equal":{"range":[2633,2644]}}},{"diffOp":{"delete":{"range":[2603,2633]}}},{"diffOp":{"insert":{"range":[2644,2676]}}},{"diffOp":{"equal":{"range":[2676,2695]}}},{"diffOp":{"delete":{"range":[2644,2674]}}},{"diffOp":{"insert":{"range":[2644,2676]}}},{"diffOp":{"equal":{"range":[2695,2719]}}},{"diffOp":{"delete":{"range":[2644,2676]}}},{"diffOp":{"insert":{"range":[2719,2753]}}},{"diffOp":{"equal":{"range":[2753,2770]}}},{"diffOp":{"delete":{"range":[2719,2751]}}},{"diffOp":{"insert":{"range":[2719,2753]}}},{"diffOp":{"equal":{"range":[2770,2799]}}},{"diffOp":{"delete":{"range":[2348,2374]}}},{"diffOp":{"insert":{"range":[2719,2747]}}},{"diffOp":{"equal":{"range":[2799,2803]}}},{"diffOp":{"delete":{"range":[2348,2374]}}},{"diffOp":{"insert":{"range":[2719,2747]}}},{"diffOp":{"equal":{"range":[2803,2812]}}},{"diffOp":{"delete":{"range":[2719,2747]}}},{"diffOp":{"insert":{"range":[2719,2749]}}},{"diffOp":{"equal":{"range":[2812,2864]}}},{"diffOp":{"delete":{"range":[2348,2374]}}},{"diffOp":{"insert":{"range":[2719,2747]}}},{"diffOp":{"equal":{"range":[2864,2867]}}},{"diffOp":{"delete":{"range":[2348,2372]}}},{"diffOp":{"insert":{"range":[2348,2374]}}},{"diffOp":{"equal":{"range":[1472,1475]}}},{"diffOp":{"delete":{"range":[2348,2370]}}},{"diffOp":{"insert":{"range":[2348,2372]}}},{"diffOp":{"equal":{"range":[1624,1631]}}},{"diffOp":{"delete":{"range":[2348,2368]}}},{"diffOp":{"insert":{"range":[2348,2370]}}},{"diffOp":{"equal":{"range":[2867,2871]}}},{"diffOp":{"delete":{"range":[2348,2368]}}},{"diffOp":{"insert":{"range":[2348,2370]}}},{"diffOp":{"equal":{"range":[2871,2888]}}},{"diffOp":{"delete":{"range":[2348,2370]}}},{"diffOp":{"insert":{"range":[2348,2372]}}},{"diffOp":{"equal":{"range":[2888,2945]}}},{"diffOp":{"delete":{"range":[2348,2372]}}},{"diffOp":{"insert":{"range":[2348,2374]}}},{"diffOp":{"equal":{"range":[2945,2958]}}},{"diffOp":{"delete":{"range":[2348,2370]}}},{"diffOp":{"insert":{"range":[2348,2372]}}},{"diffOp":{"equal":{"range":[1891,1896]}}},{"diffOp":{"delete":{"range":[2348,2368]}}},{"diffOp":{"insert":{"range":[2348,2370]}}},{"diffOp":{"equal":{"range":[2867,2870]}}},{"diffOp":{"delete":{"range":[2348,2366]}}},{"diffOp":{"insert":{"range":[2348,2368]}}},{"diffOp":{"equal":{"range":[1624,1632]}}},{"diffOp":{"delete":{"range":[2348,2366]}}},{"diffOp":{"insert":{"range":[2348,2368]}}},{"diffOp":{"equal":{"range":[2958,3017]}}},{"diffOp":{"delete":{"range":[2348,2368]}}},{"diffOp":{"insert":{"range":[2348,2370]}}},{"diffOp":{"equal":{"range":[3017,3053]}}},{"diffOp":{"delete":{"range":[2348,2370]}}},{"diffOp":{"insert":{"range":[2348,2372]}}},{"diffOp":{"equal":{"range":[3053,3063]}}},{"diffOp":{"delete":{"range":[2348,2372]}}},{"diffOp":{"insert":{"range":[2348,2374]}}},{"diffOp":{"equal":{"range":[3063,3088]}}},{"diffOp":{"delete":{"range":[2348,2374]}}},{"diffOp":{"insert":{"range":[2719,2747]}}},{"diffOp":{"equal":{"range":[3088,3096]}}},{"diffOp":{"delete":{"range":[2719,2747]}}},{"diffOp":{"insert":{"range":[2719,2749]}}},{"diffOp":{"equal":{"range":[3096,3131]}}},{"diffOp":{"delete":{"range":[2719,2747]}}},{"diffOp":{"insert":{"range":[2719,2749]}}},{"diffOp":{"equal":{"range":[3131,3152]}}},{"diffOp":{"delete":{"range":[2719,2747]}}},{"diffOp":{"insert":{"range":[2719,2749]}}},{"diffOp":{"equal":{"range":[3152,3164]}}},{"diffOp":{"delete":{"range":[2719,2747]}}},{"diffOp":{"insert":{"range":[2719,2749]}}},{"diffOp":{"equal":{"range":[3164,3180]}}},{"diffOp":{"delete":{"range":[2719,2747]}}},{"diffOp":{"insert":{"range":[2719,2749]}}},{"diffOp":{"equal":{"range":[3180,3252]}}},{"diffOp":{"delete":{"range":[2348,2374]}}},{"diffOp":{"insert":{"range":[2719,2747]}}},{"diffOp":{"equal":{"range":[1826,1828]}}},{"diffOp":{"delete":{"range":[2719,2747]}}},{"diffOp":{"insert":{"range":[2719,2749]}}},{"diffOp":{"equal":{"range":[3252,3267]}}},{"diffOp":{"delete":{"range":[2719,2749]}}},{"diffOp":{"insert":{"range":[2719,2751]}}},{"diffOp":{"equal":{"range":[3267,3315]}}},{"diffOp":{"delete":{"range":[2719,2747]}}},{"diffOp":{"insert":{"range":[2719,2749]}}},{"diffOp":{"equal":{"range":[1475,1481]}}},{"diffOp":{"delete":{"range":[2719,2749]}}},{"diffOp":{"insert":{"range":[2719,2751]}}},{"diffOp":{"equal":{"range":[3315,3349]}}},{"diffOp":{"delete":{"range":[2719,2747]}}},{"diffOp":{"insert":{"range":[2719,2749]}}},{"diffOp":{"equal":{"range":[2867,2870]}}},{"diffOp":{"delete":{"range":[2348,2374]}}},{"diffOp":{"insert":{"range":[2719,2747]}}},{"diffOp":{"equal":{"range":[3349,3359]}}},{"diffOp":{"delete":{"range":[2348,2372]}}},{"diffOp":{"insert":{"range":[2348,2374]}}},{"diffOp":{"equal":{"range":[3359,3377]}}},{"diffOp":{"delete":{"range":[2348,2372]}}},{"diffOp":{"insert":{"range":[2348,2374]}}},{"diffOp":{"equal":{"range":[3377,3417]}}},{"diffOp":{"delete":{"range":[2348,2370]}}},{"diffOp":{"insert":{"range":[2348,2372]}}},{"diffOp":{"equal":{"range":[3417,3428]}}},{"diffOp":{"delete":{"range":[2348,2368]}}},{"diffOp":{"insert":{"range":[2348,2370]}}},{"diffOp":{"equal":{"range":[2867,2871]}}},{"diffOp":{"delete":{"range":[2348,2368]}}},{"diffOp":{"insert":{"range":[2348,2370]}}},{"diffOp":{"equal":{"range":[2871,2888]}}},{"diffOp":{"delete":{"range":[2348,2370]}}},{"diffOp":{"insert":{"range":[2348,2372]}}},{"diffOp":{"equal":{"range":[3053,3063]}}},{"diffOp":{"delete":{"range":[2348,2372]}}},{"diffOp":{"insert":{"range":[2348,2374]}}},{"diffOp":{"equal":{"range":[3063,3088]}}},{"diffOp":{"delete":{"range":[2348,2374]}}},{"diffOp":{"insert":{"range":[2719,2747]}}},{"diffOp":{"equal":{"range":[3088,3096]}}},{"diffOp":{"delete":{"range":[2719,2747]}}},{"diffOp":{"insert":{"range":[2719,2749]}}},{"diffOp":{"equal":{"range":[3428,3462]}}},{"diffOp":{"delete":{"range":[2719,2747]}}},{"diffOp":{"insert":{"range":[2719,2749]}}},{"diffOp":{"equal":{"range":[3131,3152]}}},{"diffOp":{"delete":{"range":[2719,2747]}}},{"diffOp":{"insert":{"range":[2719,2749]}}},{"diffOp":{"equal":{"range":[3152,3164]}}},{"diffOp":{"delete":{"range":[2719,2747]}}},{"diffOp":{"insert":{"range":[2719,2749]}}},{"diffOp":{"equal":{"range":[3164,3180]}}},{"diffOp":{"delete":{"range":[2719,2747]}}},{"diffOp":{"insert":{"range":[2719,2749]}}},{"diffOp":{"equal":{"range":[3180,3252]}}},{"diffOp":{"delete":{"range":[2348,2374]}}},{"diffOp":{"insert":{"range":[2719,2747]}}},{"diffOp":{"equal":{"range":[1826,1828]}}},{"diffOp":{"delete":{"range":[2719,2747]}}},{"diffOp":{"insert":{"range":[2719,2749]}}},{"diffOp":{"equal":{"range":[3315,3349]}}},{"diffOp":{"delete":{"range":[2348,2374]}}},{"diffOp":{"insert":{"range":[2719,2747]}}},{"diffOp":{"equal":{"range":[3349,3359]}}},{"diffOp":{"delete":{"range":[2348,2372]}}},{"diffOp":{"insert":{"range":[2348,2374]}}},{"diffOp":{"equal":{"range":[3359,3377]}}},{"diffOp":{"delete":{"range":[2348,2372]}}},{"diffOp":{"insert":{"range":[2348,2374]}}},{"diffOp":{"equal":{"range":[3462,3501]}}},{"diffOp":{"delete":{"range":[2348,2370]}}},{"diffOp":{"insert":{"range":[2348,2372]}}},{"diffOp":{"equal":{"range":[3417,3428]}}},{"diffOp":{"delete":{"range":[2348,2368]}}},{"diffOp":{"insert":{"range":[2348,2370]}}},{"diffOp":{"equal":{"range":[2867,2871]}}},{"diffOp":{"delete":{"range":[2348,2368]}}},{"diffOp":{"insert":{"range":[2348,2370]}}},{"diffOp":{"equal":{"range":[3053,3063]}}},{"diffOp":{"delete":{"range":[2348,2370]}}},{"diffOp":{"insert":{"range":[2348,2372]}}},{"diffOp":{"equal":{"range":[3063,3088]}}},{"diffOp":{"delete":{"range":[2348,2372]}}},{"diffOp":{"insert":{"range":[2348,2374]}}},{"diffOp":{"equal":{"range":[3088,3096]}}},{"diffOp":{"delete":{"range":[2348,2374]}}},{"diffOp":{"insert":{"range":[2719,2747]}}},{"diffOp":{"equal":{"range":[3501,3539]}}},{"diffOp":{"delete":{"range":[2348,2374]}}},{"diffOp":{"insert":{"range":[2719,2747]}}},{"diffOp":{"equal":{"range":[3164,3180]}}},{"diffOp":{"delete":{"range":[2348,2374]}}},{"diffOp":{"insert":{"range":[2719,2747]}}},{"diffOp":{"equal":{"range":[3152,3164]}}},{"diffOp":{"delete":{"range":[2348,2374]}}},{"diffOp":{"insert":{"range":[2719,2747]}}},{"diffOp":{"equal":{"range":[3539,3647]}}},{"diffOp":{"delete":{"range":[2348,2372]}}},{"diffOp":{"insert":{"range":[2348,2374]}}},{"diffOp":{"equal":{"range":[1826,1828]}}},{"diffOp":{"delete":{"range":[2348,2374]}}},{"diffOp":{"insert":{"range":[2719,2747]}}},{"diffOp":{"equal":{"range":[3647,3676]}}},{"diffOp":{"delete":{"range":[2348,2372]}}},{"diffOp":{"insert":{"range":[2348,2374]}}},{"diffOp":{"equal":{"range":[3349,3359]}}},{"diffOp":{"delete":{"range":[2348,2370]}}},{"diffOp":{"insert":{"range":[2348,2372]}}},{"diffOp":{"equal":{"range":[3359,3377]}}},{"diffOp":{"delete":{"range":[2348,2370]}}},{"diffOp":{"insert":{"range":[2348,2372]}}},{"diffOp":{"equal":{"range":[3676,3716]}}},{"diffOp":{"delete":{"range":[2348,2368]}}},{"diffOp":{"insert":{"range":[2348,2370]}}},{"diffOp":{"equal":{"range":[3417,3428]}}},{"diffOp":{"delete":{"range":[2348,2366]}}},{"diffOp":{"insert":{"range":[2348,2368]}}},{"diffOp":{"equal":{"range":[1624,1631]}}},{"diffOp":{"delete":{"range":[2348,2364]}}},{"diffOp":{"insert":{"range":[2348,2366]}}},{"diffOp":{"equal":{"range":[1624,1631]}}},{"diffOp":{"delete":{"range":[2348,2362]}}},{"diffOp":{"insert":{"range":[2348,2364]}}},{"diffOp":{"equal":{"range":[3716,3759]}}},{"equalLines":{"line_count":4}},{"diffOp":{"equal":{"range":[3759,3766]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\medias\\components\\image-uploader.tsx"},"span":null,"sourceCode":"\"use client\";\n\nimport {\n  IconAlertCircle,\n  IconCheck,\n  IconFileDescription,\n  IconLoader2,\n  IconUpload,\n  IconX,\n} from \"@tabler/icons-react\";\nimport Image from \"next/image\";\nimport { useCallback, useRef, useState, useTransition } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { uploadImageAction } from \"../medias.actions\";\n\ninterface ImageFile {\n  file: File;\n  preview: string;\n  progress: number;\n  error: string | null;\n  uploaded: boolean;\n}\n\ninterface ImageUploaderProps {\n  maxSize?: number; // in MB\n}\n\n// Abbreviate long filenames: max 12 characters total\n// \"very_long_filename.png\" -> \"very...png\"\nfunction abbreviateFilename(name: string): string {\n  const maxLength = 12;\n  if (name.length <= maxLength) return name;\n  \n  const lastDot = name.lastIndexOf(\".\");\n  const extension = lastDot > 0 ? name.slice(lastDot) : \"\";\n  \n  // Calculate how many chars we can use from the name part\n  const availableForName = maxLength - extension.length - 3; // 3 for \"...\"\n  \n  if (availableForName <= 0) {\n    // If extension is too long, just truncate everything\n    return name.slice(0, maxLength);\n  }\n  \n  const nameWithoutExt = lastDot > 0 ? name.slice(0, lastDot) : name;\n  return nameWithoutExt.slice(0, availableForName) + \"...\" + extension;\n}\n\nexport function ImageUploader({ maxSize = 3 }: ImageUploaderProps) {\n  const [isDragging, setIsDragging] = useState(false);\n  const [uploadedFiles, setUploadedFiles] = useState<ImageFile[]>([]);\n  const [isPending, startTransition] = useTransition();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const validateFile = useCallback(\n    (file: File) => {\n      if (!file.type.startsWith(\"image/\")) {\n        return \"Only image files are allowed\";\n      }\n      if (file.size > maxSize * 1024 * 1024) {\n        return `File size must be less than ${maxSize}MB`;\n      }\n      return null;\n    },\n    [maxSize],\n  );\n\n  const handleFiles = useCallback(\n    (files: FileList) => {\n      const fileArray = Array.from(files);\n      fileArray.forEach((file) => {\n        const error = validateFile(file);\n        if (error) {\n          setUploadedFiles((prev) => [\n            ...prev,\n            {\n              file,\n              preview: \"\",\n              progress: 0,\n              error,\n              uploaded: false,\n            },\n          ]);\n          return;\n        }\n\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          const dataUrl = e.target?.result as string;\n          setUploadedFiles((prev) => [\n            ...prev,\n            {\n              file,\n              preview: dataUrl,\n              progress: 0,\n              error: null,\n              uploaded: false,\n            },\n          ]);\n        };\n        reader.readAsDataURL(file);\n      });\n    },\n    [validateFile],\n  );\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n    if (e.dataTransfer.files) {\n      handleFiles(e.dataTransfer.files);\n    }\n  };\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(true);\n  };\n\n  const handleDragLeave = () => {\n    setIsDragging(false);\n  };\n\n  const handleFileInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files) {\n      handleFiles(e.target.files);\n      e.target.value = \"\";\n    }\n  };\n\n  const handleUpload = (imageFile: ImageFile) => {\n    startTransition(async () => {\n      try {\n        const result = await uploadImageAction(imageFile.file);\n        if (result.success) {\n          setUploadedFiles((prev) =>\n            prev.map((f) =>\n              f.file === imageFile.file\n                ? { ...f, progress: 100, uploaded: true }\n                : f,\n            ),\n          );\n\n          // Remove from list after 2 seconds and trigger complete callback\n          setTimeout(() => {\n            setUploadedFiles((prev) => {\n              const updated = prev.filter((f) => f.file !== imageFile.file);\n              return updated;\n            });\n          }, 2000);\n        } else {\n          setUploadedFiles((prev) =>\n            prev.map((f) =>\n              f.file === imageFile.file ? { ...f, error: result.error } : f,\n            ),\n          );\n        }\n      } catch (error) {\n        setUploadedFiles((prev) =>\n          prev.map((f) =>\n            f.file === imageFile.file\n              ? {\n                  ...f,\n                  error:\n                    error instanceof Error ? error.message : \"Failed to upload\",\n                }\n              : f,\n          ),\n        );\n      }\n    });\n  };\n\n  const handleRetry = (imageFile: ImageFile) => {\n    // Reset error state and progress\n    setUploadedFiles((prev) =>\n      prev.map((f) =>\n        f.file === imageFile.file ? { ...f, error: null, progress: 0 } : f,\n      ),\n    );\n    // Start upload\n    handleUpload(imageFile);\n  };\n\n  const removeFile = (file: File) => {\n    setUploadedFiles((prev) => prev.filter((f) => f.file !== file));\n  };\n\n  const clearAllFiles = () => {\n    setUploadedFiles([]);\n  };\n\n  return (\n    <TooltipProvider>\n      <div className=\"space-y-6\">\n        {/* Drop Zone */}\n        <button\n          type=\"button\"\n          onDrop={handleDrop}\n          onDragOver={handleDragOver}\n          onDragLeave={handleDragLeave}\n          onClick={() => fileInputRef.current?.click()}\n          className={`relative w-full rounded-2xl border-2 border-dashed transition-all cursor-pointer p-10 text-center group ${\n            isDragging\n              ? \"border-primary bg-primary/5 ring-4 ring-primary/5\"\n              : \"border-muted-foreground/20 hover:border-primary/40 hover:bg-muted/30\"\n          }`}\n        >\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            multiple\n            accept=\"image/*\"\n            onChange={handleFileInput}\n            disabled={isPending}\n            className=\"hidden\"\n          />\n\n          <div className=\"flex flex-col items-center gap-4\">\n            <div\n              className={`rounded-2xl p-4 transition-colors ${isDragging ? \"bg-primary/20\" : \"bg-muted/60 group-hover:bg-primary/15\"}`}\n            >\n              <IconUpload\n                className={`size-8 transition-colors ${isDragging ? \"text-primary animate-bounce\" : \"text-muted-foreground group-hover:text-primary\"}`}\n              />\n            </div>\n            <div className=\"space-y-1\">\n              <p className=\"text-base font-semibold text-foreground\">\n                {isDragging ? \"Drop to upload\" : \"Click or drag images here\"}\n              </p>\n              <p className=\"text-xs text-muted-foreground\">\n                Supports JPG, PNG, GIF, SVG, WebP (Max {maxSize}MB)\n              </p>\n            </div>\n          </div>\n        </button>\n\n        {uploadedFiles.length > 0 && (\n          <div className=\"space-y-4 max-w-full\">\n            <div className=\"flex items-center justify-between px-1\">\n              <h3 className=\"text-xs font-bold uppercase tracking-wider text-muted-foreground\">\n                Upload Queue ({uploadedFiles.length})\n              </h3>\n              <div className=\"flex gap-2\">\n                {uploadedFiles.some((f) => !f.uploaded && !f.error) && (\n                  <Button\n                    onClick={() => {\n                      const toUpload = uploadedFiles.filter(\n                        (f) => !f.uploaded && !f.error,\n                      );\n                      toUpload.forEach((f) => {\n                        handleUpload(f);\n                      });\n                    }}\n                    disabled={isPending}\n                    size=\"sm\"\n                    variant=\"secondary\"\n                    className=\"h-8 gap-2 text-xs rounded-lg\"\n                  >\n                    <IconUpload className=\"size-3.5\" />\n                    Upload All\n                  </Button>\n                )}\n                <Button\n                  onClick={clearAllFiles}\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"h-8 gap-2 text-xs text-muted-foreground hover:text-destructive rounded-lg\"\n                >\n                  <IconX className=\"size-3.5\" />\n                  Clear All\n                </Button>\n              </div>\n            </div>\n\n            <div className=\"max-h-96 overflow-y-auto pr-2 pb-4 [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-track]:bg-muted/30 [&::-webkit-scrollbar-thumb]:bg-muted-foreground/30 [&::-webkit-scrollbar-thumb]:rounded-full hover:[&::-webkit-scrollbar-thumb]:bg-muted-foreground/50\">\n              <div className=\"grid gap-3\">\n              {uploadedFiles.map((item) => (\n                <div\n                  key={item.file.name + item.file.lastModified}\n                  className=\"group relative flex items-center gap-3 rounded-xl border bg-card p-3 shadow-sm transition-all hover:shadow-md\"\n                >\n                  <div className=\"relative size-16 shrink-0 overflow-hidden rounded-lg bg-muted border\">\n                    {item.preview ? (\n                      <Image\n                        src={item.preview}\n                        alt={item.file.name}\n                        fill\n                        unoptimized\n                        className=\"object-cover\"\n                      />\n                    ) : (\n                      <div className=\"flex h-full w-full items-center justify-center\">\n                        <IconFileDescription className=\"size-6 text-muted-foreground/40\" />\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"flex-1 min-w-0 space-y-1.5 overflow-hidden\">\n                    <div className=\"min-w-0\">\n                      <p className=\"text-sm font-bold truncate leading-none mb-1\" title={item.file.name}>\n                        {abbreviateFilename(item.file.name)}\n                      </p>\n                      <p className=\"text-[10px] font-medium text-muted-foreground\">\n                        {(item.file.size / 1024 / 1024).toFixed(2)} MB\n                      </p>\n                    </div>\n\n                    <div className=\"flex items-center gap-1.5 flex-wrap\">\n                      {item.uploaded && (\n                        <Badge\n                          variant=\"secondary\"\n                          className=\"bg-green-500/10 text-green-600 border-green-500/20 gap-1 px-1.5 py-0 h-5 text-[10px] whitespace-nowrap\"\n                        >\n                          <IconCheck className=\"size-3\" />\n                          Done\n                          </Badge>\n                        )}\n                        {item.error && (\n                          <Badge\n                            variant=\"destructive\"\n                            className=\"gap-1 px-1.5 py-0 h-5 text-[10px] whitespace-nowrap\"\n                          >\n                            <IconAlertCircle className=\"size-3\" />\n                            Error\n                          </Badge>\n                        )}\n                    </div>\n\n                    {(item.progress > 0 ||\n                      (isPending && !item.uploaded && !item.error)) && (\n                      <div className=\"h-1.5 w-full overflow-hidden rounded-full bg-muted\">\n                        <div\n                          className={`h-full transition-all duration-500 ${\n                            item.error\n                              ? \"bg-destructive\"\n                              : item.progress === 100\n                                ? \"bg-green-500\"\n                                : \"bg-primary animate-pulse\"\n                          }`}\n                          style={{\n                            width: `${item.progress || (isPending ? 40 : 0)}%`,\n                          }}\n                        />\n                      </div>\n                    )}\n\n                    {item.error && (\n                      <p className=\"text-[10px] font-medium text-destructive\">\n                        {item.error}\n                      </p>\n                    )}\n                  </div>\n\n                  <div className=\"flex items-center gap-1 shrink-0 ml-auto\">\n                    {!item.uploaded && !item.error && (\n                      <Tooltip>\n                        <TooltipTrigger asChild>\n                          <Button\n                            onClick={() => handleUpload(item)}\n                            disabled={isPending}\n                            size=\"icon\"\n                            variant=\"ghost\"\n                            className=\"size-8 rounded-lg text-primary hover:bg-primary/10 shrink-0\"\n                          >\n                            {isPending ? (\n                              <IconLoader2 className=\"size-4 animate-spin\" />\n                            ) : (\n                              <IconUpload className=\"size-4\" />\n                            )}\n                          </Button>\n                        </TooltipTrigger>\n                        <TooltipContent>Upload</TooltipContent>\n                      </Tooltip>\n                    )}\n\n                    {item.error && (\n                      <Tooltip>\n                        <TooltipTrigger asChild>\n                          <Button\n                            onClick={() => handleRetry(item)}\n                            disabled={isPending}\n                            size=\"icon\"\n                            variant=\"ghost\"\n                            className=\"size-8 rounded-lg text-primary hover:bg-primary/10 shrink-0\"\n                          >\n                            <IconUpload className=\"size-4\" />\n                          </Button>\n                        </TooltipTrigger>\n                        <TooltipContent>Retry</TooltipContent>\n                      </Tooltip>\n                    )}\n\n                    <Tooltip>\n                      <TooltipTrigger asChild>\n                        <Button\n                          onClick={() => removeFile(item.file)}\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          className=\"size-8 rounded-lg text-muted-foreground hover:text-destructive hover:bg-destructive/10 shrink-0\"\n                        >\n                          <IconX className=\"size-4\" />\n                        </Button>\n                      </TooltipTrigger>\n                      <TooltipContent>Remove</TooltipContent>\n                    </Tooltip>\n                  </div>\n                </div>\n              ))}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </TooltipProvider>\n  );\n}\n"},"tags":[],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"\"use server\";\n\nimport { validateImageFile } from \"@/lib/file-validation\";\nexport async function listImagesAction(): Promise<ActionResult<MediaFile[]>> {\n\t  \"use cache\";\ncacheTag(\"medias\");\ntry {\n\t\t    const response = await octokit.repos.getContent({\n\t\t\t      owner: githubRepoInfo.owner,\nrepo: githubRepoInfo.repo,\npath: MEDIA_PATH,\n});\n\nif (!Array.isArray(response.data)) {\nreturn { success: true, data: [] };\n}\n\nconst files = response.data as Array<{\nname: string;\npath: string;\nsha: string;\n}>;\nconst imageExtensions = [\".jpg\", \".jpeg\", \".png\", \".gif\", \".webp\"];\nconst imageFiles = files.filter((f) =>\nimageExtensions.some((ext) => f.name.toLowerCase().endsWith(ext)),\n);\n\nconst images: MediaFile[] = imageFiles.map((file) => ({\nid: file.name.split(\".\")[0],\nname: file.name,\npath: file.path,\nurl: `https://raw.githubusercontent.com/${githubRepoInfo.owner}/${githubRepoInfo.repo}/main/${file.path}`,\nuploadedAt: \"\", // Date not available from getContent API\nsha: file.sha,\n}));\n\nreturn {\nsuccess: true,\ndata: images.sort((a, b) => b.uploadedAt.localeCompare(a.uploadedAt)),\n};\n} catch (error: unknown) {\n// Handle 404 gracefully - directory doesn't exist yet\nif (error instanceof Object && \"status\" in error && error.status === 404) {\nconsole.error(\"Error listing images:\", error);\nreturn { success: false, error: \"Failed to list images\" };\n}\n}\n\nexport async function uploadImageAction(\nfile: File,\n): Promise<ActionResult<MediaFile>> {\n// Validate file (MIME type, magic bytes, size, format)\nconst validatedFile = await validateImageFile(file);\n\n// Generate UUID with verified extension\nconst imageId = uuidv4();\nconst fileName = `${imageId}.${validatedFile.format}`;\nconst filePath = `${MEDIA_PATH}/${fileName}`;\n\n// Upload to GitHub\nconst base64Content = validatedFile.buffer.toString(\"base64\");\nawait octokit.repos.createOrUpdateFileContents({\npath: filePath,\nmessage: `Upload image: ${fileName}`,\ncontent: base64Content,\nconst imageUrl = `https://raw.githubusercontent.com/${githubRepoInfo.owner}/${githubRepoInfo.repo}/main/${filePath}`;\nupdateTag(\"medias\");\ndata: {\n\t\t\t\t        id: imageId,\nname: fileName,\nurl: imageUrl,\nuploadedAt: new Date().toISOString(),\nsha: \"\",\n},\n} catch (error) {\nconst message =\nerror instanceof Error ? error.message : \"Failed to upload image\";\nconsole.error(\"Error uploading image:\", message);\nreturn { success: false, error: message };\n}\n}\n\nexport async function deleteImageAction(\n_imageId: string,\nfileName: string,\nsha: string,\n): Promise<ActionResult<void>> {\nawait octokit.repos.deleteFile({\nmessage: `Delete image: ${fileName}`,\nsha,\nreturn { success: true, data: undefined };\nerror instanceof Error ? error.message : \"Failed to delete image\";\nconsole.error(\"Error deleting image:\", message);\n}\n}\n\nexport async function checkMediaUsageAction(\nimageUrl: string,\n): Promise<ActionResult<MediaUsage>> {\nconst result = await listArticlesAction();\nconst articles = result.success ? result.data : [];\n\nconst usedInArticles = articles\n.filter((article) => {\nconst isInCover = article.coverImage === imageUrl;\nconst isInContent = article.content.includes(imageUrl);\nreturn isInCover || isInContent;\n})\n.map((article) => ({\nid: article.id,\ntitle: article.title,\nisUsed: usedInArticles.length > 0,\nusedInArticles,\nerror instanceof Error ? error.message : \"Failed to check media usage\";\nconsole.error(\"Error checking media usage:\", message);\n","ops":[{"diffOp":{"equal":{"range":[0,73]}}},{"equalLines":{"line_count":8}},{"diffOp":{"equal":{"range":[73,153]}}},{"diffOp":{"delete":{"range":[153,154]}}},{"diffOp":{"insert":{"range":[154,156]}}},{"diffOp":{"equal":{"range":[156,169]}}},{"diffOp":{"delete":{"range":[153,154]}}},{"diffOp":{"insert":{"range":[154,156]}}},{"diffOp":{"equal":{"range":[169,189]}}},{"diffOp":{"delete":{"range":[153,154]}}},{"diffOp":{"insert":{"range":[154,156]}}},{"diffOp":{"equal":{"range":[189,195]}}},{"diffOp":{"delete":{"range":[195,197]}}},{"diffOp":{"insert":{"range":[197,201]}}},{"diffOp":{"equal":{"range":[201,251]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[260,289]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[289,316]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[316,334]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[334,339]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[339,376]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[376,412]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[412,415]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[415,454]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[454,468]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[468,482]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[482,495]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[495,499]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[499,567]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[567,606]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[606,673]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[673,677]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[677,733]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[733,762]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[762,779]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[779,796]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[796,903]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[903,961]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[961,976]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[976,982]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[982,991]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[991,1006]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[1006,1077]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[1077,1080]}}},{"diffOp":{"delete":{"range":[251,252]}}},{"diffOp":{"insert":{"range":[254,256]}}},{"diffOp":{"equal":{"range":[1080,1107]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[1107,1162]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[1162,1238]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[376,412]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[412,414]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[1238,1285]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[1285,1344]}}},{"diffOp":{"delete":{"range":[251,252]}}},{"diffOp":{"insert":{"range":[254,256]}}},{"diffOp":{"equal":{"range":[1344,1390]}}},{"diffOp":{"delete":{"range":[251,252]}}},{"diffOp":{"insert":{"range":[254,256]}}},{"diffOp":{"equal":{"range":[1390,1440]}}},{"diffOp":{"delete":{"range":[251,252]}}},{"diffOp":{"insert":{"range":[254,256]}}},{"diffOp":{"equal":{"range":[189,195]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[1440,1496]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[1496,1550]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[1550,1591]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[1591,1617]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[1617,1672]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[1672,1719]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[1719,1739]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[1739,1802]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[1802,1851]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[260,289]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[289,316]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[1851,1867]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[1867,1905]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[1905,1929]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[334,339]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[1929,2047]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[2047,2068]}}},{"diffOp":{"delete":{"range":[251,253]}}},{"diffOp":{"insert":{"range":[254,258]}}},{"diffOp":{"equal":{"range":[982,991]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[991,1006]}}},{"diffOp":{"delete":{"range":[251,254]}}},{"diffOp":{"insert":{"range":[254,260]}}},{"diffOp":{"equal":{"range":[2068,2076]}}},{"diffOp":{"delete":{"range":[2076,2080]}}},{"diffOp":{"insert":{"range":[2080,2088]}}},{"diffOp":{"equal":{"range":[2088,2101]}}},{"diffOp":{"delete":{"range":[2076,2080]}}},{"diffOp":{"insert":{"range":[2080,2088]}}},{"diffOp":{"equal":{"range":[2101,2117]}}},{"diffOp":{"delete":{"range":[2076,2080]}}},{"diffOp":{"insert":{"range":[2080,2088]}}},{"diffOp":{"equal":{"range":[1851,1867]}}},{"diffOp":{"delete":{"range":[2076,2080]}}},{"diffOp":{"insert":{"range":[2080,2088]}}},{"diffOp":{"equal":{"range":[2117,2132]}}},{"diffOp":{"delete":{"range":[2076,2080]}}},{"diffOp":{"insert":{"range":[2080,2088]}}},{"diffOp":{"equal":{"range":[2132,2170]}}},{"diffOp":{"delete":{"range":[2076,2080]}}},{"diffOp":{"insert":{"range":[2080,2088]}}},{"diffOp":{"equal":{"range":[2170,2179]}}},{"diffOp":{"delete":{"range":[2076,2079]}}},{"diffOp":{"insert":{"range":[2080,2086]}}},{"diffOp":{"equal":{"range":[2179,2182]}}},{"diffOp":{"delete":{"range":[2076,2078]}}},{"diffOp":{"insert":{"range":[2080,2084]}}},{"diffOp":{"equal":{"range":[1077,1080]}}},{"diffOp":{"delete":{"range":[2076,2077]}}},{"diffOp":{"insert":{"range":[2080,2082]}}},{"diffOp":{"equal":{"range":[2182,2200]}}},{"diffOp":{"delete":{"range":[2076,2078]}}},{"diffOp":{"insert":{"range":[2080,2084]}}},{"diffOp":{"equal":{"range":[2200,2216]}}},{"diffOp":{"delete":{"range":[2076,2079]}}},{"diffOp":{"insert":{"range":[2080,2086]}}},{"diffOp":{"equal":{"range":[2216,2283]}}},{"diffOp":{"delete":{"range":[2076,2078]}}},{"diffOp":{"insert":{"range":[2080,2084]}}},{"diffOp":{"equal":{"range":[2283,2333]}}},{"diffOp":{"delete":{"range":[2076,2078]}}},{"diffOp":{"insert":{"range":[2080,2084]}}},{"diffOp":{"equal":{"range":[2333,2376]}}},{"diffOp":{"delete":{"range":[2076,2077]}}},{"diffOp":{"insert":{"range":[2080,2082]}}},{"diffOp":{"equal":{"range":[2376,2422]}}},{"diffOp":{"delete":{"range":[2076,2077]}}},{"diffOp":{"insert":{"range":[2080,2082]}}},{"diffOp":{"equal":{"range":[2422,2440]}}},{"diffOp":{"delete":{"range":[2076,2077]}}},{"diffOp":{"insert":{"range":[2080,2082]}}},{"diffOp":{"equal":{"range":[2440,2458]}}},{"diffOp":{"delete":{"range":[2076,2077]}}},{"diffOp":{"insert":{"range":[2080,2082]}}},{"diffOp":{"equal":{"range":[2458,2504]}}},{"diffOp":{"delete":{"range":[2076,2077]}}},{"diffOp":{"insert":{"range":[2080,2082]}}},{"diffOp":{"equal":{"range":[1672,1719]}}},{"diffOp":{"delete":{"range":[2076,2077]}}},{"diffOp":{"insert":{"range":[2080,2082]}}},{"diffOp":{"equal":{"range":[189,195]}}},{"diffOp":{"delete":{"range":[2076,2078]}}},{"diffOp":{"insert":{"range":[2080,2084]}}},{"diffOp":{"equal":{"range":[2504,2537]}}},{"diffOp":{"delete":{"range":[2076,2079]}}},{"diffOp":{"insert":{"range":[2080,2086]}}},{"diffOp":{"equal":{"range":[260,289]}}},{"diffOp":{"delete":{"range":[2076,2079]}}},{"diffOp":{"insert":{"range":[2080,2086]}}},{"diffOp":{"equal":{"range":[289,316]}}},{"diffOp":{"delete":{"range":[2076,2079]}}},{"diffOp":{"insert":{"range":[2080,2086]}}},{"diffOp":{"equal":{"range":[1851,1867]}}},{"diffOp":{"delete":{"range":[2076,2079]}}},{"diffOp":{"insert":{"range":[2080,2086]}}},{"diffOp":{"equal":{"range":[2537,2575]}}},{"diffOp":{"delete":{"range":[2076,2079]}}},{"diffOp":{"insert":{"range":[2080,2086]}}},{"diffOp":{"equal":{"range":[2575,2580]}}},{"diffOp":{"delete":{"range":[2076,2078]}}},{"diffOp":{"insert":{"range":[2080,2084]}}},{"diffOp":{"equal":{"range":[334,338]}}},{"diffOp":{"delete":{"range":[2076,2078]}}},{"diffOp":{"insert":{"range":[2080,2084]}}},{"diffOp":{"equal":{"range":[2047,2068]}}},{"diffOp":{"delete":{"range":[2076,2078]}}},{"diffOp":{"insert":{"range":[2080,2084]}}},{"diffOp":{"equal":{"range":[2580,2623]}}},{"diffOp":{"delete":{"range":[2076,2077]}}},{"diffOp":{"insert":{"range":[2080,2082]}}},{"diffOp":{"equal":{"range":[2182,2200]}}},{"diffOp":{"delete":{"range":[2076,2078]}}},{"diffOp":{"insert":{"range":[2080,2084]}}},{"diffOp":{"equal":{"range":[2200,2216]}}},{"diffOp":{"delete":{"range":[2076,2079]}}},{"diffOp":{"insert":{"range":[2080,2086]}}},{"diffOp":{"equal":{"range":[2623,2690]}}},{"diffOp":{"delete":{"range":[2076,2078]}}},{"diffOp":{"insert":{"range":[2080,2084]}}},{"diffOp":{"equal":{"range":[2690,2739]}}},{"diffOp":{"delete":{"range":[2076,2078]}}},{"diffOp":{"insert":{"range":[2080,2084]}}},{"diffOp":{"equal":{"range":[2333,2376]}}},{"diffOp":{"delete":{"range":[2076,2077]}}},{"diffOp":{"insert":{"range":[2080,2082]}}},{"diffOp":{"equal":{"range":[2739,2789]}}},{"diffOp":{"delete":{"range":[2076,2077]}}},{"diffOp":{"insert":{"range":[2080,2082]}}},{"diffOp":{"equal":{"range":[2789,2846]}}},{"diffOp":{"delete":{"range":[2076,2077]}}},{"diffOp":{"insert":{"range":[2080,2082]}}},{"diffOp":{"equal":{"range":[189,195]}}},{"diffOp":{"delete":{"range":[2076,2078]}}},{"diffOp":{"insert":{"range":[2080,2084]}}},{"diffOp":{"equal":{"range":[2846,2889]}}},{"diffOp":{"delete":{"range":[2076,2078]}}},{"diffOp":{"insert":{"range":[2080,2084]}}},{"diffOp":{"equal":{"range":[2889,2942]}}},{"diffOp":{"delete":{"range":[2076,2078]}}},{"diffOp":{"insert":{"range":[2080,2084]}}},{"diffOp":{"equal":{"range":[2942,2974]}}},{"diffOp":{"delete":{"range":[2076,2079]}}},{"diffOp":{"insert":{"range":[2080,2086]}}},{"diffOp":{"equal":{"range":[2974,2997]}}},{"diffOp":{"delete":{"range":[2076,2080]}}},{"diffOp":{"insert":{"range":[2080,2088]}}},{"diffOp":{"equal":{"range":[2997,3048]}}},{"diffOp":{"delete":{"range":[2076,2080]}}},{"diffOp":{"insert":{"range":[2080,2088]}}},{"diffOp":{"equal":{"range":[3048,3104]}}},{"diffOp":{"delete":{"range":[2076,2080]}}},{"diffOp":{"insert":{"range":[2080,2088]}}},{"diffOp":{"equal":{"range":[3104,3137]}}},{"diffOp":{"delete":{"range":[2076,2079]}}},{"diffOp":{"insert":{"range":[2080,2086]}}},{"diffOp":{"equal":{"range":[3137,3140]}}},{"diffOp":{"delete":{"range":[2076,2079]}}},{"diffOp":{"insert":{"range":[2080,2086]}}},{"diffOp":{"equal":{"range":[3140,3161]}}},{"diffOp":{"delete":{"range":[2076,2080]}}},{"diffOp":{"insert":{"range":[2080,2088]}}},{"diffOp":{"equal":{"range":[3161,3177]}}},{"diffOp":{"delete":{"range":[2076,2080]}}},{"diffOp":{"insert":{"range":[2080,2088]}}},{"diffOp":{"equal":{"range":[3177,3199]}}},{"diffOp":{"delete":{"range":[2076,2079]}}},{"diffOp":{"insert":{"range":[2080,2086]}}},{"diffOp":{"equal":{"range":[976,982]}}},{"diffOp":{"delete":{"range":[2076,2078]}}},{"diffOp":{"insert":{"range":[2080,2084]}}},{"diffOp":{"equal":{"range":[982,991]}}},{"diffOp":{"delete":{"range":[2076,2079]}}},{"diffOp":{"insert":{"range":[2080,2086]}}},{"diffOp":{"equal":{"range":[991,1006]}}},{"diffOp":{"delete":{"range":[2076,2079]}}},{"diffOp":{"insert":{"range":[2080,2086]}}},{"diffOp":{"equal":{"range":[2068,2076]}}},{"diffOp":{"delete":{"range":[2076,2080]}}},{"diffOp":{"insert":{"range":[2080,2088]}}},{"diffOp":{"equal":{"range":[3199,3234]}}},{"diffOp":{"delete":{"range":[2076,2080]}}},{"diffOp":{"insert":{"range":[2080,2088]}}},{"diffOp":{"equal":{"range":[3234,3250]}}},{"diffOp":{"delete":{"range":[2076,2079]}}},{"diffOp":{"insert":{"range":[2080,2086]}}},{"diffOp":{"equal":{"range":[2179,2182]}}},{"diffOp":{"delete":{"range":[2076,2078]}}},{"diffOp":{"insert":{"range":[2080,2084]}}},{"diffOp":{"equal":{"range":[1077,1080]}}},{"diffOp":{"delete":{"range":[2076,2077]}}},{"diffOp":{"insert":{"range":[2080,2082]}}},{"diffOp":{"equal":{"range":[2182,2200]}}},{"diffOp":{"delete":{"range":[2076,2078]}}},{"diffOp":{"insert":{"range":[2080,2084]}}},{"diffOp":{"equal":{"range":[2200,2216]}}},{"diffOp":{"delete":{"range":[2076,2079]}}},{"diffOp":{"insert":{"range":[2080,2086]}}},{"diffOp":{"equal":{"range":[3250,3322]}}},{"diffOp":{"delete":{"range":[2076,2078]}}},{"diffOp":{"insert":{"range":[2080,2084]}}},{"diffOp":{"equal":{"range":[3322,3377]}}},{"diffOp":{"delete":{"range":[2076,2078]}}},{"diffOp":{"insert":{"range":[2080,2084]}}},{"diffOp":{"equal":{"range":[2333,2376]}}},{"diffOp":{"delete":{"range":[2076,2077]}}},{"diffOp":{"insert":{"range":[2080,2082]}}},{"diffOp":{"equal":{"range":[1344,1348]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\medias\\medias.actions.ts"},"span":null,"sourceCode":"\"use server\";\n\nimport { validateImageFile } from \"@/lib/file-validation\";\nimport octokit, { githubRepoInfo } from \"@/lib/octokit\";\nimport { cacheTag, updateTag } from \"next/cache\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { listArticlesAction } from \"../articles/articles.actions\";\nimport type { ActionResult } from \"../shared/shared.types\";\nimport type { MediaFile, MediaUsage } from \"./medias.types\";\n\nconst MEDIA_PATH = githubRepoInfo.MEDIA_PATH;\n\nexport async function listImagesAction(): Promise<ActionResult<MediaFile[]>> {\n\t\"use cache\";\n\tcacheTag(\"medias\");\n\ttry {\n\t\tconst response = await octokit.repos.getContent({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath: MEDIA_PATH,\n\t\t});\n\n\t\tif (!Array.isArray(response.data)) {\n\t\t\treturn { success: true, data: [] };\n\t\t}\n\n\t\tconst files = response.data as Array<{\n\t\t\tname: string;\n\t\t\tpath: string;\n\t\t\tsha: string;\n\t\t}>;\n\t\tconst imageExtensions = [\".jpg\", \".jpeg\", \".png\", \".gif\", \".webp\"];\n\t\tconst imageFiles = files.filter((f) =>\n\t\t\timageExtensions.some((ext) => f.name.toLowerCase().endsWith(ext)),\n\t\t);\n\n\t\tconst images: MediaFile[] = imageFiles.map((file) => ({\n\t\t\tid: file.name.split(\".\")[0],\n\t\t\tname: file.name,\n\t\t\tpath: file.path,\n\t\t\turl: `https://raw.githubusercontent.com/${githubRepoInfo.owner}/${githubRepoInfo.repo}/main/${file.path}`,\n\t\t\tuploadedAt: \"\", // Date not available from getContent API\n\t\t\tsha: file.sha,\n\t\t}));\n\n\t\treturn {\n\t\t\tsuccess: true,\n\t\t\tdata: images.sort((a, b) => b.uploadedAt.localeCompare(a.uploadedAt)),\n\t\t};\n\t} catch (error: unknown) {\n\t\t// Handle 404 gracefully - directory doesn't exist yet\n\t\tif (error instanceof Object && \"status\" in error && error.status === 404) {\n\t\t\treturn { success: true, data: [] };\n\t\t}\n\t\tconsole.error(\"Error listing images:\", error);\n\t\treturn { success: false, error: \"Failed to list images\" };\n\t}\n}\n\nexport async function uploadImageAction(\n\tfile: File,\n): Promise<ActionResult<MediaFile>> {\n\ttry {\n\t\t// Validate file (MIME type, magic bytes, size, format)\n\t\tconst validatedFile = await validateImageFile(file);\n\n\t\t// Generate UUID with verified extension\n\t\tconst imageId = uuidv4();\n\t\tconst fileName = `${imageId}.${validatedFile.format}`;\n\t\tconst filePath = `${MEDIA_PATH}/${fileName}`;\n\n\t\t// Upload to GitHub\n\t\tconst base64Content = validatedFile.buffer.toString(\"base64\");\n\t\tawait octokit.repos.createOrUpdateFileContents({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath: filePath,\n\t\t\tmessage: `Upload image: ${fileName}`,\n\t\t\tcontent: base64Content,\n\t\t});\n\n\t\tconst imageUrl = `https://raw.githubusercontent.com/${githubRepoInfo.owner}/${githubRepoInfo.repo}/main/${filePath}`;\n\t\tupdateTag(\"medias\");\n\t\treturn {\n\t\t\tsuccess: true,\n\t\t\tdata: {\n\t\t\t\tid: imageId,\n\t\t\t\tname: fileName,\n\t\t\t\tpath: filePath,\n\t\t\t\turl: imageUrl,\n\t\t\t\tuploadedAt: new Date().toISOString(),\n\t\t\t\tsha: \"\",\n\t\t\t},\n\t\t};\n\t} catch (error) {\n\t\tconst message =\n\t\t\terror instanceof Error ? error.message : \"Failed to upload image\";\n\t\tconsole.error(\"Error uploading image:\", message);\n\t\treturn { success: false, error: message };\n\t}\n}\n\nexport async function deleteImageAction(\n\t_imageId: string,\n\tfileName: string,\n\tsha: string,\n): Promise<ActionResult<void>> {\n\tconst filePath = `${MEDIA_PATH}/${fileName}`;\n\n\ttry {\n\t\tawait octokit.repos.deleteFile({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath: filePath,\n\t\t\tmessage: `Delete image: ${fileName}`,\n\t\t\tsha,\n\t\t});\n\t\tupdateTag(\"medias\");\n\t\treturn { success: true, data: undefined };\n\t} catch (error) {\n\t\tconst message =\n\t\t\terror instanceof Error ? error.message : \"Failed to delete image\";\n\t\tconsole.error(\"Error deleting image:\", message);\n\t\treturn { success: false, error: message };\n\t}\n}\n\nexport async function checkMediaUsageAction(\n\timageUrl: string,\n): Promise<ActionResult<MediaUsage>> {\n\ttry {\n\t\tconst result = await listArticlesAction();\n\t\tconst articles = result.success ? result.data : [];\n\n\t\tconst usedInArticles = articles\n\t\t\t.filter((article) => {\n\t\t\t\tconst isInCover = article.coverImage === imageUrl;\n\t\t\t\tconst isInContent = article.content.includes(imageUrl);\n\t\t\t\treturn isInCover || isInContent;\n\t\t\t})\n\t\t\t.map((article) => ({\n\t\t\t\tid: article.id,\n\t\t\t\ttitle: article.title,\n\t\t\t}));\n\n\t\treturn {\n\t\t\tsuccess: true,\n\t\t\tdata: {\n\t\t\t\tisUsed: usedInArticles.length > 0,\n\t\t\t\tusedInArticles,\n\t\t\t},\n\t\t};\n\t} catch (error) {\n\t\tconst message =\n\t\t\terror instanceof Error ? error.message : \"Failed to check media usage\";\n\t\tconsole.error(\"Error checking media usage:\", message);\n\t\treturn { success: false, error: message };\n\t}\n}\n"},"tags":[],"source":null},{"category":"assist/source/organizeImports","severity":"error","description":"The imports and exports are not sorted.","message":[{"elements":[],"content":"The imports and exports are not sorted."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Safe fix: Organize Imports (Biome)"}]]},{"diff":{"dictionary":"\"use server\";\n\nimport { validateImageFilecacheTag, updateTag } from \"@/libnext/file-validation\";\nimport octokit,{v4githubRepoInfoasuuidv4 @/lib/octokit\nimport { cacheTag, updateTag } from \"lib/file-validationoctokit,  v4 as\nimport { listArticlesAction } from \"../articles/articles.actions\";\nimport type { ActionResult } from \"../shared/shared.types\";\t}\n}\n","ops":[{"diffOp":{"equal":{"range":[0,13]}}},{"diffOp":{"equal":{"range":[13,24]}}},{"diffOp":{"delete":{"range":[24,41]}}},{"diffOp":{"insert":{"range":[41,50]}}},{"diffOp":{"equal":{"range":[50,51]}}},{"diffOp":{"insert":{"range":[51,61]}}},{"diffOp":{"equal":{"range":[61,69]}}},{"diffOp":{"delete":{"range":[69,74]}}},{"diffOp":{"insert":{"range":[74,78]}}},{"diffOp":{"equal":{"range":[78,79]}}},{"diffOp":{"delete":{"range":[79,94]}}},{"diffOp":{"insert":{"range":[41,46]}}},{"diffOp":{"equal":{"range":[94,96]}}},{"diffOp":{"equal":{"range":[96,104]}}},{"diffOp":{"delete":{"range":[104,112]}}},{"diffOp":{"insert":{"range":[112,113]}}},{"diffOp":{"equal":{"range":[50,51]}}},{"diffOp":{"delete":{"range":[112,113]}}},{"diffOp":{"insert":{"range":[113,115]}}},{"diffOp":{"equal":{"range":[50,51]}}},{"diffOp":{"delete":{"range":[115,129]}}},{"diffOp":{"insert":{"range":[129,131]}}},{"diffOp":{"equal":{"range":[50,51]}}},{"diffOp":{"insert":{"range":[131,138]}}},{"diffOp":{"equal":{"range":[61,69]}}},{"diffOp":{"delete":{"range":[138,151]}}},{"diffOp":{"insert":{"range":[131,135]}}},{"diffOp":{"equal":{"range":[94,96]}}},{"diffOp":{"equal":{"range":[151,161]}}},{"diffOp":{"delete":{"range":[161,180]}}},{"diffOp":{"insert":{"range":[24,41]}}},{"diffOp":{"equal":{"range":[180,189]}}},{"diffOp":{"delete":{"range":[74,78]}}},{"diffOp":{"insert":{"range":[138,139]}}},{"diffOp":{"equal":{"range":[78,79]}}},{"diffOp":{"delete":{"range":[161,166]}}},{"diffOp":{"insert":{"range":[189,208]}}},{"diffOp":{"equal":{"range":[94,96]}}},{"diffOp":{"equal":{"range":[151,159]}}},{"diffOp":{"insert":{"range":[208,217]}}},{"diffOp":{"equal":{"range":[112,113]}}},{"diffOp":{"delete":{"range":[217,223]}}},{"diffOp":{"equal":{"range":[180,181]}}},{"diffOp":{"delete":{"range":[131,137]}}},{"diffOp":{"insert":{"range":[115,129]}}},{"diffOp":{"equal":{"range":[180,189]}}},{"diffOp":{"delete":{"range":[131,135]}}},{"diffOp":{"insert":{"range":[138,151]}}},{"diffOp":{"equal":{"range":[94,96]}}},{"diffOp":{"equal":{"range":[223,350]}}},{"equalLines":{"line_count":149}},{"diffOp":{"equal":{"range":[350,355]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\medias\\medias.actions.ts"},"span":[15,73],"sourceCode":"\"use server\";\n\nimport { validateImageFile } from \"@/lib/file-validation\";\nimport octokit, { githubRepoInfo } from \"@/lib/octokit\";\nimport { cacheTag, updateTag } from \"next/cache\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { listArticlesAction } from \"../articles/articles.actions\";\nimport type { ActionResult } from \"../shared/shared.types\";\nimport type { MediaFile, MediaUsage } from \"./medias.types\";\n\nconst MEDIA_PATH = githubRepoInfo.MEDIA_PATH;\n\nexport async function listImagesAction(): Promise<ActionResult<MediaFile[]>> {\n\t\"use cache\";\n\tcacheTag(\"medias\");\n\ttry {\n\t\tconst response = await octokit.repos.getContent({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath: MEDIA_PATH,\n\t\t});\n\n\t\tif (!Array.isArray(response.data)) {\n\t\t\treturn { success: true, data: [] };\n\t\t}\n\n\t\tconst files = response.data as Array<{\n\t\t\tname: string;\n\t\t\tpath: string;\n\t\t\tsha: string;\n\t\t}>;\n\t\tconst imageExtensions = [\".jpg\", \".jpeg\", \".png\", \".gif\", \".webp\"];\n\t\tconst imageFiles = files.filter((f) =>\n\t\t\timageExtensions.some((ext) => f.name.toLowerCase().endsWith(ext)),\n\t\t);\n\n\t\tconst images: MediaFile[] = imageFiles.map((file) => ({\n\t\t\tid: file.name.split(\".\")[0],\n\t\t\tname: file.name,\n\t\t\tpath: file.path,\n\t\t\turl: `https://raw.githubusercontent.com/${githubRepoInfo.owner}/${githubRepoInfo.repo}/main/${file.path}`,\n\t\t\tuploadedAt: \"\", // Date not available from getContent API\n\t\t\tsha: file.sha,\n\t\t}));\n\n\t\treturn {\n\t\t\tsuccess: true,\n\t\t\tdata: images.sort((a, b) => b.uploadedAt.localeCompare(a.uploadedAt)),\n\t\t};\n\t} catch (error: unknown) {\n\t\t// Handle 404 gracefully - directory doesn't exist yet\n\t\tif (error instanceof Object && \"status\" in error && error.status === 404) {\n\t\t\treturn { success: true, data: [] };\n\t\t}\n\t\tconsole.error(\"Error listing images:\", error);\n\t\treturn { success: false, error: \"Failed to list images\" };\n\t}\n}\n\nexport async function uploadImageAction(\n\tfile: File,\n): Promise<ActionResult<MediaFile>> {\n\ttry {\n\t\t// Validate file (MIME type, magic bytes, size, format)\n\t\tconst validatedFile = await validateImageFile(file);\n\n\t\t// Generate UUID with verified extension\n\t\tconst imageId = uuidv4();\n\t\tconst fileName = `${imageId}.${validatedFile.format}`;\n\t\tconst filePath = `${MEDIA_PATH}/${fileName}`;\n\n\t\t// Upload to GitHub\n\t\tconst base64Content = validatedFile.buffer.toString(\"base64\");\n\t\tawait octokit.repos.createOrUpdateFileContents({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath: filePath,\n\t\t\tmessage: `Upload image: ${fileName}`,\n\t\t\tcontent: base64Content,\n\t\t});\n\n\t\tconst imageUrl = `https://raw.githubusercontent.com/${githubRepoInfo.owner}/${githubRepoInfo.repo}/main/${filePath}`;\n\t\tupdateTag(\"medias\");\n\t\treturn {\n\t\t\tsuccess: true,\n\t\t\tdata: {\n\t\t\t\tid: imageId,\n\t\t\t\tname: fileName,\n\t\t\t\tpath: filePath,\n\t\t\t\turl: imageUrl,\n\t\t\t\tuploadedAt: new Date().toISOString(),\n\t\t\t\tsha: \"\",\n\t\t\t},\n\t\t};\n\t} catch (error) {\n\t\tconst message =\n\t\t\terror instanceof Error ? error.message : \"Failed to upload image\";\n\t\tconsole.error(\"Error uploading image:\", message);\n\t\treturn { success: false, error: message };\n\t}\n}\n\nexport async function deleteImageAction(\n\t_imageId: string,\n\tfileName: string,\n\tsha: string,\n): Promise<ActionResult<void>> {\n\tconst filePath = `${MEDIA_PATH}/${fileName}`;\n\n\ttry {\n\t\tawait octokit.repos.deleteFile({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath: filePath,\n\t\t\tmessage: `Delete image: ${fileName}`,\n\t\t\tsha,\n\t\t});\n\t\tupdateTag(\"medias\");\n\t\treturn { success: true, data: undefined };\n\t} catch (error) {\n\t\tconst message =\n\t\t\terror instanceof Error ? error.message : \"Failed to delete image\";\n\t\tconsole.error(\"Error deleting image:\", message);\n\t\treturn { success: false, error: message };\n\t}\n}\n\nexport async function checkMediaUsageAction(\n\timageUrl: string,\n): Promise<ActionResult<MediaUsage>> {\n\ttry {\n\t\tconst result = await listArticlesAction();\n\t\tconst articles = result.success ? result.data : [];\n\n\t\tconst usedInArticles = articles\n\t\t\t.filter((article) => {\n\t\t\t\tconst isInCover = article.coverImage === imageUrl;\n\t\t\t\tconst isInContent = article.content.includes(imageUrl);\n\t\t\t\treturn isInCover || isInContent;\n\t\t\t})\n\t\t\t.map((article) => ({\n\t\t\t\tid: article.id,\n\t\t\t\ttitle: article.title,\n\t\t\t}));\n\n\t\treturn {\n\t\t\tsuccess: true,\n\t\t\tdata: {\n\t\t\t\tisUsed: usedInArticles.length > 0,\n\t\t\t\tusedInArticles,\n\t\t\t},\n\t\t};\n\t} catch (error) {\n\t\tconst message =\n\t\t\terror instanceof Error ? error.message : \"Failed to check media usage\";\n\t\tconsole.error(\"Error checking media usage:\", message);\n\t\treturn { success: false, error: message };\n\t}\n}\n"},"tags":["fixable"],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"\"use client\";\n\nimport { IconLanguage, IconPlus } from \"@tabler/icons-react\";          Language\n        </Label>\n        <Select\n          value={lang}onValueChange={(value) => setLang(value as \"fr\" | \"en\")}>\n          <SelectTrigger id=\"lang\" className=\"mt-2\">\n            <SelectValue />  );\n}\n","ops":[{"diffOp":{"equal":{"range":[0,76]}}},{"equalLines":{"line_count":117}},{"diffOp":{"equal":{"range":[76,127]}}},{"diffOp":{"delete":{"range":[76,77]}}},{"diffOp":{"insert":{"range":[127,138]}}},{"diffOp":{"equal":{"range":[138,150]}}},{"diffOp":{"delete":{"range":[76,77]}}},{"diffOp":{"insert":{"range":[127,138]}}},{"diffOp":{"equal":{"range":[150,206]}}},{"diffOp":{"insert":{"range":[127,136]}}},{"diffOp":{"equal":{"range":[206,288]}}},{"equalLines":{"line_count":61}},{"diffOp":{"equal":{"range":[288,295]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\posts\\components\\post-editor.tsx"},"span":null,"sourceCode":"\"use client\";\n\nimport { IconLanguage, IconPlus } from \"@tabler/icons-react\";\nimport { useRouter } from \"next/navigation\";\nimport { useEffect, useState, useTransition } from \"react\";\nimport { toast } from \"sonner\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Combobox,\n  ComboboxContent,\n  ComboboxEmpty,\n  ComboboxInput,\n  ComboboxItem,\n  ComboboxList,\n} from \"@/components/ui/combobox\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { listArticlesAction } from \"@/features/articles/articles.actions\";\nimport type { Article } from \"@/features/articles/articles.types\";\nimport { CoverImageSelector } from \"@/features/medias/components/cover-image-selector\";\nimport type { MediaFile } from \"@/features/medias/medias.types\";\nimport {\n  createPostAction,\n  updatePostAction,\n} from \"@/features/posts/posts.actions\";\nimport type { Post } from \"@/features/posts/posts.types\";\n\ninterface PostEditorProps {\n  post?: Post;\n}\n\nexport function PostEditor({ post }: PostEditorProps) {\n  const router = useRouter();\n  const [isPending, startTransition] = useTransition();\n\n  const [title, setTitle] = useState(post?.title || \"\");\n  const [content, setContent] = useState(post?.content || \"\");\n  const [lang, setLang] = useState<\"fr\" | \"en\">(post?.lang || \"fr\");\n  const [article, setArticle] = useState(post?.article || \"\");\n  const [coverImage, setCoverImage] = useState(post?.coverImage || \"\");\n  const [author, setAuthor] = useState(post?.author || \"\");\n  const [articles, setArticles] = useState<Article[]>([]);\n\n  useEffect(() => {\n    listArticlesAction().then((result) => {\n      if (result.success) {\n        setArticles(result.data);\n      }\n    });\n  }, []);\n\n  const handleSave = () => {\n    if (!title.trim() || !content.trim()) {\n      toast.error(\"Title and content are required\");\n      return;\n    }\n\n    startTransition(async () => {\n      const input = {\n        title,\n        content,\n        lang,\n        article: article || undefined,\n        coverImage: coverImage || undefined,\n        author: author || undefined,\n        published: false,\n      };\n\n      const result = post\n        ? await updatePostAction(post.id, {\n            ...input,\n            sha: post.sha!,\n            createdAt: post.createdAt,\n          })\n        : await createPostAction(input);\n\n      if (result.success) {\n        toast.success(post ? \"Post updated\" : \"Post created\");\n        router.push(\"/cms/posts\");\n      } else {\n        toast.error(result.error || \"Failed to save post\");\n      }\n    });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <Label htmlFor=\"title\">Title</Label>\n        <Input\n          id=\"title\"\n          placeholder=\"Post title...\"\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n          className=\"mt-2\"\n        />\n      </div>\n\n      <div>\n        <Label htmlFor=\"author\">Author (Optional)</Label>\n        <Input\n          id=\"author\"\n          placeholder=\"Your name...\"\n          value={author}\n          onChange={(e) => setAuthor(e.target.value)}\n          className=\"mt-2\"\n        />\n      </div>\n\n      <div>\n        <Label htmlFor=\"lang\" className=\"flex items-center gap-2\">\n          <IconLanguage className=\"size-4\" />\n          Language\n        </Label>\n        <Select value={lang} onValueChange={(value) => setLang(value as \"fr\" | \"en\")}>\n          <SelectTrigger id=\"lang\" className=\"mt-2\">\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"fr\">Français</SelectItem>\n            <SelectItem value=\"en\">English</SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n\n      <div>\n        <Label htmlFor=\"content\">Content</Label>\n        <Textarea\n          id=\"content\"\n          placeholder=\"Write your post here...\"\n          value={content}\n          onChange={(e) => setContent(e.target.value)}\n          className=\"mt-2 min-h-64\"\n        />\n      </div>\n\n      <div>\n        <Label htmlFor=\"article\">Related Article (Optional)</Label>\n        <div className=\"mt-2\">\n          <Combobox\n            value={article}\n            onValueChange={(value) => setArticle(value as string)}\n          >\n            <ComboboxInput\n              placeholder=\"Select an article...\"\n              showClear={!!article}\n            />\n            <ComboboxContent>\n              <ComboboxList>\n                <ComboboxEmpty>No articles found</ComboboxEmpty>\n                {articles.map((a) => (\n                  <ComboboxItem key={a.id} value={a.id}>\n                    {a.title}\n                  </ComboboxItem>\n                ))}\n              </ComboboxList>\n            </ComboboxContent>\n          </Combobox>\n        </div>\n      </div>\n\n      <div>\n        <Label htmlFor=\"cover\">Cover Image</Label>\n        <div className=\"mt-2\">\n          <CoverImageSelector\n            selectedImageUrl={coverImage}\n            onSelectImage={(image: MediaFile) => setCoverImage(image.url)}\n          />\n        </div>\n      </div>\n\n      <div className=\"flex gap-3 pt-4\">\n        <Button onClick={handleSave} disabled={isPending} className=\"gap-2\">\n          <IconPlus className=\"size-4\" />\n          {isPending ? \"Saving...\" : post ? \"Update Post\" : \"Create Post\"}\n        </Button>\n      </div>\n    </div>\n  );\n}\n"},"tags":[],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"\"use client\";\n\nimport { IconEye, IconEyeOff, IconLoader2 } from \"@tabler/icons-react\";        <AlertDialogFooter>\n          <AlertDialogCancel>Cancel</AlertDialogCancel>\n          <AlertDialogAction\n            onClick={handleTogglePublish}disabled={isPending}>\n            {isPending ? (\n              <IconLoader2 className=\"mr-2 size-4 animate-spin\" />              <IconEye className=\"mr-2 size-4\" />\n            )}\n            {isPending\n              ? \"Loading...\": isPublished\n                ? \"Unpublish\": \"Publish\"}\n          </AlertDialogAction>\n        </AlertDialogFooter>  );\n}\n","ops":[{"diffOp":{"equal":{"range":[0,86]}}},{"equalLines":{"line_count":83}},{"diffOp":{"equal":{"range":[86,198]}}},{"diffOp":{"delete":{"range":[198,211]}}},{"diffOp":{"insert":{"range":[86,87]}}},{"diffOp":{"equal":{"range":[211,240]}}},{"diffOp":{"delete":{"range":[198,211]}}},{"diffOp":{"insert":{"range":[86,87]}}},{"diffOp":{"equal":{"range":[240,260]}}},{"diffOp":{"delete":{"range":[198,209]}}},{"diffOp":{"equal":{"range":[260,355]}}},{"equalLines":{"line_count":3}},{"diffOp":{"equal":{"range":[355,442]}}},{"diffOp":{"delete":{"range":[442,457]}}},{"diffOp":{"insert":{"range":[86,87]}}},{"diffOp":{"equal":{"range":[457,471]}}},{"diffOp":{"delete":{"range":[442,457]}}},{"diffOp":{"insert":{"range":[86,87]}}},{"diffOp":{"equal":{"range":[471,484]}}},{"diffOp":{"delete":{"range":[484,501]}}},{"diffOp":{"insert":{"range":[86,87]}}},{"diffOp":{"equal":{"range":[501,514]}}},{"diffOp":{"delete":{"range":[484,501]}}},{"diffOp":{"insert":{"range":[86,87]}}},{"diffOp":{"equal":{"range":[514,586]}}},{"equalLines":{"line_count":2}},{"diffOp":{"equal":{"range":[586,593]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\posts\\components\\post-publish-dialog.tsx"},"span":null,"sourceCode":"\"use client\";\n\nimport { IconEye, IconEyeOff, IconLoader2 } from \"@tabler/icons-react\";\nimport type { ReactNode } from \"react\";\nimport { useState, useTransition } from \"react\";\nimport { toast } from \"sonner\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from \"@/components/ui/alert-dialog\";\nimport {\n  publishPostAction,\n  unpublishPostAction,\n} from \"@/features/posts/posts.actions\";\nimport type { Post } from \"@/features/posts/posts.types\";\n\ninterface PostPublishDialogProps {\n  children: ReactNode;\n  post: Post;\n}\n\nexport function PostPublishDialog({ children, post }: PostPublishDialogProps) {\n  const [open, setOpen] = useState(false);\n  const [isPending, startTransition] = useTransition();\n  const isPublished = post.published;\n\n  const handleTogglePublish = () => {\n    startTransition(async () => {\n      try {\n        const result = isPublished\n          ? await unpublishPostAction(post.id, post.sha || \"\", post.createdAt)\n          : await publishPostAction(post.id, post.sha || \"\", post.createdAt);\n\n        if (!result.success) {\n          toast.error(\n            isPublished ? \"Failed to unpublish\" : \"Failed to publish\",\n            {\n              description: result.error,\n            },\n          );\n          return;\n        }\n\n        const status = isPublished ? \"unpublished\" : \"published\";\n        const message = isPublished\n          ? \"Moved back to drafts\"\n          : \"Now live to the public\";\n\n        toast.success(`Post ${status}`, {\n          description: message,\n        });\n        setOpen(false);\n      } catch (error) {\n        const message =\n          error instanceof Error\n            ? error.message\n            : isPublished\n              ? \"Failed to unpublish post\"\n              : \"Failed to publish post\";\n        toast.error(message);\n        console.error(\"Error toggling publish:\", error);\n      }\n    });\n  };\n\n  return (\n    <AlertDialog open={open} onOpenChange={setOpen}>\n      <AlertDialogTrigger asChild>{children}</AlertDialogTrigger>\n      <AlertDialogContent>\n        <AlertDialogHeader>\n          <AlertDialogTitle>\n            {isPublished ? \"Unpublish Post\" : \"Publish Post\"}\n          </AlertDialogTitle>\n          <AlertDialogDescription>\n            {isPublished\n              ? \"This post will no longer be visible to readers.\"\n              : \"This post will be published and visible to readers.\"}\n          </AlertDialogDescription>\n        </AlertDialogHeader>\n        <AlertDialogFooter>\n          <AlertDialogCancel>Cancel</AlertDialogCancel>\n          <AlertDialogAction\n            onClick={handleTogglePublish}\n            disabled={isPending}\n          >\n            {isPending ? (\n              <IconLoader2 className=\"mr-2 size-4 animate-spin\" />\n            ) : isPublished ? (\n              <IconEyeOff className=\"mr-2 size-4\" />\n            ) : (\n              <IconEye className=\"mr-2 size-4\" />\n            )}\n            {isPending\n              ? \"Loading...\"\n              : isPublished\n                ? \"Unpublish\"\n                : \"Publish\"}\n          </AlertDialogAction>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n}\n"},"tags":[],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"\"use server\";\n\nimport type { ActionResult } from \"@/features/shared/shared.types\";import { getCurrentUser } from \"@/lib/user\";\nimport {\n\t  CreatePostSchema,\nUpdatePostSchema,\n} from \"@/lib/validation/post.schema\";\nimport matter from \"gray-matter\";\nasync function fetchLatestSha(path: string): Promise<string | undefined> {\ntry {\n\t\t    const fileData = await octokit.repos.getContent({\n\t\t\t      owner: githubRepoInfo.owner,\nrepo: githubRepoInfo.repo,\npath,\n});\nif (!Array.isArray(fileData.data) && \"sha\" in fileData.data) {\nreturn fileData.data.sha;\n}\n} catch (error) {\nlogger.error(\"Failed to fetch latest file SHA\", error, { path });\nreturn undefined;\n}\n\nfunction createPostObject(\nid: string,\nfrontmatter: PostFrontmatter,\nsha?: string,\n): Post {\nreturn {\nid,\ntitle: frontmatter.title,\ncontent: frontmatter.content,\nlang: frontmatter.lang,\ncreatedAt: frontmatter.createdAt || new Date().toISOString(),\nupdatedAt: frontmatter.updatedAt || new Date().toISOString(),\npublishedAt: frontmatter.publishedDate,\npublished: frontmatter.published,\nauthor: frontmatter.author,\narticle: frontmatter.article,\ncoverImage: frontmatter.coverImage,\nsha,\n};\n}\n\nasync function updateGitHubFile(\npath: string,\ncontent: string,\nmessage: string,\nsha?: string,\n): Promise<string | undefined> {\nconst latestSha = sha ? await fetchLatestSha(path) : sha;\nconst response = await octokit.repos.createOrUpdateFileContents({\nmessage,\ncontent: Buffer.from(content).toString(\"base64\"),\nsha: latestSha || sha,\nupdateTag(\"posts\");\nreturn response.data.content?.sha;\n}\n\nexport async function listPostsAction(): Promise<ActionResult<Post[]>> {\n\"use cache\";\ncacheTag(\"posts\");\nconst response = await octokit.repos.getContent({\npath: POSTS_PATH,\n});\n\nif (!Array.isArray(response.data)) {\nreturn { success: true, data: [] };\n}\n\nconst files = response.data as GitHubFile[];\nconst mdFiles = files.filter((f) => f.name.endsWith(\".md\"));\n\nconst posts: Post[] = await Promise.all(\nmdFiles.map(async (file) => {\n\t\t\t\t        const content = await getPostContentAction(file.path);\nconst frontmatter = parseFrontmatterToPost(content);\nconst id = file.name.replace(\".md\", \"\");\nreturn createPostObject(id, frontmatter, file.sha);\n}),\n);\n\nreturn { success: true, data: posts };\nlogger.error(\"Failed to list posts\", error);\nreturn { success: false, error: createSafeErrorMessage(error) };\n}\n}\n\nasync function getPostContentAction(path: string): Promise<string> {\nif (Array.isArray(response.data)) {\nthrow new Error(\"Path is a directory, not a file\");\nconst fileData = response.data as {\ncontent: string;\nencoding: string;\nconst content = Buffer.from(fileData.content, \"base64\").toString(\"utf-8\");\nreturn content;\n}\n\nfunction parseFrontmatterToPost(content: string): PostFrontmatter {\nconst { data, content: body } = matter(content);\n\nconst frontmatter: PostFrontmatter = {\ntitle: (data.title as string) || \"Untitled\",\ncontent: body.trim(),\npublished: (data.published as boolean) || false,\nlang:\n(data.lang as \"fr\" | \"en\") === \"fr\" || (data.lang as \"fr\" | \"en\") === \"en\"\n? (data.lang as \"fr\" | \"en\")\n: \"en\",\n};\n\nif (data.author) frontmatter.author = data.author as string;\nif (data.article) frontmatter.article = data.article as string;\nif (data.coverImage) frontmatter.coverImage = data.coverImage as string;\nif (data.createdAt) frontmatter.createdAt = data.createdAt as string;\nif (data.updatedAt) frontmatter.updatedAt = data.updatedAt as string;\nif (data.publishedDate)\nfrontmatter.publishedDate = data.publishedDate as string;\n\nreturn frontmatter;\n}\n\nfunction generateFrontmatterText(data: PostFrontmatter): string {\nconst frontmatterObj: Record<string, unknown> = {\ntitle: data.title,\npublished: data.published,\nlang: data.lang,\nif (data.author) frontmatterObj.author = data.author;\nif (data.article) frontmatterObj.article = data.article;\nif (data.coverImage) frontmatterObj.coverImage = data.coverImage;\nif (data.createdAt) frontmatterObj.createdAt = data.createdAt;\nif (data.updatedAt) frontmatterObj.updatedAt = data.updatedAt;\nif (data.publishedDate) frontmatterObj.publishedDate = data.publishedDate;\n\nreturn matter.stringify(data.content, frontmatterObj);\n}\n\nexport async function getPostAction(id: string): Promise<ActionResult<Post>> {\nconst path = `${POSTS_PATH}/${id}.md`;\nconst content = await getPostContentAction(path);\nconst sha = await fetchLatestSha(path);\n\nsuccess: true,\ndata: createPostObject(id, frontmatter, sha),\nlogger.error(\"Failed to get post\", error, { postId: id });\n}\n}\n\nexport async function createPostAction(input: {\ntitle: string;\npublished: boolean;\nlang: \"fr\" | \"en\";\ncoverImage?: string;\narticle?: string;\nauthor?: string;\n}): Promise<ActionResult<boolean>> {\n// Validate using Zod schema\nconst validatedData = CreatePostSchema.parse(input);\n\nconst id = randomUUID();\nconst now = new Date().toISOString();\nconst currentUser = getCurrentUser();\ntitle: validatedData.title,\ncontent: sanitizeMarkdown(validatedData.content),\npublished: validatedData.published,\nlang: validatedData.lang,\nauthor: validatedData.author || currentUser,\narticle: validatedData.article,\ncoverImage: validatedData.coverImage,\ncreatedAt: now,\nupdatedAt: now,\nconst frontmatter_text = generateFrontmatterText(frontmatter);\n\nawait updateGitHubFile(\nfrontmatter_text,\n`Create post: ${validatedData.title}`,\nlogger.info(\"Post created\", { postId: id, title: validatedData.title });\nrefresh();\n\ndata: true,\nlogger.error(\"Failed to create post\", error);\n}\n}\n\nexport async function updatePostAction(\ninput: {\nsha: string;\ncreatedAt: string;\n},\n): Promise<ActionResult<boolean>> {\nconst validatedData = UpdatePostSchema.parse(input);\n\ntitle: validatedData.title ?? input.title,\ncontent: sanitizeMarkdown(validatedData.content ?? input.content),\npublished: validatedData.published ?? input.published,\nlang: validatedData.lang ?? input.lang,\ncreatedAt: input.createdAt,\n`Update post: ${validatedData.title ?? input.title}`,\ninput.sha,\nlogger.info(\"Post updated\", { postId: id });\nlogger.error(\"Failed to update post\", error, { postId: id });\n}\n}\n\nexport async function deletePostAction(\nsha: string,\n): Promise<ActionResult<boolean>> {\nconst latestSha = await fetchLatestSha(path);\n\nawait octokit.repos.deleteFile({\nmessage: `Delete post: ${id}`,\nlogger.info(\"Post deleted\", { postId: id });\nreturn { success: true, data: true };\nlogger.error(\"Failed to delete post\", error, { postId: id });\n}\n}\n\nexport async function publishPostAction(\ncreatedAt: string,\n): Promise<ActionResult<boolean>> {\nconst frontmatter = parseFrontmatterToPost(content);\n\nfrontmatter.published = true;\nfrontmatter.publishedDate = now;\nfrontmatter.createdAt = createdAt;\n\n`Publish post: ${frontmatter.title}`,\nlogger.info(\"Post published\", { postId: id });\nlogger.error(\"Failed to publish post\", error, { postId: id });\n}\n}\n\nexport async function unpublishPostAction(\nfrontmatter.published = false;\n`Unpublish post: ${frontmatter.title}`,\nlogger.info(\"Post unpublished\", { postId: id });\nupdateTag(\"posts\");\n\nlogger.error(\"Failed to unpublish post\", error, { postId: id });\n","ops":[{"diffOp":{"equal":{"range":[0,82]}}},{"equalLines":{"line_count":3}},{"diffOp":{"equal":{"range":[82,136]}}},{"diffOp":{"delete":{"range":[136,137]}}},{"diffOp":{"insert":{"range":[137,139]}}},{"diffOp":{"equal":{"range":[139,157]}}},{"diffOp":{"delete":{"range":[136,137]}}},{"diffOp":{"insert":{"range":[137,139]}}},{"diffOp":{"equal":{"range":[157,247]}}},{"equalLines":{"line_count":5}},{"diffOp":{"equal":{"range":[247,323]}}},{"diffOp":{"delete":{"range":[136,137]}}},{"diffOp":{"insert":{"range":[137,139]}}},{"diffOp":{"equal":{"range":[323,329]}}},{"diffOp":{"delete":{"range":[329,331]}}},{"diffOp":{"insert":{"range":[331,335]}}},{"diffOp":{"equal":{"range":[335,385]}}},{"diffOp":{"delete":{"range":[385,388]}}},{"diffOp":{"insert":{"range":[388,394]}}},{"diffOp":{"equal":{"range":[394,423]}}},{"diffOp":{"delete":{"range":[385,388]}}},{"diffOp":{"insert":{"range":[388,394]}}},{"diffOp":{"equal":{"range":[423,450]}}},{"diffOp":{"delete":{"range":[385,388]}}},{"diffOp":{"insert":{"range":[388,394]}}},{"diffOp":{"equal":{"range":[450,456]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[456,460]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[460,523]}}},{"diffOp":{"delete":{"range":[385,388]}}},{"diffOp":{"insert":{"range":[388,394]}}},{"diffOp":{"equal":{"range":[523,549]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[549,551]}}},{"diffOp":{"delete":{"range":[385,386]}}},{"diffOp":{"insert":{"range":[388,390]}}},{"diffOp":{"equal":{"range":[551,569]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[569,635]}}},{"diffOp":{"delete":{"range":[385,386]}}},{"diffOp":{"insert":{"range":[388,390]}}},{"diffOp":{"equal":{"range":[549,551]}}},{"diffOp":{"delete":{"range":[385,386]}}},{"diffOp":{"insert":{"range":[388,390]}}},{"diffOp":{"equal":{"range":[635,683]}}},{"diffOp":{"delete":{"range":[385,386]}}},{"diffOp":{"insert":{"range":[388,390]}}},{"diffOp":{"equal":{"range":[683,695]}}},{"diffOp":{"delete":{"range":[385,386]}}},{"diffOp":{"insert":{"range":[388,390]}}},{"diffOp":{"equal":{"range":[695,725]}}},{"diffOp":{"delete":{"range":[385,386]}}},{"diffOp":{"insert":{"range":[388,390]}}},{"diffOp":{"equal":{"range":[725,749]}}},{"diffOp":{"delete":{"range":[385,386]}}},{"diffOp":{"insert":{"range":[388,390]}}},{"diffOp":{"equal":{"range":[749,758]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[758,762]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[762,788]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[788,818]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[818,842]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[842,904]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[904,966]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[966,1006]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[1006,1040]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[1040,1068]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[1068,1098]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[1098,1134]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[1134,1139]}}},{"diffOp":{"delete":{"range":[385,386]}}},{"diffOp":{"insert":{"range":[388,390]}}},{"diffOp":{"equal":{"range":[1139,1178]}}},{"diffOp":{"delete":{"range":[385,386]}}},{"diffOp":{"insert":{"range":[388,390]}}},{"diffOp":{"equal":{"range":[1178,1192]}}},{"diffOp":{"delete":{"range":[385,386]}}},{"diffOp":{"insert":{"range":[388,390]}}},{"diffOp":{"equal":{"range":[1192,1209]}}},{"diffOp":{"delete":{"range":[385,386]}}},{"diffOp":{"insert":{"range":[388,390]}}},{"diffOp":{"equal":{"range":[1209,1226]}}},{"diffOp":{"delete":{"range":[385,386]}}},{"diffOp":{"insert":{"range":[388,390]}}},{"diffOp":{"equal":{"range":[1226,1273]}}},{"diffOp":{"delete":{"range":[385,386]}}},{"diffOp":{"insert":{"range":[388,390]}}},{"diffOp":{"equal":{"range":[1273,1331]}}},{"diffOp":{"delete":{"range":[385,386]}}},{"diffOp":{"insert":{"range":[388,390]}}},{"diffOp":{"equal":{"range":[1331,1397]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[394,423]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[423,450]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[450,456]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[1397,1406]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[1406,1456]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[1456,1479]}}},{"diffOp":{"delete":{"range":[385,386]}}},{"diffOp":{"insert":{"range":[388,390]}}},{"diffOp":{"equal":{"range":[456,460]}}},{"diffOp":{"delete":{"range":[385,386]}}},{"diffOp":{"insert":{"range":[388,390]}}},{"diffOp":{"equal":{"range":[1479,1499]}}},{"diffOp":{"delete":{"range":[385,386]}}},{"diffOp":{"insert":{"range":[388,390]}}},{"diffOp":{"equal":{"range":[1499,1610]}}},{"diffOp":{"delete":{"range":[385,386]}}},{"diffOp":{"insert":{"range":[388,390]}}},{"diffOp":{"equal":{"range":[1610,1623]}}},{"diffOp":{"delete":{"range":[385,386]}}},{"diffOp":{"insert":{"range":[388,390]}}},{"diffOp":{"equal":{"range":[1623,1642]}}},{"diffOp":{"delete":{"range":[385,386]}}},{"diffOp":{"insert":{"range":[388,390]}}},{"diffOp":{"equal":{"range":[323,329]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[1642,1692]}}},{"diffOp":{"delete":{"range":[385,388]}}},{"diffOp":{"insert":{"range":[388,394]}}},{"diffOp":{"equal":{"range":[394,423]}}},{"diffOp":{"delete":{"range":[385,388]}}},{"diffOp":{"insert":{"range":[388,394]}}},{"diffOp":{"equal":{"range":[423,450]}}},{"diffOp":{"delete":{"range":[385,388]}}},{"diffOp":{"insert":{"range":[388,394]}}},{"diffOp":{"equal":{"range":[1692,1710]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[1710,1715]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[1715,1752]}}},{"diffOp":{"delete":{"range":[385,388]}}},{"diffOp":{"insert":{"range":[388,394]}}},{"diffOp":{"equal":{"range":[1752,1788]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[1788,1791]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[1791,1836]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[1836,1898]}}},{"diffOp":{"delete":{"range":[385,387]}}},{"diffOp":{"insert":{"range":[388,392]}}},{"diffOp":{"equal":{"range":[1898,1939]}}},{"diffOp":{"delete":{"range":[385,388]}}},{"diffOp":{"insert":{"range":[388,394]}}},{"diffOp":{"equal":{"range":[1939,1969]}}},{"diffOp":{"delete":{"range":[1969,1973]}}},{"diffOp":{"insert":{"range":[1973,1981]}}},{"diffOp":{"equal":{"range":[1981,2036]}}},{"diffOp":{"delete":{"range":[1969,1973]}}},{"diffOp":{"insert":{"range":[1973,1981]}}},{"diffOp":{"equal":{"range":[2036,2089]}}},{"diffOp":{"delete":{"range":[1969,1973]}}},{"diffOp":{"insert":{"range":[1973,1981]}}},{"diffOp":{"equal":{"range":[2089,2130]}}},{"diffOp":{"delete":{"range":[1969,1973]}}},{"diffOp":{"insert":{"range":[1973,1981]}}},{"diffOp":{"equal":{"range":[2130,2182]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[2182,2186]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2186,2190]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2190,2229]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[551,569]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2229,2274]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2274,2339]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[2339,2413]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[1642,1692]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[394,423]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[423,450]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[450,456]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[1710,1715]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[2413,2449]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2449,2501]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[1788,1791]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[2501,2537]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2537,2554]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2554,2572]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[1139,1142]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[2572,2647]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[2647,2734]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[2734,2784]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[2784,2823]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2823,2868]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2868,2890]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2890,2939]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2939,2945]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[2945,3020]}}},{"diffOp":{"delete":{"range":[1969,1973]}}},{"diffOp":{"insert":{"range":[1973,1981]}}},{"diffOp":{"equal":{"range":[3020,3049]}}},{"diffOp":{"delete":{"range":[1969,1973]}}},{"diffOp":{"insert":{"range":[1973,1981]}}},{"diffOp":{"equal":{"range":[3049,3057]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[3057,3061]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[3061,3122]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[3122,3186]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[3186,3259]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[3259,3329]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[3329,3399]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[3399,3423]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[3423,3482]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[3482,3571]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[3571,3621]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[3621,3640]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[3640,3667]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[3667,3684]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[3057,3061]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[3684,3738]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[3738,3795]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[3795,3861]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[3861,3924]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[3924,3987]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[3987,4063]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[4063,4200]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[323,329]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4200,4239]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4239,4289]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2036,2089]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4289,4330]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[749,758]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[4330,4345]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[4345,4391]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[1139,1142]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[551,569]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4391,4450]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2274,2339]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[4450,4503]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[4503,4518]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[2537,2554]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[4518,4538]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[4538,4557]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[4557,4578]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[4578,4596]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[4596,4650]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[323,329]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4650,4679]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4679,4733]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4733,4758]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4758,4796]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4796,4834]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2784,2823]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[4834,4862]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[4862,4912]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[4912,4948]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[4948,4974]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[4974,5019]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5019,5051]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5051,5089]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5089,5105]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5105,5121]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[3057,3061]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[5121,5185]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4200,4239]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[5185,5209]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[450,456]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5209,5227]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5227,5266]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2186,2189]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[5266,5339]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[1479,1499]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[5339,5351]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[749,758]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[4330,4345]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5351,5363]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[1139,1142]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[551,569]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[5363,5409]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2274,2339]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[5409,5454]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[683,695]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[5454,5463]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4503,4518]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2537,2554]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4518,4538]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4538,4557]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4557,4578]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4578,4596]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4596,4613]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[5463,5476]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[5476,5495]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[5495,5534]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[323,329]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4650,4679]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[5534,5588]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4758,4796]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4796,4834]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2784,2823]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5588,5631]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5631,5698]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5698,5753]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5753,5793]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[4974,5019]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5019,5051]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5051,5089]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5793,5821]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5105,5121]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[3057,3061]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[5121,5185]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4200,4239]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[5185,5209]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[450,456]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5209,5227]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5821,5875]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5875,5886]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2186,2189]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[5886,5931]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[1479,1499]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[5339,5351]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[749,758]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[4330,4345]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5351,5363]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[1139,1142]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[551,569]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[5931,5993]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2274,2339]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[5993,6038]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[683,695]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[6038,6087]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[323,329]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4200,4239]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[6087,6134]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[6134,6167]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[394,423]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[423,450]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[450,456]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[6167,6198]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[1456,1479]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[1710,1715]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[6198,6243]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[1479,1499]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[5339,5350]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[6243,6281]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[551,569]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[6281,6343]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2274,2339]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[6343,6389]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[683,695]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[6038,6051]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[6389,6444]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[323,329]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4200,4239]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4239,4289]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[6444,6498]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4758,4796]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[6498,6528]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[6528,6561]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[6561,6597]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[5121,5185]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[5185,5209]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[450,456]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5209,5227]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[6597,6635]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[1134,1139]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2186,2189]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[6635,6682]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[1479,1499]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[5339,5351]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[749,758]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[4330,4345]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5351,5363]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[1139,1142]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[551,569]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[6682,6745]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2274,2339]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[6745,6793]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[683,695]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[6038,6051]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[6389,6444]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[323,329]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4200,4239]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[4239,4289]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[6444,6498]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[6793,6824]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[6561,6597]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[5121,5185]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[5185,5209]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[450,456]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5209,5227]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[6824,6864]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[1134,1139]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2186,2189]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[6864,6913]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[5339,5350]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[6913,6934]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[749,758]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[4330,4345]}}},{"diffOp":{"delete":{"range":[1969,1972]}}},{"diffOp":{"insert":{"range":[1973,1979]}}},{"diffOp":{"equal":{"range":[5351,5363]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[1139,1142]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[551,569]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[6934,6999]}}},{"diffOp":{"delete":{"range":[1969,1971]}}},{"diffOp":{"insert":{"range":[1973,1977]}}},{"diffOp":{"equal":{"range":[2274,2339]}}},{"diffOp":{"delete":{"range":[1969,1970]}}},{"diffOp":{"insert":{"range":[1973,1975]}}},{"diffOp":{"equal":{"range":[5409,5413]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\posts\\posts.actions.ts"},"span":null,"sourceCode":"\"use server\";\n\nimport type { ActionResult } from \"@/features/shared/shared.types\";\nimport { createSafeErrorMessage, logger } from \"@/lib/logger\";\nimport octokit, { githubRepoInfo } from \"@/lib/octokit\";\nimport { sanitizeMarkdown } from \"@/lib/sanitize\";\nimport { getCurrentUser } from \"@/lib/user\";\nimport {\n\tCreatePostSchema,\n\tUpdatePostSchema,\n} from \"@/lib/validation/post.schema\";\nimport matter from \"gray-matter\";\nimport { cacheTag, refresh, updateTag } from \"next/cache\";\nimport { randomUUID } from \"node:crypto\";\nimport type { GitHubFile, Post, PostFrontmatter } from \"./posts.types\";\n\nconst POSTS_PATH = githubRepoInfo.POSTS_PATH;\n\nasync function fetchLatestSha(path: string): Promise<string | undefined> {\n\ttry {\n\t\tconst fileData = await octokit.repos.getContent({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath,\n\t\t});\n\t\tif (!Array.isArray(fileData.data) && \"sha\" in fileData.data) {\n\t\t\treturn fileData.data.sha;\n\t\t}\n\t} catch (error) {\n\t\tlogger.error(\"Failed to fetch latest file SHA\", error, { path });\n\t}\n\treturn undefined;\n}\n\nfunction createPostObject(\n\tid: string,\n\tfrontmatter: PostFrontmatter,\n\tsha?: string,\n): Post {\n\treturn {\n\t\tid,\n\t\ttitle: frontmatter.title,\n\t\tcontent: frontmatter.content,\n\t\tlang: frontmatter.lang,\n\t\tcreatedAt: frontmatter.createdAt || new Date().toISOString(),\n\t\tupdatedAt: frontmatter.updatedAt || new Date().toISOString(),\n\t\tpublishedAt: frontmatter.publishedDate,\n\t\tpublished: frontmatter.published,\n\t\tauthor: frontmatter.author,\n\t\tarticle: frontmatter.article,\n\t\tcoverImage: frontmatter.coverImage,\n\t\tsha,\n\t};\n}\n\nasync function updateGitHubFile(\n\tpath: string,\n\tcontent: string,\n\tmessage: string,\n\tsha?: string,\n): Promise<string | undefined> {\n\tconst latestSha = sha ? await fetchLatestSha(path) : sha;\n\tconst response = await octokit.repos.createOrUpdateFileContents({\n\t\towner: githubRepoInfo.owner,\n\t\trepo: githubRepoInfo.repo,\n\t\tpath,\n\t\tmessage,\n\t\tcontent: Buffer.from(content).toString(\"base64\"),\n\t\tsha: latestSha || sha,\n\t});\n\tupdateTag(\"posts\");\n\treturn response.data.content?.sha;\n}\n\nexport async function listPostsAction(): Promise<ActionResult<Post[]>> {\n\t\"use cache\";\n\tcacheTag(\"posts\");\n\ttry {\n\t\tconst response = await octokit.repos.getContent({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath: POSTS_PATH,\n\t\t});\n\n\t\tif (!Array.isArray(response.data)) {\n\t\t\treturn { success: true, data: [] };\n\t\t}\n\n\t\tconst files = response.data as GitHubFile[];\n\t\tconst mdFiles = files.filter((f) => f.name.endsWith(\".md\"));\n\n\t\tconst posts: Post[] = await Promise.all(\n\t\t\tmdFiles.map(async (file) => {\n\t\t\t\tconst content = await getPostContentAction(file.path);\n\t\t\t\tconst frontmatter = parseFrontmatterToPost(content);\n\t\t\t\tconst id = file.name.replace(\".md\", \"\");\n\t\t\t\treturn createPostObject(id, frontmatter, file.sha);\n\t\t\t}),\n\t\t);\n\n\t\treturn { success: true, data: posts };\n\t} catch (error) {\n\t\tlogger.error(\"Failed to list posts\", error);\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nasync function getPostContentAction(path: string): Promise<string> {\n\tconst response = await octokit.repos.getContent({\n\t\towner: githubRepoInfo.owner,\n\t\trepo: githubRepoInfo.repo,\n\t\tpath,\n\t});\n\n\tif (Array.isArray(response.data)) {\n\t\tthrow new Error(\"Path is a directory, not a file\");\n\t}\n\n\tconst fileData = response.data as {\n\t\tcontent: string;\n\t\tencoding: string;\n\t};\n\tconst content = Buffer.from(fileData.content, \"base64\").toString(\"utf-8\");\n\treturn content;\n}\n\nfunction parseFrontmatterToPost(content: string): PostFrontmatter {\n\tconst { data, content: body } = matter(content);\n\n\tconst frontmatter: PostFrontmatter = {\n\t\ttitle: (data.title as string) || \"Untitled\",\n\t\tcontent: body.trim(),\n\t\tpublished: (data.published as boolean) || false,\n\t\tlang:\n\t\t\t(data.lang as \"fr\" | \"en\") === \"fr\" || (data.lang as \"fr\" | \"en\") === \"en\"\n\t\t\t\t? (data.lang as \"fr\" | \"en\")\n\t\t\t\t: \"en\",\n\t};\n\n\tif (data.author) frontmatter.author = data.author as string;\n\tif (data.article) frontmatter.article = data.article as string;\n\tif (data.coverImage) frontmatter.coverImage = data.coverImage as string;\n\tif (data.createdAt) frontmatter.createdAt = data.createdAt as string;\n\tif (data.updatedAt) frontmatter.updatedAt = data.updatedAt as string;\n\tif (data.publishedDate)\n\t\tfrontmatter.publishedDate = data.publishedDate as string;\n\n\treturn frontmatter;\n}\n\nfunction generateFrontmatterText(data: PostFrontmatter): string {\n\tconst frontmatterObj: Record<string, unknown> = {\n\t\ttitle: data.title,\n\t\tpublished: data.published,\n\t\tlang: data.lang,\n\t};\n\n\tif (data.author) frontmatterObj.author = data.author;\n\tif (data.article) frontmatterObj.article = data.article;\n\tif (data.coverImage) frontmatterObj.coverImage = data.coverImage;\n\tif (data.createdAt) frontmatterObj.createdAt = data.createdAt;\n\tif (data.updatedAt) frontmatterObj.updatedAt = data.updatedAt;\n\tif (data.publishedDate) frontmatterObj.publishedDate = data.publishedDate;\n\n\treturn matter.stringify(data.content, frontmatterObj);\n}\n\nexport async function getPostAction(id: string): Promise<ActionResult<Post>> {\n\ttry {\n\t\tconst path = `${POSTS_PATH}/${id}.md`;\n\t\tconst content = await getPostContentAction(path);\n\t\tconst frontmatter = parseFrontmatterToPost(content);\n\t\tconst sha = await fetchLatestSha(path);\n\n\t\treturn {\n\t\t\tsuccess: true,\n\t\t\tdata: createPostObject(id, frontmatter, sha),\n\t\t};\n\t} catch (error) {\n\t\tlogger.error(\"Failed to get post\", error, { postId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function createPostAction(input: {\n\ttitle: string;\n\tcontent: string;\n\tpublished: boolean;\n\tlang: \"fr\" | \"en\";\n\tcoverImage?: string;\n\tarticle?: string;\n\tauthor?: string;\n}): Promise<ActionResult<boolean>> {\n\ttry {\n\t\t// Validate using Zod schema\n\t\tconst validatedData = CreatePostSchema.parse(input);\n\n\t\tconst id = randomUUID();\n\t\tconst now = new Date().toISOString();\n\t\tconst currentUser = getCurrentUser();\n\t\tconst frontmatter: PostFrontmatter = {\n\t\t\ttitle: validatedData.title,\n\t\t\tcontent: sanitizeMarkdown(validatedData.content),\n\t\t\tpublished: validatedData.published,\n\t\t\tlang: validatedData.lang,\n\t\t\tauthor: validatedData.author || currentUser,\n\t\t\tarticle: validatedData.article,\n\t\t\tcoverImage: validatedData.coverImage,\n\t\t\tcreatedAt: now,\n\t\t\tupdatedAt: now,\n\t\t};\n\n\t\tconst frontmatter_text = generateFrontmatterText(frontmatter);\n\n\t\tconst path = `${POSTS_PATH}/${id}.md`;\n\t\tawait updateGitHubFile(\n\t\t\tpath,\n\t\t\tfrontmatter_text,\n\t\t\t`Create post: ${validatedData.title}`,\n\t\t);\n\t\tlogger.info(\"Post created\", { postId: id, title: validatedData.title });\n\t\tupdateTag(\"posts\");\n\t\trefresh();\n\n\t\treturn {\n\t\t\tsuccess: true,\n\t\t\tdata: true,\n\t\t};\n\t} catch (error) {\n\t\tlogger.error(\"Failed to create post\", error);\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function updatePostAction(\n\tid: string,\n\tinput: {\n\t\ttitle: string;\n\t\tcontent: string;\n\t\tpublished: boolean;\n\t\tlang: \"fr\" | \"en\";\n\t\tcoverImage?: string;\n\t\tarticle?: string;\n\t\tauthor?: string;\n\t\tsha: string;\n\t\tcreatedAt: string;\n\t},\n): Promise<ActionResult<boolean>> {\n\ttry {\n\t\t// Validate using Zod schema\n\t\tconst validatedData = UpdatePostSchema.parse(input);\n\n\t\tconst now = new Date().toISOString();\n\t\tconst currentUser = getCurrentUser();\n\t\tconst frontmatter: PostFrontmatter = {\n\t\t\ttitle: validatedData.title ?? input.title,\n\t\t\tcontent: sanitizeMarkdown(validatedData.content ?? input.content),\n\t\t\tpublished: validatedData.published ?? input.published,\n\t\t\tlang: validatedData.lang ?? input.lang,\n\t\t\tauthor: validatedData.author || currentUser,\n\t\t\tarticle: validatedData.article,\n\t\t\tcoverImage: validatedData.coverImage,\n\t\t\tcreatedAt: input.createdAt,\n\t\t\tupdatedAt: now,\n\t\t};\n\n\t\tconst frontmatter_text = generateFrontmatterText(frontmatter);\n\n\t\tconst path = `${POSTS_PATH}/${id}.md`;\n\t\tawait updateGitHubFile(\n\t\t\tpath,\n\t\t\tfrontmatter_text,\n\t\t\t`Update post: ${validatedData.title ?? input.title}`,\n\t\t\tinput.sha,\n\t\t);\n\t\tlogger.info(\"Post updated\", { postId: id });\n\t\tupdateTag(\"posts\");\n\t\trefresh();\n\n\t\treturn {\n\t\t\tsuccess: true,\n\t\t\tdata: true,\n\t\t};\n\t} catch (error) {\n\t\tlogger.error(\"Failed to update post\", error, { postId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function deletePostAction(\n\tid: string,\n\tsha: string,\n): Promise<ActionResult<boolean>> {\n\ttry {\n\t\tconst path = `${POSTS_PATH}/${id}.md`;\n\t\tconst latestSha = await fetchLatestSha(path);\n\n\t\tawait octokit.repos.deleteFile({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath,\n\t\t\tmessage: `Delete post: ${id}`,\n\t\t\tsha: latestSha || sha,\n\t\t});\n\n\t\tlogger.info(\"Post deleted\", { postId: id });\n\t\tupdateTag(\"posts\");\n\t\trefresh();\n\t\treturn { success: true, data: true };\n\t} catch (error) {\n\t\tlogger.error(\"Failed to delete post\", error, { postId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function publishPostAction(\n\tid: string,\n\tsha: string,\n\tcreatedAt: string,\n): Promise<ActionResult<boolean>> {\n\ttry {\n\t\tconst path = `${POSTS_PATH}/${id}.md`;\n\t\tconst content = await getPostContentAction(path);\n\t\tconst frontmatter = parseFrontmatterToPost(content);\n\n\t\tconst now = new Date().toISOString();\n\t\tfrontmatter.published = true;\n\t\tfrontmatter.publishedDate = now;\n\t\tfrontmatter.createdAt = createdAt;\n\n\t\tconst frontmatter_text = generateFrontmatterText(frontmatter);\n\n\t\tawait updateGitHubFile(\n\t\t\tpath,\n\t\t\tfrontmatter_text,\n\t\t\t`Publish post: ${frontmatter.title}`,\n\t\t\tsha,\n\t\t);\n\t\tlogger.info(\"Post published\", { postId: id });\n\t\tupdateTag(\"posts\");\n\t\trefresh();\n\n\t\treturn {\n\t\t\tsuccess: true,\n\t\t\tdata: true,\n\t\t};\n\t} catch (error) {\n\t\tlogger.error(\"Failed to publish post\", error, { postId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function unpublishPostAction(\n\tid: string,\n\tsha: string,\n\tcreatedAt: string,\n): Promise<ActionResult<boolean>> {\n\ttry {\n\t\tconst path = `${POSTS_PATH}/${id}.md`;\n\t\tconst content = await getPostContentAction(path);\n\t\tconst frontmatter = parseFrontmatterToPost(content);\n\n\t\tfrontmatter.published = false;\n\t\tfrontmatter.createdAt = createdAt;\n\n\t\tconst frontmatter_text = generateFrontmatterText(frontmatter);\n\n\t\tawait updateGitHubFile(\n\t\t\tpath,\n\t\t\tfrontmatter_text,\n\t\t\t`Unpublish post: ${frontmatter.title}`,\n\t\t\tsha,\n\t\t);\n\t\tlogger.info(\"Post unpublished\", { postId: id });\n\t\trefresh();\n\t\tupdateTag(\"posts\");\n\n\t\treturn {\n\t\t\tsuccess: true,\n\t\t\tdata: true,\n\t\t};\n\t} catch (error) {\n\t\tlogger.error(\"Failed to unpublish post\", error, { postId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n"},"tags":[],"source":null},{"category":"assist/source/organizeImports","severity":"error","description":"The imports and exports are not sorted.","message":[{"elements":[],"content":"The imports and exports are not sorted."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Safe fix: Organize Imports (Biome)"}]]},{"diff":{"dictionary":"\"use server\";\n\nimport type { ActionResultrandomUUID } from \"@/features/shared/shared.typesnode:crypto\";\nimport { createSafeErrorMessage, logger }matter from \"@/lib/loggergray-matteroctokit{ cacheTag, refresh,githubRepoInfoupdateTagnext/cachesanitizeMarkdown } from \"@/libfeatures/sharedshared.types\nimport { getCurrentUsercreateSafeErrorMessage,logger } from \"@/lib/user{\n\tCreatePostSchema\n\tUpdatePostSchema,\n { githubRepoInfo validation/post.schema{ sanitizeMarkdown }@/lib/sanitizecacheTag, refresh, updateTaglib/user randomUUID \n\tCreatePostSchema,\n\tUpdatePostSchema,\n@/lib/validation/post.schema\nimport type { GitHubFile, Post, PostFrontmatter } from \"./posts.types\";\n\t}\n}\n","ops":[{"diffOp":{"equal":{"range":[0,13]}}},{"diffOp":{"equal":{"range":[13,22]}}},{"diffOp":{"delete":{"range":[22,27]}}},{"diffOp":{"equal":{"range":[27,29]}}},{"diffOp":{"delete":{"range":[29,41]}}},{"diffOp":{"insert":{"range":[41,51]}}},{"diffOp":{"equal":{"range":[51,60]}}},{"diffOp":{"delete":{"range":[60,90]}}},{"diffOp":{"insert":{"range":[90,101]}}},{"diffOp":{"equal":{"range":[101,103]}}},{"diffOp":{"equal":{"range":[103,111]}}},{"diffOp":{"delete":{"range":[111,145]}}},{"diffOp":{"insert":{"range":[145,151]}}},{"diffOp":{"equal":{"range":[151,158]}}},{"diffOp":{"delete":{"range":[158,170]}}},{"diffOp":{"insert":{"range":[170,181]}}},{"diffOp":{"equal":{"range":[101,103]}}},{"diffOp":{"equal":{"range":[103,111]}}},{"diffOp":{"delete":{"range":[181,188]}}},{"diffOp":{"insert":{"range":[188,198]}}},{"diffOp":{"equal":{"range":[198,200]}}},{"diffOp":{"delete":{"range":[111,112]}}},{"diffOp":{"insert":{"range":[200,208]}}},{"diffOp":{"equal":{"range":[51,52]}}},{"diffOp":{"delete":{"range":[208,222]}}},{"diffOp":{"insert":{"range":[222,231]}}},{"diffOp":{"equal":{"range":[51,60]}}},{"diffOp":{"delete":{"range":[158,163]}}},{"diffOp":{"insert":{"range":[231,235]}}},{"diffOp":{"equal":{"range":[235,236]}}},{"diffOp":{"delete":{"range":[181,188]}}},{"diffOp":{"insert":{"range":[236,241]}}},{"diffOp":{"equal":{"range":[101,103]}}},{"diffOp":{"equal":{"range":[103,111]}}},{"diffOp":{"insert":{"range":[22,27]}}},{"diffOp":{"equal":{"range":[111,113]}}},{"diffOp":{"delete":{"range":[241,257]}}},{"diffOp":{"insert":{"range":[29,41]}}},{"diffOp":{"equal":{"range":[257,268]}}},{"diffOp":{"delete":{"range":[268,271]}}},{"diffOp":{"insert":{"range":[271,286]}}},{"diffOp":{"equal":{"range":[235,236]}}},{"diffOp":{"delete":{"range":[241,249]}}},{"diffOp":{"insert":{"range":[286,298]}}},{"diffOp":{"equal":{"range":[101,103]}}},{"diffOp":{"equal":{"range":[298,308]}}},{"diffOp":{"delete":{"range":[308,322]}}},{"diffOp":{"insert":{"range":[322,345]}}},{"diffOp":{"equal":{"range":[257,258]}}},{"diffOp":{"insert":{"range":[345,352]}}},{"diffOp":{"equal":{"range":[352,366]}}},{"diffOp":{"delete":{"range":[366,370]}}},{"diffOp":{"insert":{"range":[345,351]}}},{"diffOp":{"equal":{"range":[101,103]}}},{"diffOp":{"equal":{"range":[298,306]}}},{"diffOp":{"delete":{"range":[370,389]}}},{"diffOp":{"insert":{"range":[181,188]}}},{"diffOp":{"equal":{"range":[198,199]}}},{"diffOp":{"delete":{"range":[389,409]}}},{"diffOp":{"insert":{"range":[409,427]}}},{"diffOp":{"equal":{"range":[352,366]}}},{"diffOp":{"delete":{"range":[427,449]}}},{"diffOp":{"insert":{"range":[181,188]}}},{"diffOp":{"equal":{"range":[101,103]}}},{"diffOp":{"equal":{"range":[298,306]}}},{"diffOp":{"delete":{"range":[145,151]}}},{"diffOp":{"insert":{"range":[449,469]}}},{"diffOp":{"equal":{"range":[151,158]}}},{"diffOp":{"delete":{"range":[170,181]}}},{"diffOp":{"insert":{"range":[469,483]}}},{"diffOp":{"equal":{"range":[101,103]}}},{"diffOp":{"equal":{"range":[298,308]}}},{"diffOp":{"delete":{"range":[483,511]}}},{"diffOp":{"insert":{"range":[308,322]}}},{"diffOp":{"equal":{"range":[257,266]}}},{"diffOp":{"delete":{"range":[231,235]}}},{"diffOp":{"insert":{"range":[469,470]}}},{"diffOp":{"equal":{"range":[235,236]}}},{"diffOp":{"delete":{"range":[483,488]}}},{"diffOp":{"insert":{"range":[511,519]}}},{"diffOp":{"equal":{"range":[101,103]}}},{"diffOp":{"equal":{"range":[298,307]}}},{"diffOp":{"delete":{"range":[519,531]}}},{"diffOp":{"insert":{"range":[531,570]}}},{"diffOp":{"equal":{"range":[352,360]}}},{"diffOp":{"delete":{"range":[90,101]}}},{"diffOp":{"insert":{"range":[570,598]}}},{"diffOp":{"equal":{"range":[101,103]}}},{"diffOp":{"equal":{"range":[598,671]}}},{"equalLines":{"line_count":368}},{"diffOp":{"equal":{"range":[671,676]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\posts\\posts.actions.ts"},"span":[15,82],"sourceCode":"\"use server\";\n\nimport type { ActionResult } from \"@/features/shared/shared.types\";\nimport { createSafeErrorMessage, logger } from \"@/lib/logger\";\nimport octokit, { githubRepoInfo } from \"@/lib/octokit\";\nimport { sanitizeMarkdown } from \"@/lib/sanitize\";\nimport { getCurrentUser } from \"@/lib/user\";\nimport {\n\tCreatePostSchema,\n\tUpdatePostSchema,\n} from \"@/lib/validation/post.schema\";\nimport matter from \"gray-matter\";\nimport { cacheTag, refresh, updateTag } from \"next/cache\";\nimport { randomUUID } from \"node:crypto\";\nimport type { GitHubFile, Post, PostFrontmatter } from \"./posts.types\";\n\nconst POSTS_PATH = githubRepoInfo.POSTS_PATH;\n\nasync function fetchLatestSha(path: string): Promise<string | undefined> {\n\ttry {\n\t\tconst fileData = await octokit.repos.getContent({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath,\n\t\t});\n\t\tif (!Array.isArray(fileData.data) && \"sha\" in fileData.data) {\n\t\t\treturn fileData.data.sha;\n\t\t}\n\t} catch (error) {\n\t\tlogger.error(\"Failed to fetch latest file SHA\", error, { path });\n\t}\n\treturn undefined;\n}\n\nfunction createPostObject(\n\tid: string,\n\tfrontmatter: PostFrontmatter,\n\tsha?: string,\n): Post {\n\treturn {\n\t\tid,\n\t\ttitle: frontmatter.title,\n\t\tcontent: frontmatter.content,\n\t\tlang: frontmatter.lang,\n\t\tcreatedAt: frontmatter.createdAt || new Date().toISOString(),\n\t\tupdatedAt: frontmatter.updatedAt || new Date().toISOString(),\n\t\tpublishedAt: frontmatter.publishedDate,\n\t\tpublished: frontmatter.published,\n\t\tauthor: frontmatter.author,\n\t\tarticle: frontmatter.article,\n\t\tcoverImage: frontmatter.coverImage,\n\t\tsha,\n\t};\n}\n\nasync function updateGitHubFile(\n\tpath: string,\n\tcontent: string,\n\tmessage: string,\n\tsha?: string,\n): Promise<string | undefined> {\n\tconst latestSha = sha ? await fetchLatestSha(path) : sha;\n\tconst response = await octokit.repos.createOrUpdateFileContents({\n\t\towner: githubRepoInfo.owner,\n\t\trepo: githubRepoInfo.repo,\n\t\tpath,\n\t\tmessage,\n\t\tcontent: Buffer.from(content).toString(\"base64\"),\n\t\tsha: latestSha || sha,\n\t});\n\tupdateTag(\"posts\");\n\treturn response.data.content?.sha;\n}\n\nexport async function listPostsAction(): Promise<ActionResult<Post[]>> {\n\t\"use cache\";\n\tcacheTag(\"posts\");\n\ttry {\n\t\tconst response = await octokit.repos.getContent({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath: POSTS_PATH,\n\t\t});\n\n\t\tif (!Array.isArray(response.data)) {\n\t\t\treturn { success: true, data: [] };\n\t\t}\n\n\t\tconst files = response.data as GitHubFile[];\n\t\tconst mdFiles = files.filter((f) => f.name.endsWith(\".md\"));\n\n\t\tconst posts: Post[] = await Promise.all(\n\t\t\tmdFiles.map(async (file) => {\n\t\t\t\tconst content = await getPostContentAction(file.path);\n\t\t\t\tconst frontmatter = parseFrontmatterToPost(content);\n\t\t\t\tconst id = file.name.replace(\".md\", \"\");\n\t\t\t\treturn createPostObject(id, frontmatter, file.sha);\n\t\t\t}),\n\t\t);\n\n\t\treturn { success: true, data: posts };\n\t} catch (error) {\n\t\tlogger.error(\"Failed to list posts\", error);\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nasync function getPostContentAction(path: string): Promise<string> {\n\tconst response = await octokit.repos.getContent({\n\t\towner: githubRepoInfo.owner,\n\t\trepo: githubRepoInfo.repo,\n\t\tpath,\n\t});\n\n\tif (Array.isArray(response.data)) {\n\t\tthrow new Error(\"Path is a directory, not a file\");\n\t}\n\n\tconst fileData = response.data as {\n\t\tcontent: string;\n\t\tencoding: string;\n\t};\n\tconst content = Buffer.from(fileData.content, \"base64\").toString(\"utf-8\");\n\treturn content;\n}\n\nfunction parseFrontmatterToPost(content: string): PostFrontmatter {\n\tconst { data, content: body } = matter(content);\n\n\tconst frontmatter: PostFrontmatter = {\n\t\ttitle: (data.title as string) || \"Untitled\",\n\t\tcontent: body.trim(),\n\t\tpublished: (data.published as boolean) || false,\n\t\tlang:\n\t\t\t(data.lang as \"fr\" | \"en\") === \"fr\" || (data.lang as \"fr\" | \"en\") === \"en\"\n\t\t\t\t? (data.lang as \"fr\" | \"en\")\n\t\t\t\t: \"en\",\n\t};\n\n\tif (data.author) frontmatter.author = data.author as string;\n\tif (data.article) frontmatter.article = data.article as string;\n\tif (data.coverImage) frontmatter.coverImage = data.coverImage as string;\n\tif (data.createdAt) frontmatter.createdAt = data.createdAt as string;\n\tif (data.updatedAt) frontmatter.updatedAt = data.updatedAt as string;\n\tif (data.publishedDate)\n\t\tfrontmatter.publishedDate = data.publishedDate as string;\n\n\treturn frontmatter;\n}\n\nfunction generateFrontmatterText(data: PostFrontmatter): string {\n\tconst frontmatterObj: Record<string, unknown> = {\n\t\ttitle: data.title,\n\t\tpublished: data.published,\n\t\tlang: data.lang,\n\t};\n\n\tif (data.author) frontmatterObj.author = data.author;\n\tif (data.article) frontmatterObj.article = data.article;\n\tif (data.coverImage) frontmatterObj.coverImage = data.coverImage;\n\tif (data.createdAt) frontmatterObj.createdAt = data.createdAt;\n\tif (data.updatedAt) frontmatterObj.updatedAt = data.updatedAt;\n\tif (data.publishedDate) frontmatterObj.publishedDate = data.publishedDate;\n\n\treturn matter.stringify(data.content, frontmatterObj);\n}\n\nexport async function getPostAction(id: string): Promise<ActionResult<Post>> {\n\ttry {\n\t\tconst path = `${POSTS_PATH}/${id}.md`;\n\t\tconst content = await getPostContentAction(path);\n\t\tconst frontmatter = parseFrontmatterToPost(content);\n\t\tconst sha = await fetchLatestSha(path);\n\n\t\treturn {\n\t\t\tsuccess: true,\n\t\t\tdata: createPostObject(id, frontmatter, sha),\n\t\t};\n\t} catch (error) {\n\t\tlogger.error(\"Failed to get post\", error, { postId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function createPostAction(input: {\n\ttitle: string;\n\tcontent: string;\n\tpublished: boolean;\n\tlang: \"fr\" | \"en\";\n\tcoverImage?: string;\n\tarticle?: string;\n\tauthor?: string;\n}): Promise<ActionResult<boolean>> {\n\ttry {\n\t\t// Validate using Zod schema\n\t\tconst validatedData = CreatePostSchema.parse(input);\n\n\t\tconst id = randomUUID();\n\t\tconst now = new Date().toISOString();\n\t\tconst currentUser = getCurrentUser();\n\t\tconst frontmatter: PostFrontmatter = {\n\t\t\ttitle: validatedData.title,\n\t\t\tcontent: sanitizeMarkdown(validatedData.content),\n\t\t\tpublished: validatedData.published,\n\t\t\tlang: validatedData.lang,\n\t\t\tauthor: validatedData.author || currentUser,\n\t\t\tarticle: validatedData.article,\n\t\t\tcoverImage: validatedData.coverImage,\n\t\t\tcreatedAt: now,\n\t\t\tupdatedAt: now,\n\t\t};\n\n\t\tconst frontmatter_text = generateFrontmatterText(frontmatter);\n\n\t\tconst path = `${POSTS_PATH}/${id}.md`;\n\t\tawait updateGitHubFile(\n\t\t\tpath,\n\t\t\tfrontmatter_text,\n\t\t\t`Create post: ${validatedData.title}`,\n\t\t);\n\t\tlogger.info(\"Post created\", { postId: id, title: validatedData.title });\n\t\tupdateTag(\"posts\");\n\t\trefresh();\n\n\t\treturn {\n\t\t\tsuccess: true,\n\t\t\tdata: true,\n\t\t};\n\t} catch (error) {\n\t\tlogger.error(\"Failed to create post\", error);\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function updatePostAction(\n\tid: string,\n\tinput: {\n\t\ttitle: string;\n\t\tcontent: string;\n\t\tpublished: boolean;\n\t\tlang: \"fr\" | \"en\";\n\t\tcoverImage?: string;\n\t\tarticle?: string;\n\t\tauthor?: string;\n\t\tsha: string;\n\t\tcreatedAt: string;\n\t},\n): Promise<ActionResult<boolean>> {\n\ttry {\n\t\t// Validate using Zod schema\n\t\tconst validatedData = UpdatePostSchema.parse(input);\n\n\t\tconst now = new Date().toISOString();\n\t\tconst currentUser = getCurrentUser();\n\t\tconst frontmatter: PostFrontmatter = {\n\t\t\ttitle: validatedData.title ?? input.title,\n\t\t\tcontent: sanitizeMarkdown(validatedData.content ?? input.content),\n\t\t\tpublished: validatedData.published ?? input.published,\n\t\t\tlang: validatedData.lang ?? input.lang,\n\t\t\tauthor: validatedData.author || currentUser,\n\t\t\tarticle: validatedData.article,\n\t\t\tcoverImage: validatedData.coverImage,\n\t\t\tcreatedAt: input.createdAt,\n\t\t\tupdatedAt: now,\n\t\t};\n\n\t\tconst frontmatter_text = generateFrontmatterText(frontmatter);\n\n\t\tconst path = `${POSTS_PATH}/${id}.md`;\n\t\tawait updateGitHubFile(\n\t\t\tpath,\n\t\t\tfrontmatter_text,\n\t\t\t`Update post: ${validatedData.title ?? input.title}`,\n\t\t\tinput.sha,\n\t\t);\n\t\tlogger.info(\"Post updated\", { postId: id });\n\t\tupdateTag(\"posts\");\n\t\trefresh();\n\n\t\treturn {\n\t\t\tsuccess: true,\n\t\t\tdata: true,\n\t\t};\n\t} catch (error) {\n\t\tlogger.error(\"Failed to update post\", error, { postId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function deletePostAction(\n\tid: string,\n\tsha: string,\n): Promise<ActionResult<boolean>> {\n\ttry {\n\t\tconst path = `${POSTS_PATH}/${id}.md`;\n\t\tconst latestSha = await fetchLatestSha(path);\n\n\t\tawait octokit.repos.deleteFile({\n\t\t\towner: githubRepoInfo.owner,\n\t\t\trepo: githubRepoInfo.repo,\n\t\t\tpath,\n\t\t\tmessage: `Delete post: ${id}`,\n\t\t\tsha: latestSha || sha,\n\t\t});\n\n\t\tlogger.info(\"Post deleted\", { postId: id });\n\t\tupdateTag(\"posts\");\n\t\trefresh();\n\t\treturn { success: true, data: true };\n\t} catch (error) {\n\t\tlogger.error(\"Failed to delete post\", error, { postId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function publishPostAction(\n\tid: string,\n\tsha: string,\n\tcreatedAt: string,\n): Promise<ActionResult<boolean>> {\n\ttry {\n\t\tconst path = `${POSTS_PATH}/${id}.md`;\n\t\tconst content = await getPostContentAction(path);\n\t\tconst frontmatter = parseFrontmatterToPost(content);\n\n\t\tconst now = new Date().toISOString();\n\t\tfrontmatter.published = true;\n\t\tfrontmatter.publishedDate = now;\n\t\tfrontmatter.createdAt = createdAt;\n\n\t\tconst frontmatter_text = generateFrontmatterText(frontmatter);\n\n\t\tawait updateGitHubFile(\n\t\t\tpath,\n\t\t\tfrontmatter_text,\n\t\t\t`Publish post: ${frontmatter.title}`,\n\t\t\tsha,\n\t\t);\n\t\tlogger.info(\"Post published\", { postId: id });\n\t\tupdateTag(\"posts\");\n\t\trefresh();\n\n\t\treturn {\n\t\t\tsuccess: true,\n\t\t\tdata: true,\n\t\t};\n\t} catch (error) {\n\t\tlogger.error(\"Failed to publish post\", error, { postId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n\nexport async function unpublishPostAction(\n\tid: string,\n\tsha: string,\n\tcreatedAt: string,\n): Promise<ActionResult<boolean>> {\n\ttry {\n\t\tconst path = `${POSTS_PATH}/${id}.md`;\n\t\tconst content = await getPostContentAction(path);\n\t\tconst frontmatter = parseFrontmatterToPost(content);\n\n\t\tfrontmatter.published = false;\n\t\tfrontmatter.createdAt = createdAt;\n\n\t\tconst frontmatter_text = generateFrontmatterText(frontmatter);\n\n\t\tawait updateGitHubFile(\n\t\t\tpath,\n\t\t\tfrontmatter_text,\n\t\t\t`Unpublish post: ${frontmatter.title}`,\n\t\t\tsha,\n\t\t);\n\t\tlogger.info(\"Post unpublished\", { postId: id });\n\t\trefresh();\n\t\tupdateTag(\"posts\");\n\n\t\treturn {\n\t\t\tsuccess: true,\n\t\t\tdata: true,\n\t\t};\n\t} catch (error) {\n\t\tlogger.error(\"Failed to unpublish post\", error, { postId: id });\n\t\treturn { success: false, error: createSafeErrorMessage(error) };\n\t}\n}\n"},"tags":["fixable"],"source":null},{"category":"assist/source/organizeImports","severity":"error","description":"The imports and exports are not sorted.","message":[{"elements":[],"content":"The imports and exports are not sorted."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Safe fix: Organize Imports (Biome)"}]]},{"diff":{"dictionary":"import { connectionIconCircleCheck, IconExternalLink } from \"next@tabler/servericons-react\";\r\nimport { getGitHubUserAction }Image from \"..settings.actionsimage;\n{ connection } from \"next/\r\nimport { Button } from \"@tablercomponents/ui/buttongetGitHubUserAction@/components/uibutton\r\n\r\nconst UserProfileCard = async () => {\r}\r\n\r\nexport default UserProfileCard;","ops":[{"diffOp":{"equal":{"range":[0,9]}}},{"diffOp":{"delete":{"range":[9,19]}}},{"diffOp":{"insert":{"range":[19,52]}}},{"diffOp":{"equal":{"range":[52,61]}}},{"diffOp":{"delete":{"range":[61,65]}}},{"diffOp":{"insert":{"range":[65,72]}}},{"diffOp":{"equal":{"range":[72,73]}}},{"diffOp":{"delete":{"range":[73,79]}}},{"diffOp":{"insert":{"range":[79,90]}}},{"diffOp":{"equal":{"range":[90,92]}}},{"diffOp":{"equal":{"range":[92,101]}}},{"diffOp":{"delete":{"range":[101,124]}}},{"diffOp":{"insert":{"range":[124,129]}}},{"diffOp":{"equal":{"range":[129,136]}}},{"diffOp":{"delete":{"range":[136,138]}}},{"diffOp":{"insert":{"range":[61,65]}}},{"diffOp":{"equal":{"range":[72,73]}}},{"diffOp":{"delete":{"range":[138,154]}}},{"diffOp":{"insert":{"range":[154,159]}}},{"diffOp":{"equal":{"range":[90,91]}}},{"diffOp":{"delete":{"range":[159,160]}}},{"diffOp":{"delete":{"range":[92,94]}}},{"diffOp":{"insert":{"range":[160,161]}}},{"diffOp":{"equal":{"range":[0,7]}}},{"diffOp":{"delete":{"range":[124,129]}}},{"diffOp":{"insert":{"range":[161,175]}}},{"diffOp":{"equal":{"range":[175,187]}}},{"diffOp":{"delete":{"range":[154,159]}}},{"diffOp":{"insert":{"range":[73,79]}}},{"diffOp":{"equal":{"range":[90,91]}}},{"diffOp":{"insert":{"range":[159,160]}}},{"diffOp":{"equal":{"range":[187,198]}}},{"diffOp":{"delete":{"range":[19,52]}}},{"diffOp":{"insert":{"range":[198,204]}}},{"diffOp":{"equal":{"range":[204,214]}}},{"diffOp":{"delete":{"range":[214,220]}}},{"diffOp":{"equal":{"range":[72,73]}}},{"diffOp":{"delete":{"range":[79,90]}}},{"diffOp":{"insert":{"range":[220,240]}}},{"diffOp":{"equal":{"range":[90,92]}}},{"diffOp":{"equal":{"range":[187,198]}}},{"diffOp":{"delete":{"range":[198,204]}}},{"diffOp":{"insert":{"range":[240,259]}}},{"diffOp":{"equal":{"range":[204,213]}}},{"diffOp":{"delete":{"range":[259,274]}}},{"diffOp":{"insert":{"range":[136,138]}}},{"diffOp":{"equal":{"range":[72,73]}}},{"diffOp":{"delete":{"range":[274,280]}}},{"diffOp":{"insert":{"range":[138,154]}}},{"diffOp":{"equal":{"range":[90,92]}}},{"diffOp":{"equal":{"range":[280,322]}}},{"equalLines":{"line_count":80}},{"diffOp":{"equal":{"range":[322,358]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\settings\\components\\user-profile-card.tsx"},"span":[0,41],"sourceCode":"import { connection } from \"next/server\";\r\nimport { getGitHubUserAction } from \"../settings.actions\";\r\nimport Image from \"next/image\"\r\nimport { IconCircleCheck, IconExternalLink } from \"@tabler/icons-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\nconst UserProfileCard = async () => {\r\n  await connection();\r\n  const result = await getGitHubUserAction();\r\n\r\n  if (!result.success) {\r\n    return (\r\n      <div className=\"rounded-xl border bg-card\">\r\n        <div className=\"p-6 text-center text-muted-foreground\">\r\n          {result.error}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const user = result.data;\r\n\r\n  return (\r\n    <div className=\"rounded-xl border bg-linear-to-br from-card to-card/50 overflow-hidden\">\r\n      <div className=\"p-6\">\r\n        <div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-4\">\r\n          {/* Avatar */}\r\n          <div className=\"relative\">\r\n            <Image\r\n              src={user.avatar_url}\r\n              alt={user.login}\r\n              width={72}\r\n              height={72}\r\n              className=\"rounded-full border-2 border-primary/20\"\r\n              priority\r\n            />\r\n            <div className=\"absolute bottom-0 right-0 bg-green-500 rounded-full p-1 border-2 border-card\">\r\n              <IconCircleCheck className=\"size-4 text-white\" />\r\n            </div>\r\n          </div>\r\n\r\n          {/* User Info */}\r\n          <div className=\"flex-1 min-w-0\">\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2\">\r\n              <div>\r\n                <h2 className=\"text-xl font-bold\">{user.name || user.login}</h2>\r\n                <p className=\"text-sm text-muted-foreground\">@{user.login}</p>\r\n              </div>\r\n              <Button variant=\"outline\" size=\"sm\" asChild>\r\n                <a\r\n                  href={user.profile_url}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"inline-flex items-center gap-2 rounded-md px-3 py-1.5 text-sm ring-offset-background transition-colors hover:bg-accent hover:text-accent-foreground\"\r\n                >\r\n                  <IconExternalLink className=\"size-4\" />\r\n                  View Profile\r\n                </a>\r\n              </Button>\r\n            </div>\r\n\r\n            {/* Bio */}\r\n            {user.bio && (\r\n              <p className=\"text-sm text-muted-foreground mt-2\">{user.bio}</p>\r\n            )}\r\n\r\n            {/* Stats */}\r\n            <div className=\"flex flex-wrap gap-4 mt-3 text-sm\">\r\n              {user.location && (\r\n                <div className=\"flex items-center gap-1 text-muted-foreground\">\r\n                  <span>📍</span>\r\n                  <span>{user.location}</span>\r\n                </div>\r\n              )}\r\n              {user.company && (\r\n                <div className=\"flex items-center gap-1 text-muted-foreground\">\r\n                  <span>🏢</span>\r\n                  <span>{user.company}</span>\r\n                </div>\r\n              )}\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserProfileCard;"},"tags":["fixable"],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"import { connection } from \"next/server\";\r\n\nimport { getGitHubUserAction } from \"../settings.actions\";import Image from \"next/image\";\nimport { IconCircleCheck, IconExternalLink } from \"@tabler/icons-react\";import { Button } from \"@/components/ui/button\";\r\n\r\n\n\nconst UserProfileCard = async () => {  await connection();  const result = await getGitHubUserAction();  if (!result.success) {    return (      <div className=\"rounded-xl border bg-card\">        <div className=\"p-6 text-center text-muted-foreground\">          {result.error}        </div>      </div>    );  }  const user = result.data;  return (    <div className=\"rounded-xl border bg-linear-to-br from-card to-card/50 overflow-hidden\">      <div className=\"p-6\">        <div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-4\">          {/* Avatar */}          <div className=\"relative\">            <Image              src={user.avatar_url}              alt={user.login}              width={72}              height={72}              className=\"rounded-full border-2 border-primary/20\"              priority            />            <div className=\"absolute bottom-0 right-0 bg-green-500 rounded-full p-1 border-2 border-card\">              <IconCircleCheck className=\"size-4 text-white\" />            </div>          </div>          {/* User Info */}          <div className=\"flex-1 min-w-0\">            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2\">              <div>                <h2 className=\"text-xl font-bold\">{user.name || user.login}</h2>                <p className=\"text-sm text-muted-foreground\">@{user.login}</p>              </div>              <Button variant=\"outline\" size=\"sm\" asChild>                <a                  href={user.profile_url}                  target=\"_blank\"                  rel=\"noopener noreferrer\"                  className=\"inline-flex items-center gap-2 rounded-md px-3 py-1.5 text-sm ring-offset-background transition-colors hover:bg-accent hover:text-accent-foreground\"                >                  <IconExternalLink className=\"size-4\" />                  View Profile                </a>              </Button>            {/* Bio */}            {user.bio && (              <p className=\"text-sm text-muted-foreground mt-2\">{user.bio}</p>            )}            {/* Stats */}            <div className=\"flex flex-wrap gap-4 mt-3 text-sm\">              {user.location && (                <div className=\"flex items-center gap-1 text-muted-foreground\">                  <span>📍</span>                  <span>{user.location}</span>                </div>              )}              {user.company && (                  <span>🏢</span>                  <span>{user.company}</span>    </div>  );};\n\nexport default UserProfileCard;","ops":[{"diffOp":{"equal":{"range":[0,41]}}},{"diffOp":{"delete":{"range":[41,43]}}},{"diffOp":{"insert":{"range":[43,44]}}},{"diffOp":{"equal":{"range":[44,102]}}},{"diffOp":{"delete":{"range":[41,43]}}},{"diffOp":{"insert":{"range":[43,44]}}},{"diffOp":{"equal":{"range":[102,132]}}},{"diffOp":{"delete":{"range":[41,43]}}},{"diffOp":{"insert":{"range":[132,134]}}},{"diffOp":{"equal":{"range":[134,206]}}},{"diffOp":{"delete":{"range":[41,43]}}},{"diffOp":{"insert":{"range":[43,44]}}},{"diffOp":{"equal":{"range":[206,254]}}},{"diffOp":{"delete":{"range":[254,258]}}},{"diffOp":{"insert":{"range":[258,260]}}},{"diffOp":{"equal":{"range":[260,297]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[297,318]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[318,363]}}},{"diffOp":{"delete":{"range":[254,258]}}},{"diffOp":{"insert":{"range":[258,260]}}},{"diffOp":{"equal":{"range":[363,387]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[387,399]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[399,448]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[448,511]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[511,535]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[535,549]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[549,561]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[561,567]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[567,570]}}},{"diffOp":{"delete":{"range":[254,258]}}},{"diffOp":{"insert":{"range":[258,260]}}},{"diffOp":{"equal":{"range":[570,597]}}},{"diffOp":{"delete":{"range":[254,258]}}},{"diffOp":{"insert":{"range":[258,260]}}},{"diffOp":{"equal":{"range":[597,607]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[607,699]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[699,726]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[726,811]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[811,835]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[835,871]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[871,889]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[889,924]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[924,954]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[954,978]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[978,1003]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1003,1068]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1068,1090]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1090,1104]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1104,1210]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1210,1273]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1273,1291]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1291,1307]}}},{"diffOp":{"delete":{"range":[254,258]}}},{"diffOp":{"insert":{"range":[258,260]}}},{"diffOp":{"equal":{"range":[1307,1334]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1334,1376]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1376,1472]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1472,1491]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1491,1571]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1571,1649]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1649,1669]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1669,1727]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1727,1745]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1745,1786]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1786,1819]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1819,1862]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1862,2039]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2039,2056]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2056,2113]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2113,2143]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2143,2163]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2163,2186]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1273,1291]}}},{"diffOp":{"delete":{"range":[254,258]}}},{"diffOp":{"insert":{"range":[258,260]}}},{"diffOp":{"equal":{"range":[2186,2209]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2209,2235]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2235,2313]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2313,2327]}}},{"diffOp":{"delete":{"range":[254,258]}}},{"diffOp":{"insert":{"range":[258,260]}}},{"diffOp":{"equal":{"range":[2327,2352]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2352,2415]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2415,2448]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2448,2527]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2527,2562]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2562,2608]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2608,2630]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2630,2646]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2646,2678]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2448,2527]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2678,2713]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2713,2758]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2608,2630]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2630,2646]}}},{"diffOp":{"delete":{"range":[254,258]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1273,1291]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[1291,1307]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[535,549]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[549,561]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2758,2768]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2768,2772]}}},{"diffOp":{"delete":{"range":[254,256]}}},{"diffOp":{"insert":{"range":[258,259]}}},{"diffOp":{"equal":{"range":[2772,2773]}}},{"diffOp":{"delete":{"range":[254,258]}}},{"diffOp":{"insert":{"range":[2773,2776]}}},{"diffOp":{"equal":{"range":[2776,2807]}}},{"diffOp":{"insert":{"range":[258,259]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\settings\\components\\user-profile-card.tsx"},"span":null,"sourceCode":"import { connection } from \"next/server\";\r\nimport { getGitHubUserAction } from \"../settings.actions\";\r\nimport Image from \"next/image\"\r\nimport { IconCircleCheck, IconExternalLink } from \"@tabler/icons-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\nconst UserProfileCard = async () => {\r\n  await connection();\r\n  const result = await getGitHubUserAction();\r\n\r\n  if (!result.success) {\r\n    return (\r\n      <div className=\"rounded-xl border bg-card\">\r\n        <div className=\"p-6 text-center text-muted-foreground\">\r\n          {result.error}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const user = result.data;\r\n\r\n  return (\r\n    <div className=\"rounded-xl border bg-linear-to-br from-card to-card/50 overflow-hidden\">\r\n      <div className=\"p-6\">\r\n        <div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-4\">\r\n          {/* Avatar */}\r\n          <div className=\"relative\">\r\n            <Image\r\n              src={user.avatar_url}\r\n              alt={user.login}\r\n              width={72}\r\n              height={72}\r\n              className=\"rounded-full border-2 border-primary/20\"\r\n              priority\r\n            />\r\n            <div className=\"absolute bottom-0 right-0 bg-green-500 rounded-full p-1 border-2 border-card\">\r\n              <IconCircleCheck className=\"size-4 text-white\" />\r\n            </div>\r\n          </div>\r\n\r\n          {/* User Info */}\r\n          <div className=\"flex-1 min-w-0\">\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2\">\r\n              <div>\r\n                <h2 className=\"text-xl font-bold\">{user.name || user.login}</h2>\r\n                <p className=\"text-sm text-muted-foreground\">@{user.login}</p>\r\n              </div>\r\n              <Button variant=\"outline\" size=\"sm\" asChild>\r\n                <a\r\n                  href={user.profile_url}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"inline-flex items-center gap-2 rounded-md px-3 py-1.5 text-sm ring-offset-background transition-colors hover:bg-accent hover:text-accent-foreground\"\r\n                >\r\n                  <IconExternalLink className=\"size-4\" />\r\n                  View Profile\r\n                </a>\r\n              </Button>\r\n            </div>\r\n\r\n            {/* Bio */}\r\n            {user.bio && (\r\n              <p className=\"text-sm text-muted-foreground mt-2\">{user.bio}</p>\r\n            )}\r\n\r\n            {/* Stats */}\r\n            <div className=\"flex flex-wrap gap-4 mt-3 text-sm\">\r\n              {user.location && (\r\n                <div className=\"flex items-center gap-1 text-muted-foreground\">\r\n                  <span>📍</span>\r\n                  <span>{user.location}</span>\r\n                </div>\r\n              )}\r\n              {user.company && (\r\n                <div className=\"flex items-center gap-1 text-muted-foreground\">\r\n                  <span>🏢</span>\r\n                  <span>{user.company}</span>\r\n                </div>\r\n              )}\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserProfileCard;"},"tags":[],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"\"use server\";\r\n\r\n\n\nimport type { ActionResult } from \"@/features/shared/shared.types\";import octokit from \"@/lib/octokit\";import type { GitHubUser } from \"./settings.types\";\r\n\r\n\r\nexport async function getGitHubUserAction(): Promise<ActionResult<GitHubUser>> {  try {    const response = await octokit.rest.users.getAuthenticated();    const user: GitHubUser = {      login: response.data.login,      name: response.data.name,      avatar_url: response.data.avatar_url,      bio: response.data.bio,      profile_url: response.data.html_url,      public_repos: response.data.public_repos,      company: response.data.company,      location: response.data.location,    };    return { success: true, data: user };  } catch (error) {    const message =      error instanceof Error ? error.message : \"Failed to fetch GitHub user\";    console.error(\"Failed to fetch GitHub user:\", error);    return { success: false, error: message };}","ops":[{"diffOp":{"equal":{"range":[0,13]}}},{"diffOp":{"delete":{"range":[13,17]}}},{"diffOp":{"insert":{"range":[17,19]}}},{"diffOp":{"equal":{"range":[19,86]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[86,122]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[122,173]}}},{"diffOp":{"delete":{"range":[173,179]}}},{"diffOp":{"insert":{"range":[17,19]}}},{"diffOp":{"equal":{"range":[179,259]}}},{"diffOp":{"delete":{"range":[173,175]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[259,266]}}},{"diffOp":{"delete":{"range":[173,175]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[266,331]}}},{"diffOp":{"delete":{"range":[173,177]}}},{"diffOp":{"insert":{"range":[17,19]}}},{"diffOp":{"equal":{"range":[331,361]}}},{"diffOp":{"delete":{"range":[173,175]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[361,394]}}},{"diffOp":{"delete":{"range":[173,175]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[394,425]}}},{"diffOp":{"delete":{"range":[173,175]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[425,468]}}},{"diffOp":{"delete":{"range":[173,175]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[468,497]}}},{"diffOp":{"delete":{"range":[173,175]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[497,539]}}},{"diffOp":{"delete":{"range":[173,175]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[539,586]}}},{"diffOp":{"delete":{"range":[173,175]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[586,623]}}},{"diffOp":{"delete":{"range":[173,175]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[623,662]}}},{"diffOp":{"delete":{"range":[173,175]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[662,668]}}},{"diffOp":{"delete":{"range":[173,177]}}},{"diffOp":{"insert":{"range":[17,19]}}},{"diffOp":{"equal":{"range":[668,709]}}},{"diffOp":{"delete":{"range":[173,175]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[709,728]}}},{"diffOp":{"delete":{"range":[173,175]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[728,747]}}},{"diffOp":{"delete":{"range":[173,175]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[747,824]}}},{"diffOp":{"delete":{"range":[173,175]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[824,881]}}},{"diffOp":{"delete":{"range":[173,175]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[881,927]}}},{"diffOp":{"delete":{"range":[173,175]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[709,712]}}},{"diffOp":{"delete":{"range":[173,175]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[927,928]}}},{"diffOp":{"delete":{"range":[173,175]}}},{"diffOp":{"insert":{"range":[17,18]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\settings\\settings.actions.ts"},"span":null,"sourceCode":"\"use server\";\r\n\r\nimport type { ActionResult } from \"@/features/shared/shared.types\";\r\nimport octokit from \"@/lib/octokit\";\r\nimport type { GitHubUser } from \"./settings.types\";\r\n\r\n\r\nexport async function getGitHubUserAction(): Promise<ActionResult<GitHubUser>> {\r\n  try {\r\n    const response = await octokit.rest.users.getAuthenticated();\r\n\r\n    const user: GitHubUser = {\r\n      login: response.data.login,\r\n      name: response.data.name,\r\n      avatar_url: response.data.avatar_url,\r\n      bio: response.data.bio,\r\n      profile_url: response.data.html_url,\r\n      public_repos: response.data.public_repos,\r\n      company: response.data.company,\r\n      location: response.data.location,\r\n    };\r\n\r\n    return { success: true, data: user };\r\n  } catch (error) {\r\n    const message =\r\n      error instanceof Error ? error.message : \"Failed to fetch GitHub user\";\r\n    console.error(\"Failed to fetch GitHub user:\", error);\r\n    return { success: false, error: message };\r\n  }\r\n}\r\n"},"tags":[],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"\r\nexport interface GitHubUser {\n  login: string;  name: string | null;  avatar_url: string;  bio: string | null;  profile_url: string;  public_repos: number;  company: string | null;  location: string | null;}","ops":[{"diffOp":{"delete":{"range":[0,2]}}},{"diffOp":{"equal":{"range":[2,31]}}},{"diffOp":{"delete":{"range":[0,2]}}},{"diffOp":{"insert":{"range":[31,32]}}},{"diffOp":{"equal":{"range":[32,48]}}},{"diffOp":{"delete":{"range":[0,2]}}},{"diffOp":{"insert":{"range":[31,32]}}},{"diffOp":{"equal":{"range":[48,70]}}},{"diffOp":{"delete":{"range":[0,2]}}},{"diffOp":{"insert":{"range":[31,32]}}},{"diffOp":{"equal":{"range":[70,91]}}},{"diffOp":{"delete":{"range":[0,2]}}},{"diffOp":{"insert":{"range":[31,32]}}},{"diffOp":{"equal":{"range":[91,112]}}},{"diffOp":{"delete":{"range":[0,2]}}},{"diffOp":{"insert":{"range":[31,32]}}},{"diffOp":{"equal":{"range":[112,134]}}},{"diffOp":{"delete":{"range":[0,2]}}},{"diffOp":{"insert":{"range":[31,32]}}},{"diffOp":{"equal":{"range":[134,157]}}},{"diffOp":{"delete":{"range":[0,2]}}},{"diffOp":{"insert":{"range":[31,32]}}},{"diffOp":{"equal":{"range":[157,182]}}},{"diffOp":{"delete":{"range":[0,2]}}},{"diffOp":{"insert":{"range":[31,32]}}},{"diffOp":{"equal":{"range":[182,208]}}},{"diffOp":{"delete":{"range":[0,2]}}},{"diffOp":{"insert":{"range":[31,32]}}},{"diffOp":{"equal":{"range":[208,209]}}},{"diffOp":{"delete":{"range":[0,2]}}},{"diffOp":{"insert":{"range":[31,32]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\settings\\settings.types.ts"},"span":null,"sourceCode":"\r\nexport interface GitHubUser {\r\n  login: string;\r\n  name: string | null;\r\n  avatar_url: string;\r\n  bio: string | null;\r\n  profile_url: string;\r\n  public_repos: number;\r\n  company: string | null;\r\n  location: string | null;\r\n}\r\n"},"tags":[],"source":null},{"category":"assist/source/organizeImports","severity":"error","description":"The imports and exports are not sorted.","message":[{"elements":[],"content":"The imports and exports are not sorted."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Safe fix: Organize Imports (Biome)"}]]},{"diff":{"dictionary":"\"use client\";\n\nimport {  SidebarTrigger,\n  useSidebar,\n} from \"@/components/ui/sidebar\";\nimport { cngetGitHubUserAction } from \"@/libfeatures/settings/utilssettings.actions\";settings/settings.actions\nimport { Logo } from \"./logo\";\n\nexport default AppSidebar;\n","ops":[{"diffOp":{"equal":{"range":[0,23]}}},{"equalLines":{"line_count":30}},{"diffOp":{"equal":{"range":[23,88]}}},{"diffOp":{"equal":{"range":[88,98]}}},{"diffOp":{"delete":{"range":[98,100]}}},{"diffOp":{"insert":{"range":[100,119]}}},{"diffOp":{"equal":{"range":[119,130]}}},{"diffOp":{"delete":{"range":[130,133]}}},{"diffOp":{"insert":{"range":[133,150]}}},{"diffOp":{"equal":{"range":[150,151]}}},{"diffOp":{"delete":{"range":[151,156]}}},{"diffOp":{"insert":{"range":[156,172]}}},{"diffOp":{"equal":{"range":[172,174]}}},{"diffOp":{"equal":{"range":[88,98]}}},{"diffOp":{"delete":{"range":[100,119]}}},{"diffOp":{"insert":{"range":[98,100]}}},{"diffOp":{"equal":{"range":[119,130]}}},{"diffOp":{"delete":{"range":[133,141]}}},{"diffOp":{"insert":{"range":[130,133]}}},{"diffOp":{"equal":{"range":[150,151]}}},{"diffOp":{"delete":{"range":[174,199]}}},{"diffOp":{"insert":{"range":[151,156]}}},{"diffOp":{"equal":{"range":[172,174]}}},{"diffOp":{"equal":{"range":[199,231]}}},{"equalLines":{"line_count":263}},{"diffOp":{"equal":{"range":[231,259]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\shared\\components\\app-sidebar.tsx"},"span":[15,192],"sourceCode":"\"use client\";\n\nimport {\n  IconBrandGithub,\n  IconChevronDown,\n  IconChevronRight,\n  IconFileText,\n  IconHome,\n  IconList,\n  IconPhoto,\n  IconPlus,\n  IconSettings,\n} from \"@tabler/icons-react\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { Suspense, useEffect, useState } from \"react\";\nimport { ThemeToggle } from \"@/components/theme-toggle\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n} from \"@/components/ui/sidebar\";\nimport { cn } from \"@/lib/utils\";\nimport { getGitHubUserAction } from \"@/features/settings/settings.actions\";\nimport { Logo } from \"./logo\";\n\ninterface NavItem {\n  title: string;\n  href?: string;\n  icon: React.ReactNode;\n  children?: { title: string; href: string }[];\n}\n\nconst navItems: NavItem[] = [\n  {\n    title: \"Dashboard\",\n    href: \"/cms\",\n    icon: <IconHome className=\"size-4\" />,\n  },\n  {\n    title: \"Articles\",\n    icon: <IconFileText className=\"size-4\" />,\n    children: [\n      { title: \"All Articles\", href: \"/cms/articles\" },\n      { title: \"New Article\", href: \"/cms/articles/new\" },\n    ],\n  },\n  {\n    title: \"Posts\",\n    icon: <IconFileText className=\"size-4\" />,\n    children: [\n      { title: \"All Posts\", href: \"/cms/posts\" },\n      { title: \"New Post\", href: \"/cms/posts/new\" },\n    ],\n  },\n  {\n    title: \"Media\",\n    href: \"/cms/media\",\n    icon: <IconPhoto className=\"size-4\" />,\n  },\n  {\n    title: \"Settings\",\n    href: \"/cms/settings\",\n    icon: <IconSettings className=\"size-4\" />,\n  },\n];\n\nfunction UserProfileFooter() {\n  const [user, setUser] = useState<{\n    login: string;\n    name: string | null;\n    avatar_url: string;\n  } | null>(null);\n  const { state } = useSidebar();\n  const isCollapsed = state === \"collapsed\";\n\n  useEffect(() => {\n    getGitHubUserAction().then((result) => {\n      if (result.success) {\n        setUser({\n          login: result.data.login,\n          name: result.data.name,\n          avatar_url: result.data.avatar_url,\n        });\n      }\n    });\n  }, []);\n\n  if (!user) {\n    return (\n      <div\n        className={cn(\n          \"flex gap-2\",\n          isCollapsed\n            ? \"flex-col items-center\"\n            : \"items-center justify-between\",\n        )}\n      >\n        <div\n          className={cn(\n            \"flex items-center rounded-lg bg-muted/50 animate-pulse\",\n            isCollapsed ? \"p-2 justify-center\" : \"gap-3 flex-1 p-3 min-w-0\",\n          )}\n        >\n          <div className=\"flex size-8 items-center justify-center rounded-full bg-primary/10 shrink-0\">\n            <IconBrandGithub className=\"size-4 text-primary\" />\n          </div>\n          {!isCollapsed && (\n            <div className=\"flex flex-col text-xs min-w-0\">\n              <span className=\"font-medium\">Loading...</span>\n            </div>\n          )}\n        </div>\n        <ThemeToggle />\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={cn(\n        \"flex gap-2\",\n        isCollapsed ? \"flex-col items-center\" : \"items-center justify-between\",\n      )}\n    >\n      <Link\n        href=\"/cms/settings\"\n        className={cn(\n          \"flex items-center rounded-lg bg-muted/50 hover:bg-muted/70 transition-colors cursor-pointer\",\n          isCollapsed ? \"p-2 justify-center\" : \"gap-3 flex-1 p-3 min-w-0\",\n        )}\n      >\n        <div className=\"relative shrink-0\">\n          <Image\n            src={user.avatar_url}\n            alt={user.login}\n            width={32}\n            height={32}\n            className=\"rounded-full size-8\"\n          />\n        </div>\n        {!isCollapsed && (\n          <div className=\"flex flex-col text-xs min-w-0\">\n            <span className=\"font-medium truncate\">\n              {user.name || user.login}\n            </span>\n            <span className=\"text-muted-foreground truncate\">@{user.login}</span>\n          </div>\n        )}\n      </Link>\n      <ThemeToggle />\n    </div>\n  );\n}\n\nconst AppSidebar = () => {\n  const [pathname, setPathname] = useState<string | null>(null);\n  const actualPathname = usePathname();\n  const [openMenus, setOpenMenus] = useState<string[]>([\"Articles\"]);\n  const { state } = useSidebar();\n  const isCollapsed = state === \"collapsed\";\n\n  // Defer pathname access to hydration\n  useEffect(() => {\n    setPathname(actualPathname);\n  }, [actualPathname]);\n\n  const toggleMenu = (title: string) => {\n    setOpenMenus((prev) =>\n      prev.includes(title) ? prev.filter((t) => t !== title) : [...prev, title],\n    );\n  };\n\n  const isActive = (href?: string) => {\n    if (!href || !pathname) return false;\n    return pathname === href;\n  };\n\n  const isChildActive = (item: NavItem) => {\n    if (!item.children || !pathname) return false;\n    return item.children.some((child) => pathname === child.href);\n  };\n\n  return (\n    <Sidebar variant=\"inset\" collapsible=\"icon\">\n      <div className=\"px-4 py-2\">\n        <SidebarTrigger />\n      </div>\n      <SidebarHeader className=\"border-b border-sidebar-border px-4 py-4\">\n        <div className=\"flex items-center justify-between\">\n          <Link href=\"/cms\" className=\"flex items-center gap-3\">\n            <Logo />\n            {!isCollapsed && (\n              <span className=\"text-xl font-bold tracking-tight\">\n                md<span className=\"text-primary\">vault</span>\n              </span>\n            )}\n          </Link>\n        </div>\n      </SidebarHeader>\n\n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel>Navigation</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {navItems.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  {item.children ? (\n                    <>\n                      <SidebarMenuButton\n                        onClick={() => toggleMenu(item.title)}\n                        isActive={isChildActive(item)}\n                        className=\"justify-between\"\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          {item.icon}\n                          <span>{item.title}</span>\n                        </span>\n                        {openMenus.includes(item.title) ? (\n                          <IconChevronDown className=\"size-4\" />\n                        ) : (\n                          <IconChevronRight className=\"size-4\" />\n                        )}\n                      </SidebarMenuButton>\n                      <SidebarMenuSub\n                        className={cn(\n                          \"transition-all duration-200\",\n                          openMenus.includes(item.title) ? \"block\" : \"hidden\",\n                        )}\n                      >\n                        {item.children.map((child) => (\n                          <SidebarMenuSubItem key={child.href}>\n                            <SidebarMenuSubButton\n                              asChild\n                              isActive={isActive(child.href)}\n                            >\n                              <Link href={child.href as \"/\"}>\n                                {child.title === \"New Article\" && (\n                                  <IconPlus className=\"size-3\" />\n                                )}\n                                {child.title === \"All Articles\" && (\n                                  <IconList className=\"size-3\" />\n                                )}\n                                <span>{child.title}</span>\n                              </Link>\n                            </SidebarMenuSubButton>\n                          </SidebarMenuSubItem>\n                        ))}\n                      </SidebarMenuSub>\n                    </>\n                  ) : (\n                    <SidebarMenuButton asChild isActive={isActive(item.href)}>\n                      <Link href={(item.href ?? \"/\") as \"/\"}>\n                        {item.icon}\n                        <span>{item.title}</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  )}\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n\n      <SidebarSeparator />\n\n      <SidebarFooter className=\"p-4\">\n        <Suspense\n          fallback={\n            <div className=\"flex gap-2 items-center justify-between\">\n              <div className=\"flex items-center rounded-lg bg-muted/50 gap-3 flex-1 p-3 min-w-0 animate-pulse\">\n                <div className=\"size-8 rounded-full bg-muted shrink-0\" />\n                <div className=\"flex flex-col gap-1 min-w-0\">\n                  <div className=\"h-3 bg-muted rounded w-16\" />\n                  <div className=\"h-2 bg-muted rounded w-12\" />\n                </div>\n              </div>\n              <ThemeToggle />\n            </div>\n          }\n        >\n          <UserProfileFooter />\n        </Suspense>\n      </SidebarFooter>\n    </Sidebar>\n  );\n};\n\nexport default AppSidebar;\n"},"tags":["fixable"],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"\"use client\";\n\nimport {              {user.name || user.login}\n            </span>\n            <span className=\"text-muted-foreground truncate\">\n              @{user.login}</span>\n          </div>\n        )}\nexport default AppSidebar;\n","ops":[{"diffOp":{"equal":{"range":[0,23]}}},{"equalLines":{"line_count":155}},{"diffOp":{"equal":{"range":[23,144]}}},{"diffOp":{"insert":{"range":[144,159]}}},{"diffOp":{"equal":{"range":[159,172]}}},{"diffOp":{"insert":{"range":[144,157]}}},{"diffOp":{"equal":{"range":[172,207]}}},{"equalLines":{"line_count":140}},{"diffOp":{"equal":{"range":[207,235]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\shared\\components\\app-sidebar.tsx"},"span":null,"sourceCode":"\"use client\";\n\nimport {\n  IconBrandGithub,\n  IconChevronDown,\n  IconChevronRight,\n  IconFileText,\n  IconHome,\n  IconList,\n  IconPhoto,\n  IconPlus,\n  IconSettings,\n} from \"@tabler/icons-react\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { Suspense, useEffect, useState } from \"react\";\nimport { ThemeToggle } from \"@/components/theme-toggle\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n} from \"@/components/ui/sidebar\";\nimport { cn } from \"@/lib/utils\";\nimport { getGitHubUserAction } from \"@/features/settings/settings.actions\";\nimport { Logo } from \"./logo\";\n\ninterface NavItem {\n  title: string;\n  href?: string;\n  icon: React.ReactNode;\n  children?: { title: string; href: string }[];\n}\n\nconst navItems: NavItem[] = [\n  {\n    title: \"Dashboard\",\n    href: \"/cms\",\n    icon: <IconHome className=\"size-4\" />,\n  },\n  {\n    title: \"Articles\",\n    icon: <IconFileText className=\"size-4\" />,\n    children: [\n      { title: \"All Articles\", href: \"/cms/articles\" },\n      { title: \"New Article\", href: \"/cms/articles/new\" },\n    ],\n  },\n  {\n    title: \"Posts\",\n    icon: <IconFileText className=\"size-4\" />,\n    children: [\n      { title: \"All Posts\", href: \"/cms/posts\" },\n      { title: \"New Post\", href: \"/cms/posts/new\" },\n    ],\n  },\n  {\n    title: \"Media\",\n    href: \"/cms/media\",\n    icon: <IconPhoto className=\"size-4\" />,\n  },\n  {\n    title: \"Settings\",\n    href: \"/cms/settings\",\n    icon: <IconSettings className=\"size-4\" />,\n  },\n];\n\nfunction UserProfileFooter() {\n  const [user, setUser] = useState<{\n    login: string;\n    name: string | null;\n    avatar_url: string;\n  } | null>(null);\n  const { state } = useSidebar();\n  const isCollapsed = state === \"collapsed\";\n\n  useEffect(() => {\n    getGitHubUserAction().then((result) => {\n      if (result.success) {\n        setUser({\n          login: result.data.login,\n          name: result.data.name,\n          avatar_url: result.data.avatar_url,\n        });\n      }\n    });\n  }, []);\n\n  if (!user) {\n    return (\n      <div\n        className={cn(\n          \"flex gap-2\",\n          isCollapsed\n            ? \"flex-col items-center\"\n            : \"items-center justify-between\",\n        )}\n      >\n        <div\n          className={cn(\n            \"flex items-center rounded-lg bg-muted/50 animate-pulse\",\n            isCollapsed ? \"p-2 justify-center\" : \"gap-3 flex-1 p-3 min-w-0\",\n          )}\n        >\n          <div className=\"flex size-8 items-center justify-center rounded-full bg-primary/10 shrink-0\">\n            <IconBrandGithub className=\"size-4 text-primary\" />\n          </div>\n          {!isCollapsed && (\n            <div className=\"flex flex-col text-xs min-w-0\">\n              <span className=\"font-medium\">Loading...</span>\n            </div>\n          )}\n        </div>\n        <ThemeToggle />\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={cn(\n        \"flex gap-2\",\n        isCollapsed ? \"flex-col items-center\" : \"items-center justify-between\",\n      )}\n    >\n      <Link\n        href=\"/cms/settings\"\n        className={cn(\n          \"flex items-center rounded-lg bg-muted/50 hover:bg-muted/70 transition-colors cursor-pointer\",\n          isCollapsed ? \"p-2 justify-center\" : \"gap-3 flex-1 p-3 min-w-0\",\n        )}\n      >\n        <div className=\"relative shrink-0\">\n          <Image\n            src={user.avatar_url}\n            alt={user.login}\n            width={32}\n            height={32}\n            className=\"rounded-full size-8\"\n          />\n        </div>\n        {!isCollapsed && (\n          <div className=\"flex flex-col text-xs min-w-0\">\n            <span className=\"font-medium truncate\">\n              {user.name || user.login}\n            </span>\n            <span className=\"text-muted-foreground truncate\">@{user.login}</span>\n          </div>\n        )}\n      </Link>\n      <ThemeToggle />\n    </div>\n  );\n}\n\nconst AppSidebar = () => {\n  const [pathname, setPathname] = useState<string | null>(null);\n  const actualPathname = usePathname();\n  const [openMenus, setOpenMenus] = useState<string[]>([\"Articles\"]);\n  const { state } = useSidebar();\n  const isCollapsed = state === \"collapsed\";\n\n  // Defer pathname access to hydration\n  useEffect(() => {\n    setPathname(actualPathname);\n  }, [actualPathname]);\n\n  const toggleMenu = (title: string) => {\n    setOpenMenus((prev) =>\n      prev.includes(title) ? prev.filter((t) => t !== title) : [...prev, title],\n    );\n  };\n\n  const isActive = (href?: string) => {\n    if (!href || !pathname) return false;\n    return pathname === href;\n  };\n\n  const isChildActive = (item: NavItem) => {\n    if (!item.children || !pathname) return false;\n    return item.children.some((child) => pathname === child.href);\n  };\n\n  return (\n    <Sidebar variant=\"inset\" collapsible=\"icon\">\n      <div className=\"px-4 py-2\">\n        <SidebarTrigger />\n      </div>\n      <SidebarHeader className=\"border-b border-sidebar-border px-4 py-4\">\n        <div className=\"flex items-center justify-between\">\n          <Link href=\"/cms\" className=\"flex items-center gap-3\">\n            <Logo />\n            {!isCollapsed && (\n              <span className=\"text-xl font-bold tracking-tight\">\n                md<span className=\"text-primary\">vault</span>\n              </span>\n            )}\n          </Link>\n        </div>\n      </SidebarHeader>\n\n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel>Navigation</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {navItems.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  {item.children ? (\n                    <>\n                      <SidebarMenuButton\n                        onClick={() => toggleMenu(item.title)}\n                        isActive={isChildActive(item)}\n                        className=\"justify-between\"\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          {item.icon}\n                          <span>{item.title}</span>\n                        </span>\n                        {openMenus.includes(item.title) ? (\n                          <IconChevronDown className=\"size-4\" />\n                        ) : (\n                          <IconChevronRight className=\"size-4\" />\n                        )}\n                      </SidebarMenuButton>\n                      <SidebarMenuSub\n                        className={cn(\n                          \"transition-all duration-200\",\n                          openMenus.includes(item.title) ? \"block\" : \"hidden\",\n                        )}\n                      >\n                        {item.children.map((child) => (\n                          <SidebarMenuSubItem key={child.href}>\n                            <SidebarMenuSubButton\n                              asChild\n                              isActive={isActive(child.href)}\n                            >\n                              <Link href={child.href as \"/\"}>\n                                {child.title === \"New Article\" && (\n                                  <IconPlus className=\"size-3\" />\n                                )}\n                                {child.title === \"All Articles\" && (\n                                  <IconList className=\"size-3\" />\n                                )}\n                                <span>{child.title}</span>\n                              </Link>\n                            </SidebarMenuSubButton>\n                          </SidebarMenuSubItem>\n                        ))}\n                      </SidebarMenuSub>\n                    </>\n                  ) : (\n                    <SidebarMenuButton asChild isActive={isActive(item.href)}>\n                      <Link href={(item.href ?? \"/\") as \"/\"}>\n                        {item.icon}\n                        <span>{item.title}</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  )}\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n\n      <SidebarSeparator />\n\n      <SidebarFooter className=\"p-4\">\n        <Suspense\n          fallback={\n            <div className=\"flex gap-2 items-center justify-between\">\n              <div className=\"flex items-center rounded-lg bg-muted/50 gap-3 flex-1 p-3 min-w-0 animate-pulse\">\n                <div className=\"size-8 rounded-full bg-muted shrink-0\" />\n                <div className=\"flex flex-col gap-1 min-w-0\">\n                  <div className=\"h-3 bg-muted rounded w-16\" />\n                  <div className=\"h-2 bg-muted rounded w-12\" />\n                </div>\n              </div>\n              <ThemeToggle />\n            </div>\n          }\n        >\n          <UserProfileFooter />\n        </Suspense>\n      </SidebarFooter>\n    </Sidebar>\n  );\n};\n\nexport default AppSidebar;\n"},"tags":[],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"\"use client\";\r\n\r\n\n\nimport { useState } from \"react\";import { IconCheck, IconCopy } from \"@tabler/icons-react\";import { Button } from \"@/components/ui/button\";import { cn } from \"@/lib/utils\";import { toast } from \"sonner\";interface CopyToClipboardProps {  value: string;  className?: string;}export function CopyToClipboard({\n  value,className,\n}: Readonly<CopyToClipboardProps>) {  const [copied, setCopied] = useState(false);  const handleCopy = async () => {    try {      await navigator.clipboard.writeText(value);      setCopied(true);      toast.success(\"Copied to clipboard\");      setTimeout(() => setCopied(false), 2000);    } catch (_err) {      toast.error(\"Failed to copy\");  };  return (    <Button      variant=\"ghost\"      size=\"icon\"      className={cn(\n        \"size-8 h-8 w-8 hover:bg-primary/10 hover:text-primary\",,\n      )}      onClick={handleCopy}      title=\"Copy to clipboard\"    >      {copied ? (        <IconCheck className=\"size-4 animate-in zoom-in\" />      ) : (        <IconCopy className=\"size-4\" />      )}      <span className=\"sr-only\">Copy</span>    </Button>  );","ops":[{"diffOp":{"equal":{"range":[0,13]}}},{"diffOp":{"delete":{"range":[13,17]}}},{"diffOp":{"insert":{"range":[17,19]}}},{"diffOp":{"equal":{"range":[19,52]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[52,110]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[110,158]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[158,191]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[191,222]}}},{"diffOp":{"delete":{"range":[13,17]}}},{"diffOp":{"insert":{"range":[17,19]}}},{"diffOp":{"equal":{"range":[222,254]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[254,270]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[270,291]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[17,18]}}},{"diffOp":{"equal":{"range":[291,292]}}},{"diffOp":{"delete":{"range":[13,17]}}},{"diffOp":{"insert":{"range":[17,19]}}},{"diffOp":{"equal":{"range":[292,325]}}},{"diffOp":{"delete":{"range":[254,255]}}},{"diffOp":{"insert":{"range":[325,328]}}},{"diffOp":{"equal":{"range":[328,334]}}},{"diffOp":{"delete":{"range":[254,255]}}},{"diffOp":{"insert":{"range":[325,328]}}},{"diffOp":{"equal":{"range":[334,343]}}},{"diffOp":{"delete":{"range":[254,255]}}},{"diffOp":{"insert":{"range":[343,345]}}},{"diffOp":{"equal":{"range":[345,381]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[325,326]}}},{"diffOp":{"equal":{"range":[381,427]}}},{"diffOp":{"delete":{"range":[13,17]}}},{"diffOp":{"insert":{"range":[17,19]}}},{"diffOp":{"equal":{"range":[427,461]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[325,326]}}},{"diffOp":{"equal":{"range":[461,470]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[325,326]}}},{"diffOp":{"equal":{"range":[470,519]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[325,326]}}},{"diffOp":{"equal":{"range":[519,541]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[325,326]}}},{"diffOp":{"equal":{"range":[541,584]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[325,326]}}},{"diffOp":{"equal":{"range":[584,631]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[325,326]}}},{"diffOp":{"equal":{"range":[631,651]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[325,326]}}},{"diffOp":{"equal":{"range":[651,687]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[325,326]}}},{"diffOp":{"equal":{"range":[631,636]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[325,326]}}},{"diffOp":{"equal":{"range":[687,691]}}},{"diffOp":{"delete":{"range":[13,17]}}},{"diffOp":{"insert":{"range":[17,19]}}},{"diffOp":{"equal":{"range":[691,701]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[325,326]}}},{"diffOp":{"equal":{"range":[701,712]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[325,326]}}},{"diffOp":{"equal":{"range":[712,733]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[325,326]}}},{"diffOp":{"equal":{"range":[733,750]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[325,326]}}},{"diffOp":{"equal":{"range":[750,770]}}},{"diffOp":{"insert":{"range":[770,779]}}},{"diffOp":{"equal":{"range":[779,835]}}},{"diffOp":{"delete":{"range":[687,688]}}},{"diffOp":{"insert":{"range":[770,779]}}},{"diffOp":{"equal":{"range":[334,343]}}},{"diffOp":{"insert":{"range":[835,843]}}},{"diffOp":{"equal":{"range":[843,845]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[770,771]}}},{"diffOp":{"equal":{"range":[845,871]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[770,771]}}},{"diffOp":{"equal":{"range":[871,902]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[770,771]}}},{"diffOp":{"equal":{"range":[902,907]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[770,771]}}},{"diffOp":{"equal":{"range":[907,924]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[770,771]}}},{"diffOp":{"equal":{"range":[924,983]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[770,771]}}},{"diffOp":{"equal":{"range":[983,994]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[770,771]}}},{"diffOp":{"equal":{"range":[994,1033]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[770,771]}}},{"diffOp":{"equal":{"range":[1033,1041]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[770,771]}}},{"diffOp":{"equal":{"range":[1041,1084]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[770,771]}}},{"diffOp":{"equal":{"range":[1084,1097]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[770,771]}}},{"diffOp":{"equal":{"range":[1097,1101]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[770,771]}}},{"diffOp":{"equal":{"range":[345,346]}}},{"diffOp":{"delete":{"range":[13,15]}}},{"diffOp":{"insert":{"range":[770,771]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\shared\\components\\copy-to-clipboard.tsx"},"span":null,"sourceCode":"\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { IconCheck, IconCopy } from \"@tabler/icons-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { toast } from \"sonner\";\r\n\r\ninterface CopyToClipboardProps {\r\n  value: string;\r\n  className?: string;\r\n}\r\n\r\nexport function CopyToClipboard({ value, className }: Readonly<CopyToClipboardProps>) {\r\n  const [copied, setCopied] = useState(false);\r\n\r\n  const handleCopy = async () => {\r\n    try {\r\n      await navigator.clipboard.writeText(value);\r\n      setCopied(true);\r\n      toast.success(\"Copied to clipboard\");\r\n      setTimeout(() => setCopied(false), 2000);\r\n    } catch (_err) {\r\n      toast.error(\"Failed to copy\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      variant=\"ghost\"\r\n      size=\"icon\"\r\n      className={cn(\"size-8 h-8 w-8 hover:bg-primary/10 hover:text-primary\", className)}\r\n      onClick={handleCopy}\r\n      title=\"Copy to clipboard\"\r\n    >\r\n      {copied ? (\r\n        <IconCheck className=\"size-4 animate-in zoom-in\" />\r\n      ) : (\r\n        <IconCopy className=\"size-4\" />\r\n      )}\r\n      <span className=\"sr-only\">Copy</span>\r\n    </Button>\r\n  );\r\n}\r\n"},"tags":[],"source":null},{"category":"assist/source/organizeImports","severity":"error","description":"The imports and exports are not sorted.","message":[{"elements":[],"content":"The imports and exports are not sorted."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Safe fix: Organize Imports (Biome)"}]]},{"diff":{"dictionary":"\"use client\";\r\n\r\nimport { useStateIconCheck, IconCopy } from \"@tabler/icons-react\";\r\nimport { Buttontoast@/components/ui/buttonsonner\";cn } from \"@/libcomponents/ui/utilsbutton@/lib/utils\r\n\r\ninterface CopyToClipboardProps {\r  );\r\n}\r\n","ops":[{"diffOp":{"equal":{"range":[0,13]}}},{"diffOp":{"equal":{"range":[13,26]}}},{"diffOp":{"delete":{"range":[26,34]}}},{"diffOp":{"insert":{"range":[34,53]}}},{"diffOp":{"equal":{"range":[53,62]}}},{"diffOp":{"insert":{"range":[62,76]}}},{"diffOp":{"equal":{"range":[76,83]}}},{"diffOp":{"equal":{"range":[83,94]}}},{"diffOp":{"delete":{"range":[34,53]}}},{"diffOp":{"insert":{"range":[26,34]}}},{"diffOp":{"equal":{"range":[53,62]}}},{"diffOp":{"delete":{"range":[62,76]}}},{"diffOp":{"equal":{"range":[76,83]}}},{"diffOp":{"equal":{"range":[83,94]}}},{"diffOp":{"delete":{"range":[94,100]}}},{"diffOp":{"insert":{"range":[100,105]}}},{"diffOp":{"equal":{"range":[53,62]}}},{"diffOp":{"delete":{"range":[105,127]}}},{"diffOp":{"insert":{"range":[127,133]}}},{"diffOp":{"equal":{"range":[133,135]}}},{"diffOp":{"equal":{"range":[83,94]}}},{"diffOp":{"delete":{"range":[135,137]}}},{"diffOp":{"insert":{"range":[94,100]}}},{"diffOp":{"equal":{"range":[137,148]}}},{"diffOp":{"delete":{"range":[148,151]}}},{"diffOp":{"insert":{"range":[151,164]}}},{"diffOp":{"equal":{"range":[164,165]}}},{"diffOp":{"delete":{"range":[165,170]}}},{"diffOp":{"insert":{"range":[170,176]}}},{"diffOp":{"equal":{"range":[133,135]}}},{"diffOp":{"equal":{"range":[83,94]}}},{"diffOp":{"delete":{"range":[100,105]}}},{"diffOp":{"insert":{"range":[135,137]}}},{"diffOp":{"equal":{"range":[137,146]}}},{"diffOp":{"delete":{"range":[127,133]}}},{"diffOp":{"insert":{"range":[176,187]}}},{"diffOp":{"equal":{"range":[133,135]}}},{"diffOp":{"equal":{"range":[187,224]}}},{"equalLines":{"line_count":33}},{"diffOp":{"equal":{"range":[224,233]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\shared\\components\\copy-to-clipboard.tsx"},"span":[17,50],"sourceCode":"\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { IconCheck, IconCopy } from \"@tabler/icons-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { toast } from \"sonner\";\r\n\r\ninterface CopyToClipboardProps {\r\n  value: string;\r\n  className?: string;\r\n}\r\n\r\nexport function CopyToClipboard({ value, className }: Readonly<CopyToClipboardProps>) {\r\n  const [copied, setCopied] = useState(false);\r\n\r\n  const handleCopy = async () => {\r\n    try {\r\n      await navigator.clipboard.writeText(value);\r\n      setCopied(true);\r\n      toast.success(\"Copied to clipboard\");\r\n      setTimeout(() => setCopied(false), 2000);\r\n    } catch (_err) {\r\n      toast.error(\"Failed to copy\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      variant=\"ghost\"\r\n      size=\"icon\"\r\n      className={cn(\"size-8 h-8 w-8 hover:bg-primary/10 hover:text-primary\", className)}\r\n      onClick={handleCopy}\r\n      title=\"Copy to clipboard\"\r\n    >\r\n      {copied ? (\r\n        <IconCheck className=\"size-4 animate-in zoom-in\" />\r\n      ) : (\r\n        <IconCopy className=\"size-4\" />\r\n      )}\r\n      <span className=\"sr-only\">Copy</span>\r\n    </Button>\r\n  );\r\n}\r\n"},"tags":["fixable"],"source":null},{"category":"assist/source/organizeImports","severity":"error","description":"The imports and exports are not sorted.","message":[{"elements":[],"content":"The imports and exports are not sorted."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Safe fix: Organize Imports (Biome)"}]]},{"diff":{"dictionary":"import {\n  IconArrowRight,\n  IconBrandGithub,  IconRocket,\n  IconSparkles,\n} from \"@tabler/icons-react\";\nimport LinkImage from \"next/linkimage\";{ Button }@/componentsnext/ui/buttontype cnForwardRefExoticComponent, RefAttributes } from \"@/lib/utilsreact\nimport { LogoButton.logo{ cn }utils ForwardRefExoticComponent,RefAttributes./logo\n\nconst LandingComponent = ({\nexport default LandingComponent;\n","ops":[{"diffOp":{"equal":{"range":[0,45]}}},{"equalLines":{"line_count":2}},{"diffOp":{"equal":{"range":[45,104]}}},{"diffOp":{"equal":{"range":[104,112]}}},{"diffOp":{"delete":{"range":[112,116]}}},{"diffOp":{"insert":{"range":[116,121]}}},{"diffOp":{"equal":{"range":[121,133]}}},{"diffOp":{"delete":{"range":[133,137]}}},{"diffOp":{"insert":{"range":[137,142]}}},{"diffOp":{"equal":{"range":[142,144]}}},{"diffOp":{"equal":{"range":[104,112]}}},{"diffOp":{"delete":{"range":[144,154]}}},{"diffOp":{"insert":{"range":[112,116]}}},{"diffOp":{"equal":{"range":[121,128]}}},{"diffOp":{"delete":{"range":[154,166]}}},{"diffOp":{"insert":{"range":[166,170]}}},{"diffOp":{"equal":{"range":[170,171]}}},{"diffOp":{"delete":{"range":[171,180]}}},{"diffOp":{"insert":{"range":[133,137]}}},{"diffOp":{"equal":{"range":[142,144]}}},{"diffOp":{"equal":{"range":[104,112]}}},{"diffOp":{"insert":{"range":[180,185]}}},{"diffOp":{"equal":{"range":[144,146]}}},{"diffOp":{"delete":{"range":[185,187]}}},{"diffOp":{"insert":{"range":[187,227]}}},{"diffOp":{"equal":{"range":[227,236]}}},{"diffOp":{"delete":{"range":[236,247]}}},{"diffOp":{"insert":{"range":[247,252]}}},{"diffOp":{"equal":{"range":[142,144]}}},{"diffOp":{"equal":{"range":[252,262]}}},{"diffOp":{"delete":{"range":[262,266]}}},{"diffOp":{"insert":{"range":[266,272]}}},{"diffOp":{"equal":{"range":[227,236]}}},{"diffOp":{"delete":{"range":[272,273]}}},{"diffOp":{"insert":{"range":[154,166]}}},{"diffOp":{"equal":{"range":[170,171]}}},{"diffOp":{"delete":{"range":[273,277]}}},{"diffOp":{"insert":{"range":[171,180]}}},{"diffOp":{"equal":{"range":[142,144]}}},{"diffOp":{"equal":{"range":[252,260]}}},{"diffOp":{"delete":{"range":[116,121]}}},{"diffOp":{"insert":{"range":[277,283]}}},{"diffOp":{"equal":{"range":[121,128]}}},{"diffOp":{"delete":{"range":[166,170]}}},{"diffOp":{"insert":{"range":[236,241]}}},{"diffOp":{"equal":{"range":[170,171]}}},{"diffOp":{"delete":{"range":[137,142]}}},{"diffOp":{"insert":{"range":[283,288]}}},{"diffOp":{"equal":{"range":[142,144]}}},{"diffOp":{"equal":{"range":[252,260]}}},{"diffOp":{"delete":{"range":[180,185]}}},{"diffOp":{"equal":{"range":[277,278]}}},{"diffOp":{"delete":{"range":[288,315]}}},{"diffOp":{"equal":{"range":[227,228]}}},{"diffOp":{"delete":{"range":[315,328]}}},{"diffOp":{"insert":{"range":[262,266]}}},{"diffOp":{"equal":{"range":[227,236]}}},{"diffOp":{"delete":{"range":[247,252]}}},{"diffOp":{"insert":{"range":[328,334]}}},{"diffOp":{"equal":{"range":[142,144]}}},{"diffOp":{"equal":{"range":[334,363]}}},{"equalLines":{"line_count":129}},{"diffOp":{"equal":{"range":[363,397]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\shared\\components\\landing-component.tsx"},"span":[0,139],"sourceCode":"import {\n  IconArrowRight,\n  IconBrandGithub,\n  IconMarkdown,\n  type IconProps,\n  IconRocket,\n  IconSparkles,\n} from \"@tabler/icons-react\";\nimport Link from \"next/link\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\nimport { Logo } from \"./logo\";\nimport Image from \"next/image\";\nimport type { ForwardRefExoticComponent, RefAttributes } from \"react\";\n\nconst LandingComponent = ({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) => {\n\n  const features: {\n    icon: ForwardRefExoticComponent<IconProps & RefAttributes<SVGSVGElement>>,\n    text: string\n  }[] = [\n      {\n        icon: IconMarkdown,\n        text: \"MDX Editor\"\n      },\n      {\n        icon: IconBrandGithub,\n        text: \"Git Versioning\"\n      },\n      {\n        icon: IconRocket,\n        text: \"Fast Deploy\"\n      },\n    ]\n\n  return (\n    <div\n      className={cn(\n        \"relative flex h-screen w-full flex-col items-center justify-center overflow-hidden bg-background px-4 py-8 text-center\",\n        className,\n      )}\n      {...props}\n    >\n      {/* Enhanced Background Elements */}\n      <div className=\"absolute inset-0 -z-10 h-full w-full bg-[linear-gradient(to_right,#8080800a_1px,transparent_1px),linear-gradient(to_bottom,#8080800a_1px,transparent_1px)] bg-size-[44px_44px] mask-[radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)]\" />\n\n      <div className=\"absolute w-full\">\n        <Image src={\"/landing-bg.svg\"} alt=\"bg\"\n          width={100} height={100} className=\"w-full h-f\" />\n      </div>\n\n      {/* Animated gradient orbs */}\n      <div className=\"absolute top-0 left-1/2 -z-10 h-100 w-150 -translate-x-1/2 bg-primary/15 blur-[120px] opacity-60 animate-pulse\" />\n      <div\n        className=\"absolute bottom-20 right-0 -z-10 h-80 w-80 bg-accent/10 blur-[100px] opacity-40 animate-pulse\"\n        style={{ animationDelay: \"1s\" }}\n      />\n      <div className=\"absolute top-1/3 left-0 -z-10 h-60 w-60 bg-primary/5 blur-[90px] opacity-30\" />\n\n      <div className=\"container relative z-10 mx-auto flex max-w-4xl flex-col items-center gap-4 justify-center h-full\">\n        {/* Logo with enhanced animation */}\n        <div className=\"animate-in fade-in slide-in-from-top-8 duration-1000 shrink-0\">\n          <div className=\"relative\">\n            <div className=\"absolute inset-0 -z-10 rounded-full bg-primary/10 blur-2xl\" />\n            <Logo className=\"scale-100 sm:scale-125\" />\n          </div>\n        </div>\n\n        {/* Enhanced Badge with icon animation */}\n        <div className=\"inline-flex items-center gap-2 rounded-full border bg-muted/50 px-3 py-1.5 text-xs sm:text-sm font-medium text-muted-foreground backdrop-blur-sm animate-in fade-in slide-in-from-top-4 duration-1000 delay-150 hover:bg-muted/70 transition-colors shrink-0\">\n          <IconSparkles\n            className=\"h-3 w-3 sm:h-4 sm:w-4 animate-spin shrink-0\"\n            style={{ animationDuration: \"3s\" }}\n          />\n          <span className=\"whitespace-nowrap\">Modern CMS for GitHub</span>\n        </div>\n\n        {/* Enhanced Heading with better typography */}\n        <div className=\"flex flex-col gap-3 animate-in fade-in slide-in-from-bottom-4 duration-1000 delay-200 max-w-3xl shrink-0\">\n          <div className=\"space-y-2\">\n            <h1 className=\"text-3xl font-bold tracking-tight sm:text-5xl lg:text-6xl leading-tight\">\n              Your Markdown, <br />\n              <span className=\"bg-linear-to-r from-primary via-primary/80 to-accent bg-clip-text text-gray-500\">\n                Perfectly Vaulted\n              </span>\n            </h1>\n          </div>\n          <p className=\"mx-auto max-w-2xl text-sm sm:text-base text-muted-foreground leading-snug\">\n            A powerful, intuitive CMS built for GitHub. Create, edit, and manage\n            markdown content with a modern editor and seamless Git integration.\n          </p>\n        </div>\n\n        {/* Enhanced CTAs with better styling */}\n        <div className=\"flex flex-col items-center gap-3 sm:flex-row animate-in fade-in slide-in-from-bottom-4 duration-1000 delay-500 w-full sm:w-auto shrink-0\">\n          <Button\n            size=\"sm\"\n            className=\"h-10 px-6 text-sm font-semibold gap-2 group/btn relative overflow-hidden\"\n            asChild\n          >\n            <Link href=\"/cms\" className=\"flex items-center justify-center\">\n              <span>Get Started</span>\n              <IconRocket className=\"h-4 w-4 group-hover/btn:translate-y-0.5 transition-transform\" />\n            </Link>\n          </Button>\n          <Button\n            size=\"sm\"\n            variant=\"outline\"\n            className=\"h-10 px-6 text-sm font-semibold gap-2 group/btn\"\n            asChild\n          >\n            <Link\n              href=\"https://github.com/victor3spoir/mdvault\"\n              target=\"_blank\"\n              className=\"flex items-center justify-center\"\n            >\n              <IconBrandGithub className=\"h-4 w-4\" />\n              <span>Explore Source</span>\n              <IconArrowRight className=\"h-3 w-3 group-hover/btn:translate-x-1 transition-transform\" />\n            </Link>\n          </Button>\n        </div>\n\n        {/* Compact Features Grid */}\n        <div className=\"hidden w-full lg:flex gap-6 mt-6 animate-in fade-in duration-1000 delay-700 shrink-0 text-center\">\n\n          {features.map(feature => (\n            <div key={feature.text} className=\"group flex-1 flex flex-col items-center gap-2 transition-all duration-300 hover:bg-muted/20 p-2 rounded-lg\">\n              <div className=\"flex h-10 w-10 items-center justify-center rounded-lg bg-linear-to-br from-primary/20 to-accent/10 text-primary transition-all duration-300 group-hover:scale-110 shrink-0\">\n                <feature.icon className=\"h-10 w-10\" />\n              </div>\n              <h3 className=\"text-xs font-semibold text-foreground\">\n                {feature.text}\n              </h3>\n            </div>\n\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LandingComponent;\n"},"tags":["fixable"],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"import {\n  IconArrowRight,\n  IconBrandGithub,  ...props\n}: React.ComponentProps<\"div\">) => {\n\n  const features: {\n    icon: ForwardRefExoticComponent<IconProps & RefAttributes<SVGSVGElement>>,;\n    text: string\n  }[] = [\n      {\n        icon: IconMarkdown,\ntext: \"MDX Editor\"},\nicon: IconBrandGithub,\ntext: \"Git Versioning\"icon: IconRocket,\ntext: \"Fast Deploy\"]\n\n  return (\n      <div className=\"absolute w-full\">\n        <Image\n          src={\"/landing-bg.svg\"}alt=\"bg\"\n          width={100}height={100}className=\"w-full h-f\"/>\n      </div>\n\n        {/* Compact Features Grid */}\n        <div className=\"hidden w-full lg:flex gap-6 mt-6 animate-in fade-in duration-1000 delay-700 shrink-0 text-center\">\n          {features.map((feature) => (\n            <div\n              key={feature.text}className=\"group flex-1 flex flex-col items-center gap-2 transition-all duration-300 hover:bg-muted/20 p-2 rounded-lg\">\n              <div className=\"flex h-10 w-10 items-center justify-center rounded-lg bg-linear-to-br from-primary/20 to-accent/10 text-primary transition-all duration-300 group-hover:scale-110 shrink-0\">\n                <feature.icon className=\"h-10 w-10\" />                {feature.text}\n              </h3>\n            </div>\n          ))}\n        </div>\nexport default LandingComponent;\n","ops":[{"diffOp":{"equal":{"range":[0,45]}}},{"equalLines":{"line_count":14}},{"diffOp":{"equal":{"range":[45,93]}}},{"diffOp":{"delete":{"range":[93,94]}}},{"diffOp":{"equal":{"range":[94,191]}}},{"diffOp":{"delete":{"range":[191,192]}}},{"diffOp":{"insert":{"range":[192,193]}}},{"diffOp":{"equal":{"range":[193,210]}}},{"diffOp":{"insert":{"range":[192,193]}}},{"diffOp":{"equal":{"range":[210,221]}}},{"diffOp":{"delete":{"range":[221,227]}}},{"diffOp":{"insert":{"range":[221,225]}}},{"diffOp":{"equal":{"range":[227,229]}}},{"diffOp":{"delete":{"range":[229,237]}}},{"diffOp":{"insert":{"range":[229,235]}}},{"diffOp":{"equal":{"range":[237,257]}}},{"diffOp":{"delete":{"range":[229,237]}}},{"diffOp":{"insert":{"range":[229,235]}}},{"diffOp":{"equal":{"range":[257,275]}}},{"diffOp":{"insert":{"range":[191,192]}}},{"diffOp":{"equal":{"range":[210,211]}}},{"diffOp":{"delete":{"range":[229,235]}}},{"diffOp":{"insert":{"range":[229,233]}}},{"diffOp":{"equal":{"range":[275,278]}}},{"diffOp":{"delete":{"range":[229,235]}}},{"diffOp":{"insert":{"range":[229,233]}}},{"diffOp":{"equal":{"range":[227,229]}}},{"diffOp":{"delete":{"range":[229,237]}}},{"diffOp":{"insert":{"range":[229,235]}}},{"diffOp":{"equal":{"range":[278,301]}}},{"diffOp":{"delete":{"range":[229,237]}}},{"diffOp":{"insert":{"range":[229,235]}}},{"diffOp":{"equal":{"range":[301,323]}}},{"diffOp":{"insert":{"range":[191,192]}}},{"diffOp":{"equal":{"range":[210,211]}}},{"diffOp":{"delete":{"range":[229,235]}}},{"diffOp":{"insert":{"range":[229,233]}}},{"diffOp":{"equal":{"range":[275,278]}}},{"diffOp":{"delete":{"range":[229,235]}}},{"diffOp":{"insert":{"range":[229,233]}}},{"diffOp":{"equal":{"range":[227,229]}}},{"diffOp":{"delete":{"range":[229,237]}}},{"diffOp":{"insert":{"range":[229,235]}}},{"diffOp":{"equal":{"range":[323,341]}}},{"diffOp":{"delete":{"range":[229,237]}}},{"diffOp":{"insert":{"range":[229,235]}}},{"diffOp":{"equal":{"range":[341,360]}}},{"diffOp":{"insert":{"range":[191,192]}}},{"diffOp":{"equal":{"range":[210,211]}}},{"diffOp":{"delete":{"range":[229,235]}}},{"diffOp":{"insert":{"range":[229,233]}}},{"diffOp":{"equal":{"range":[275,278]}}},{"diffOp":{"delete":{"range":[229,233]}}},{"diffOp":{"insert":{"range":[94,96]}}},{"diffOp":{"equal":{"range":[360,361]}}},{"diffOp":{"insert":{"range":[192,193]}}},{"diffOp":{"equal":{"range":[361,373]}}},{"equalLines":{"line_count":9}},{"diffOp":{"equal":{"range":[373,428]}}},{"diffOp":{"delete":{"range":[94,95]}}},{"diffOp":{"insert":{"range":[428,439]}}},{"diffOp":{"equal":{"range":[439,462]}}},{"diffOp":{"delete":{"range":[94,95]}}},{"diffOp":{"insert":{"range":[428,439]}}},{"diffOp":{"equal":{"range":[462,492]}}},{"diffOp":{"delete":{"range":[94,95]}}},{"diffOp":{"insert":{"range":[428,439]}}},{"diffOp":{"equal":{"range":[492,504]}}},{"diffOp":{"delete":{"range":[94,95]}}},{"diffOp":{"insert":{"range":[428,439]}}},{"diffOp":{"equal":{"range":[504,526]}}},{"diffOp":{"delete":{"range":[94,95]}}},{"diffOp":{"insert":{"range":[428,437]}}},{"diffOp":{"equal":{"range":[526,542]}}},{"equalLines":{"line_count":71}},{"diffOp":{"equal":{"range":[542,703]}}},{"diffOp":{"delete":{"range":[210,211]}}},{"diffOp":{"equal":{"range":[703,728]}}},{"diffOp":{"insert":{"range":[728,729]}}},{"diffOp":{"equal":{"range":[729,736]}}},{"diffOp":{"insert":{"range":[736,737]}}},{"diffOp":{"equal":{"range":[737,759]}}},{"diffOp":{"delete":{"range":[737,738]}}},{"diffOp":{"insert":{"range":[759,774]}}},{"diffOp":{"equal":{"range":[774,792]}}},{"diffOp":{"delete":{"range":[737,738]}}},{"diffOp":{"insert":{"range":[759,774]}}},{"diffOp":{"equal":{"range":[792,910]}}},{"diffOp":{"insert":{"range":[759,772]}}},{"diffOp":{"equal":{"range":[910,1169]}}},{"equalLines":{"line_count":2}},{"diffOp":{"equal":{"range":[1169,1238]}}},{"diffOp":{"delete":{"range":[210,211]}}},{"diffOp":{"equal":{"range":[1238,1267]}}},{"equalLines":{"line_count":4}},{"diffOp":{"equal":{"range":[1267,1301]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\shared\\components\\landing-component.tsx"},"span":null,"sourceCode":"import {\n  IconArrowRight,\n  IconBrandGithub,\n  IconMarkdown,\n  type IconProps,\n  IconRocket,\n  IconSparkles,\n} from \"@tabler/icons-react\";\nimport Link from \"next/link\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\nimport { Logo } from \"./logo\";\nimport Image from \"next/image\";\nimport type { ForwardRefExoticComponent, RefAttributes } from \"react\";\n\nconst LandingComponent = ({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) => {\n\n  const features: {\n    icon: ForwardRefExoticComponent<IconProps & RefAttributes<SVGSVGElement>>,\n    text: string\n  }[] = [\n      {\n        icon: IconMarkdown,\n        text: \"MDX Editor\"\n      },\n      {\n        icon: IconBrandGithub,\n        text: \"Git Versioning\"\n      },\n      {\n        icon: IconRocket,\n        text: \"Fast Deploy\"\n      },\n    ]\n\n  return (\n    <div\n      className={cn(\n        \"relative flex h-screen w-full flex-col items-center justify-center overflow-hidden bg-background px-4 py-8 text-center\",\n        className,\n      )}\n      {...props}\n    >\n      {/* Enhanced Background Elements */}\n      <div className=\"absolute inset-0 -z-10 h-full w-full bg-[linear-gradient(to_right,#8080800a_1px,transparent_1px),linear-gradient(to_bottom,#8080800a_1px,transparent_1px)] bg-size-[44px_44px] mask-[radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)]\" />\n\n      <div className=\"absolute w-full\">\n        <Image src={\"/landing-bg.svg\"} alt=\"bg\"\n          width={100} height={100} className=\"w-full h-f\" />\n      </div>\n\n      {/* Animated gradient orbs */}\n      <div className=\"absolute top-0 left-1/2 -z-10 h-100 w-150 -translate-x-1/2 bg-primary/15 blur-[120px] opacity-60 animate-pulse\" />\n      <div\n        className=\"absolute bottom-20 right-0 -z-10 h-80 w-80 bg-accent/10 blur-[100px] opacity-40 animate-pulse\"\n        style={{ animationDelay: \"1s\" }}\n      />\n      <div className=\"absolute top-1/3 left-0 -z-10 h-60 w-60 bg-primary/5 blur-[90px] opacity-30\" />\n\n      <div className=\"container relative z-10 mx-auto flex max-w-4xl flex-col items-center gap-4 justify-center h-full\">\n        {/* Logo with enhanced animation */}\n        <div className=\"animate-in fade-in slide-in-from-top-8 duration-1000 shrink-0\">\n          <div className=\"relative\">\n            <div className=\"absolute inset-0 -z-10 rounded-full bg-primary/10 blur-2xl\" />\n            <Logo className=\"scale-100 sm:scale-125\" />\n          </div>\n        </div>\n\n        {/* Enhanced Badge with icon animation */}\n        <div className=\"inline-flex items-center gap-2 rounded-full border bg-muted/50 px-3 py-1.5 text-xs sm:text-sm font-medium text-muted-foreground backdrop-blur-sm animate-in fade-in slide-in-from-top-4 duration-1000 delay-150 hover:bg-muted/70 transition-colors shrink-0\">\n          <IconSparkles\n            className=\"h-3 w-3 sm:h-4 sm:w-4 animate-spin shrink-0\"\n            style={{ animationDuration: \"3s\" }}\n          />\n          <span className=\"whitespace-nowrap\">Modern CMS for GitHub</span>\n        </div>\n\n        {/* Enhanced Heading with better typography */}\n        <div className=\"flex flex-col gap-3 animate-in fade-in slide-in-from-bottom-4 duration-1000 delay-200 max-w-3xl shrink-0\">\n          <div className=\"space-y-2\">\n            <h1 className=\"text-3xl font-bold tracking-tight sm:text-5xl lg:text-6xl leading-tight\">\n              Your Markdown, <br />\n              <span className=\"bg-linear-to-r from-primary via-primary/80 to-accent bg-clip-text text-gray-500\">\n                Perfectly Vaulted\n              </span>\n            </h1>\n          </div>\n          <p className=\"mx-auto max-w-2xl text-sm sm:text-base text-muted-foreground leading-snug\">\n            A powerful, intuitive CMS built for GitHub. Create, edit, and manage\n            markdown content with a modern editor and seamless Git integration.\n          </p>\n        </div>\n\n        {/* Enhanced CTAs with better styling */}\n        <div className=\"flex flex-col items-center gap-3 sm:flex-row animate-in fade-in slide-in-from-bottom-4 duration-1000 delay-500 w-full sm:w-auto shrink-0\">\n          <Button\n            size=\"sm\"\n            className=\"h-10 px-6 text-sm font-semibold gap-2 group/btn relative overflow-hidden\"\n            asChild\n          >\n            <Link href=\"/cms\" className=\"flex items-center justify-center\">\n              <span>Get Started</span>\n              <IconRocket className=\"h-4 w-4 group-hover/btn:translate-y-0.5 transition-transform\" />\n            </Link>\n          </Button>\n          <Button\n            size=\"sm\"\n            variant=\"outline\"\n            className=\"h-10 px-6 text-sm font-semibold gap-2 group/btn\"\n            asChild\n          >\n            <Link\n              href=\"https://github.com/victor3spoir/mdvault\"\n              target=\"_blank\"\n              className=\"flex items-center justify-center\"\n            >\n              <IconBrandGithub className=\"h-4 w-4\" />\n              <span>Explore Source</span>\n              <IconArrowRight className=\"h-3 w-3 group-hover/btn:translate-x-1 transition-transform\" />\n            </Link>\n          </Button>\n        </div>\n\n        {/* Compact Features Grid */}\n        <div className=\"hidden w-full lg:flex gap-6 mt-6 animate-in fade-in duration-1000 delay-700 shrink-0 text-center\">\n\n          {features.map(feature => (\n            <div key={feature.text} className=\"group flex-1 flex flex-col items-center gap-2 transition-all duration-300 hover:bg-muted/20 p-2 rounded-lg\">\n              <div className=\"flex h-10 w-10 items-center justify-center rounded-lg bg-linear-to-br from-primary/20 to-accent/10 text-primary transition-all duration-300 group-hover:scale-110 shrink-0\">\n                <feature.icon className=\"h-10 w-10\" />\n              </div>\n              <h3 className=\"text-xs font-semibold text-foreground\">\n                {feature.text}\n              </h3>\n            </div>\n\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LandingComponent;\n"},"tags":[],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"export function formatDate(date: Date) {\n  return date.toLocaleDateString(\"fr-FR\", {\n    year: \"numeric\",    const date = new Date(timestamp);\n    // Use a stable 'now' for build environments, actual 'now' for runtime\n    const now =\n      typeof window === \"undefined\" &&process.env.NEXT_PHASE === \"phase-production-build\"\n              ? new Date(timestamp) // Default to same time as the event to be safe during build\n: new Date();\n\n    const diffMs = now.getTime() - date.getTime();\nconst diffMins = Math.floor(diffMs / 60000);\nconst diffHours = Math.floor(diffMs / 3600000);\nconst diffDays = Math.floor(diffMs / 86400000);\n\nif (diffMins < 1) return \"Just now\";\nif (diffMins < 60) return `${diffMins}m ago`;\nif (diffHours < 24) return `${diffHours}h ago`;\nif (diffDays < 7) return `${diffDays}d ago`;\n\nreturn new Date(timestamp).toLocaleDateString();\n  } catch {\n    return new Date(timestamp).toLocaleDateString();\n  }\n};\n","ops":[{"diffOp":{"equal":{"range":[0,105]}}},{"equalLines":{"line_count":6}},{"diffOp":{"equal":{"range":[105,233]}}},{"diffOp":{"delete":{"range":[105,106]}}},{"diffOp":{"insert":{"range":[233,240]}}},{"diffOp":{"equal":{"range":[240,272]}}},{"diffOp":{"delete":{"range":[105,106]}}},{"diffOp":{"insert":{"range":[233,240]}}},{"diffOp":{"equal":{"range":[272,324]}}},{"diffOp":{"delete":{"range":[324,330]}}},{"diffOp":{"insert":{"range":[330,338]}}},{"diffOp":{"equal":{"range":[338,421]}}},{"diffOp":{"delete":{"range":[330,336]}}},{"diffOp":{"insert":{"range":[330,338]}}},{"diffOp":{"equal":{"range":[421,435]}}},{"diffOp":{"delete":{"range":[105,109]}}},{"diffOp":{"equal":{"range":[435,487]}}},{"diffOp":{"delete":{"range":[105,107]}}},{"diffOp":{"insert":{"range":[105,109]}}},{"diffOp":{"equal":{"range":[487,532]}}},{"diffOp":{"delete":{"range":[105,107]}}},{"diffOp":{"insert":{"range":[105,109]}}},{"diffOp":{"equal":{"range":[532,580]}}},{"diffOp":{"delete":{"range":[105,107]}}},{"diffOp":{"insert":{"range":[105,109]}}},{"diffOp":{"equal":{"range":[580,629]}}},{"diffOp":{"delete":{"range":[105,107]}}},{"diffOp":{"insert":{"range":[105,109]}}},{"diffOp":{"equal":{"range":[629,666]}}},{"diffOp":{"delete":{"range":[105,107]}}},{"diffOp":{"insert":{"range":[105,109]}}},{"diffOp":{"equal":{"range":[666,712]}}},{"diffOp":{"delete":{"range":[105,107]}}},{"diffOp":{"insert":{"range":[105,109]}}},{"diffOp":{"equal":{"range":[712,760]}}},{"diffOp":{"delete":{"range":[105,107]}}},{"diffOp":{"insert":{"range":[105,109]}}},{"diffOp":{"equal":{"range":[760,806]}}},{"diffOp":{"delete":{"range":[105,107]}}},{"diffOp":{"insert":{"range":[105,109]}}},{"diffOp":{"equal":{"range":[806,927]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"features\\shared\\shared.utils.ts"},"span":null,"sourceCode":"export function formatDate(date: Date) {\n  return date.toLocaleDateString(\"fr-FR\", {\n    year: \"numeric\",\n    month: \"short\",\n    day: \"numeric\",\n  });\n}\nexport const formatTime = (timestamp: string): string => {\n  try {\n    const date = new Date(timestamp);\n    // Use a stable 'now' for build environments, actual 'now' for runtime\n    const now = typeof window === \"undefined\" && process.env.NEXT_PHASE === \"phase-production-build\"\n      ? new Date(timestamp) // Default to same time as the event to be safe during build\n      : new Date();\n    \n    const diffMs = now.getTime() - date.getTime();\n  const diffMins = Math.floor(diffMs / 60000);\n  const diffHours = Math.floor(diffMs / 3600000);\n  const diffDays = Math.floor(diffMs / 86400000);\n\n  if (diffMins < 1) return \"Just now\";\n  if (diffMins < 60) return `${diffMins}m ago`;\n  if (diffHours < 24) return `${diffHours}h ago`;\n  if (diffDays < 7) return `${diffDays}d ago`;\n\n  return new Date(timestamp).toLocaleDateString();\n  } catch {\n    return new Date(timestamp).toLocaleDateString();\n  }\n};\n"},"tags":[],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"export interface EnvVars {\n  NODE_ENV: string | undefined;\n  GITHUB_TOKEN: string;  // Validation: Check token format (NEVER log the actual token)\n  const validTokenPrefixes = [\"ghp_\", \"github_pat_\", \"ghs_\", \"ghu_\"];\n  const isValidToken = validTokenPrefixes.some((prefix) =>\n    token.startsWith(prefix),\n  );\n\n  if (!isValidToken) {  };\n}\n","ops":[{"diffOp":{"equal":{"range":[0,82]}}},{"equalLines":{"line_count":28}},{"diffOp":{"equal":{"range":[82,275]}}},{"diffOp":{"delete":{"range":[82,83]}}},{"diffOp":{"insert":{"range":[275,280]}}},{"diffOp":{"equal":{"range":[280,304]}}},{"diffOp":{"insert":{"range":[304,308]}}},{"diffOp":{"equal":{"range":[308,334]}}},{"equalLines":{"line_count":32}},{"diffOp":{"equal":{"range":[334,341]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"lib\\env.ts"},"span":null,"sourceCode":"export interface EnvVars {\n  NODE_ENV: string | undefined;\n  GITHUB_TOKEN: string;\n  GITHUB_OWNER: string;\n  GITHUB_REPO: string;\n}\n\nexport default function getenv(): EnvVars {\n  const NODE_ENV = process.env.NODE_ENV;\n  const GITHUB_TOKEN = process.env.GITHUB_TOKEN;\n  const GITHUB_OWNER = process.env.GITHUB_OWNER;\n  const GITHUB_REPO = process.env.GITHUB_REPO;\n\n  // Validation: Check required env vars\n  const required = { GITHUB_TOKEN, GITHUB_OWNER, GITHUB_REPO };\n  const missing = Object.entries(required)\n    .filter(([, value]) => !value)\n    .map(([key]) => key);\n\n  if (missing.length > 0) {\n    throw new Error(\n      `Missing required environment variables: ${missing.join(\", \")}. ` +\n        `Please set them in your .env.local or environment.`,\n    );\n  }\n\n  // At this point, we know these are strings due to validation above\n  const token = GITHUB_TOKEN as string;\n  const owner = GITHUB_OWNER as string;\n  const repo = GITHUB_REPO as string;\n\n  // Validation: Check token format (NEVER log the actual token)\n  const validTokenPrefixes = [\"ghp_\", \"github_pat_\", \"ghs_\", \"ghu_\"];\n  const isValidToken = validTokenPrefixes.some((prefix) => token.startsWith(prefix));\n\n  if (!isValidToken) {\n    throw new Error(\n      \"Invalid GITHUB_TOKEN format. Expected token to start with: ghp_, github_pat_, ghs_, or ghu_\",\n    );\n  }\n\n  // Validation: Check owner and repo are not empty\n  if (owner.trim().length === 0) {\n    throw new Error(\"GITHUB_OWNER cannot be empty\");\n  }\n\n  if (repo.trim().length === 0) {\n    throw new Error(\"GITHUB_REPO cannot be empty\");\n  }\n\n  // Validation: Check owner/repo don't contain invalid characters\n  if (!/^[a-zA-Z0-9_-]+$/.test(owner)) {\n    throw new Error(\n      \"GITHUB_OWNER contains invalid characters. Only alphanumeric, hyphens, and underscores are allowed.\",\n    );\n  }\n\n  if (!/^[a-zA-Z0-9._-]+$/.test(repo)) {\n    throw new Error(\n      \"GITHUB_REPO contains invalid characters. Only alphanumeric, dots, hyphens, and underscores are allowed.\",\n    );\n  }\n\n  return {\n    NODE_ENV,\n    GITHUB_TOKEN: token,\n    GITHUB_OWNER: owner,\n    GITHUB_REPO: repo,\n  };\n}\n"},"tags":[],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"/**\r\n\n * Secure logging utility that prevents exposure of sensitive data * - Never logs tokens, secrets, or environment variables * - Never logs full error stacks in production * - Only logs to server-side console (never to client) */\r\n\r\n\n\ntype LogLevel = \"info\" | \"warn\" | \"error\" | \"debug\";interface LogContext {  timestamp: string;  level: LogLevel;  message: string;  context?: Record<string, unknown>;} * List of patterns that indicate sensitive dataconst SENSITIVE_PATTERNS = [  /ghp_[a-zA-Z0-9]+/g, // GitHub personal token  /github_pat_[a-zA-Z0-9]+/g, // GitHub long-lived token  /ghs_[a-zA-Z0-9]+/g, // GitHub app token  /ghu_[a-zA-Z0-9]+/g, // GitHub user token  /GITHUB_TOKEN\\s*[:=]\\s*[^\\s,}]+/gi, // Environment variable assignment  /Authorization:\\s*[^\\s]+/gi, // Authorization header  /password\\s*[:=]\\s*[^\\s,}]+/gi, // Password fields  /secret\\s*[:=]\\s*[^\\s,}]+/gi, // Secret fields  /api[_-]?key\\s*[:=]\\s*[^\\s,}]+/gi, // API keys  /token\\s*[:=]\\s*[^\\s,}]+/gi, // Token fields]; * Mask sensitive data in stringsfunction maskSensitiveData(str: string): string {  if (typeof str !== \"string\") {    return String(str);  }  let masked = str;  for (const pattern of SENSITIVE_PATTERNS) {    masked = masked.replace(pattern, \"***REDACTED***\");  return masked; * Clean error object - remove sensitive data and limit stack tracefunction cleanError(error: unknown): Record<string, unknown> {  if (error instanceof Error) {    const cleaned: Record<string, unknown> = {      name: error.name,      message: maskSensitiveData(error.message),    };    // Only include stack in development    if (process.env.NODE_ENV === \"development\" && error.stack) {      cleaned.stack = error.stack;    return cleaned;  if (typeof error === \"object\" && error !== null) {    const cleaned: Record<string, unknown> = {};    for (const [key, value] of Object.entries(error)) {      if (\n        key.toLowerCase().includes(\"token\") ||key.toLowerCase().includes(\"secret\")) {        cleaned[key] = \"***REDACTED***\";      } else if (typeof value === \"string\") {        cleaned[key] = maskSensitiveData(value);      } else {        cleaned[key] = value;  return { message: String(error) }; * Clean context object - mask sensitive datafunction cleanContext(context: Record<string, unknown>,\n): Record<string, unknown> {  const cleaned: Record<string, unknown> = {};  for (const [key, value] of Object.entries(context)) {    // Skip sensitive keys entirely      key.toLowerCase().includes(\"token\") ||      key.toLowerCase().includes(\"secret\") ||      key.toLowerCase().includes(\"password\") ||      key.toLowerCase().includes(\"api_key\") ||      key.toLowerCase().includes(\"apikey\")    ) {      cleaned[key] = \"***REDACTED***\";      continue;    // Mask sensitive data in strings    if (typeof value === \"string\") {      cleaned[key] = maskSensitiveData(value);    } else if (value instanceof Error) {      cleaned[key] = cleanError(value);    } else if (typeof value === \"object\" && value !== null) {      // Recursively clean nested objects      cleaned[key] = cleanContext(value as Record<string, unknown>);    } else {      cleaned[key] = value;  return cleaned; * Format log message for console outputfunction formatLogMessage(logContext: LogContext): string {  const prefix = `[${logContext.timestamp}] [${logContext.level.toUpperCase()}]`;  const contextStr = logContext.context? ` ${JSON.stringify(logContext.context)}`: \"\";  return `${prefix} ${logContext.message}${contextStr}`; * Internal logging functionfunction log(level: LogLevel,message: string,error?: unknown,context?: Record<string, unknown>  // Never log in non-server environments  if (typeof window !== \"undefined\") {    return;  // During build/prerender, avoid using the current time before dynamic access  // to prevent Next.js 16 build errors.  const timestamp =process.env.NEXT_PHASE === \"phase-production-build\" \r\n    ? \"BUILD_TIME\": new Date().toISOString();\r\n    \r\n  const logContext: LogContext = {    timestamp,    level,    message: maskSensitiveData(message),    context: context ? cleanContext(context) : undefined,  };  const formattedMessage = formatLogMessage(logContext);  switch (level) {    case \"error\":      if (error) {        const cleanedError = cleanError(error);        console.error(formattedMessage, cleanedError);        console.error(formattedMessage);      break;    case \"warn\":      console.warn(formattedMessage);    case \"debug\":      if (process.env.NODE_ENV === \"development\") {        console.debug(formattedMessage);    // case \"info\":    default:      console.log(formattedMessage); * Public logger APIexport const logger = {  /**   * Log error message with optional error object and context   * @example   * logger.error(\"Failed to fetch article\", error, { articleId: \"123\" })   */  error: (,\n  ) => {    log(\"error\", message, error, context);  },   * Log warning message with optional context   * logger.warn(\"Rate limit approaching\", { remaining: 10 })  warn: (message: string, context?: Record<string, unknown>) => {    log(\"warn\", message, undefined, context);   * Log info message with optional context   * logger.info(\"Article created\", { articleId: \"123\", title: \"Example\" })  info: (message: string, context?: Record<string, unknown>) => {    log(\"info\", message, undefined, context);   * Log debug message with optional context (only in development)   * logger.debug(\"Cache hit\", { key: \"articles\" })  debug: (message: string, context?: Record<string, unknown>) => {    log(\"debug\", message, undefined, context);}; * Helper to ensure sensitive data never leaks in error messagesexport function createSafeErrorMessage(error: unknown): string {  const isProduction = process.env.NODE_ENV === \"production\";    // In production, return generic message    if (isProduction) {      // Log the actual error server-side for debugging      logger.error(\"Operation failed\", error);      return \"An error occurred. Please try again later.\";    // In development, include safe error details    return error.message;  if (isProduction) {    logger.error(\"Unknown error occurred\", error);    return \"An error occurred. Please try again later.\";  return String(error);","ops":[{"diffOp":{"equal":{"range":[0,3]}}},{"diffOp":{"delete":{"range":[3,5]}}},{"diffOp":{"insert":{"range":[5,6]}}},{"diffOp":{"equal":{"range":[6,72]}}},{"diffOp":{"delete":{"range":[3,5]}}},{"diffOp":{"insert":{"range":[5,6]}}},{"diffOp":{"equal":{"range":[72,129]}}},{"diffOp":{"delete":{"range":[3,5]}}},{"diffOp":{"insert":{"range":[5,6]}}},{"diffOp":{"equal":{"range":[129,176]}}},{"diffOp":{"delete":{"range":[3,5]}}},{"diffOp":{"insert":{"range":[5,6]}}},{"diffOp":{"equal":{"range":[176,231]}}},{"diffOp":{"delete":{"range":[3,5]}}},{"diffOp":{"insert":{"range":[5,6]}}},{"diffOp":{"equal":{"range":[231,234]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[240,292]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[292,314]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[314,334]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[334,352]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[352,370]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[370,406]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[406,407]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[0,3]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[407,455]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[231,234]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[455,483]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[483,530]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[530,586]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[586,628]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[628,671]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[671,743]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[743,797]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[797,849]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[849,897]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[897,945]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[945,991]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[991,993]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[0,3]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[993,1026]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[231,234]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[1026,1075]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[1075,1107]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[1107,1130]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[1130,1133]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[1133,1152]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[1152,1197]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[1197,1252]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[1130,1133]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[1252,1268]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[406,407]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[0,3]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[1268,1335]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[231,234]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[1335,1397]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[1397,1428]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[1428,1474]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[1474,1497]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[1497,1545]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[1545,1551]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[1551,1591]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[1591,1655]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[1655,1689]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[1545,1550]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[1689,1708]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[1130,1133]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[1708,1760]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[1760,1808]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[1808,1863]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[238,239]}}},{"diffOp":{"equal":{"range":[1863,1873]}}},{"diffOp":{"insert":{"range":[1873,1882]}}},{"diffOp":{"equal":{"range":[1882,1920]}}},{"diffOp":{"delete":{"range":[231,232]}}},{"diffOp":{"insert":{"range":[1873,1882]}}},{"diffOp":{"equal":{"range":[1920,1956]}}},{"diffOp":{"insert":{"range":[1873,1880]}}},{"diffOp":{"equal":{"range":[1956,1959]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[1959,1999]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[1999,2044]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2044,2092]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2092,2106]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2106,2135]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2092,2099]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[1545,1550]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[1689,1708]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[1130,1133]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[2135,2171]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[406,407]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[0,3]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2171,2216]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[231,234]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2216,2238]}}},{"diffOp":{"insert":{"range":[1873,1876]}}},{"diffOp":{"equal":{"range":[2238,2270]}}},{"diffOp":{"insert":{"range":[2270,2272]}}},{"diffOp":{"equal":{"range":[2272,2300]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2300,2346]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[2346,2401]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2401,2436]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[1591,1599]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2436,2480]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2480,2525]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2525,2572]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2572,2618]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2618,2660]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2660,2667]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2667,2705]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2705,2720]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[1545,1550]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[2720,2757]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2757,2793]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2793,2839]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2839,2879]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2879,2918]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2918,2979]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2979,3020]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[3020,3088]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[3088,3100]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[3100,3127]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[1545,1550]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[1130,1133]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[3127,3144]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[406,407]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[0,3]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[3144,3184]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[231,234]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[3184,3243]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[3243,3324]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[3324,3363]}}},{"diffOp":{"delete":{"range":[231,232]}}},{"diffOp":{"insert":{"range":[1873,1878]}}},{"diffOp":{"equal":{"range":[3363,3405]}}},{"diffOp":{"delete":{"range":[231,232]}}},{"diffOp":{"insert":{"range":[1873,1878]}}},{"diffOp":{"equal":{"range":[3405,3410]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[3410,3466]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[406,407]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[0,3]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[3466,3494]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[231,234]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[3494,3507]}}},{"diffOp":{"insert":{"range":[1873,1876]}}},{"diffOp":{"equal":{"range":[3507,3523]}}},{"diffOp":{"delete":{"range":[231,232]}}},{"diffOp":{"insert":{"range":[1873,1876]}}},{"diffOp":{"equal":{"range":[3523,3539]}}},{"diffOp":{"delete":{"range":[231,232]}}},{"diffOp":{"insert":{"range":[1873,1876]}}},{"diffOp":{"equal":{"range":[3539,3555]}}},{"diffOp":{"delete":{"range":[231,232]}}},{"diffOp":{"insert":{"range":[1873,1876]}}},{"diffOp":{"equal":{"range":[3555,3588]}}},{"diffOp":{"insert":{"range":[2270,2272]}}},{"diffOp":{"equal":{"range":[1956,1959]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[3588,3629]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[3629,3667]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[3667,3678]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[1130,1133]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[3678,3757]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[3757,3797]}}},{"diffOp":{"delete":{"range":[234,236]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[3797,3816]}}},{"diffOp":{"delete":{"range":[231,232]}}},{"diffOp":{"insert":{"range":[1873,1878]}}},{"diffOp":{"equal":{"range":[3816,3867]}}},{"diffOp":{"delete":{"range":[3867,3874]}}},{"diffOp":{"insert":{"range":[1873,1880]}}},{"diffOp":{"equal":{"range":[3874,3888]}}},{"diffOp":{"delete":{"range":[3867,3874]}}},{"diffOp":{"insert":{"range":[1873,1880]}}},{"diffOp":{"equal":{"range":[3888,3915]}}},{"diffOp":{"delete":{"range":[3915,3923]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[3923,3957]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[3957,3971]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[3971,3981]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[3981,4021]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4021,4078]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4078,4082]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[4082,4138]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[4138,4156]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4156,4173]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4173,4191]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4191,4238]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4238,4292]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2092,2106]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4292,4332]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2092,2099]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4332,4344]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4344,4360]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4360,4397]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4332,4344]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4397,4414]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4414,4465]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4465,4505]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[2092,2099]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4332,4344]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4505,4524]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4524,4536]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4536,4572]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4078,4081]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[406,407]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[0,3]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4572,4592]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[231,234]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4592,4615]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4615,4620]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4620,4681]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4681,4694]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4694,4767]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4767,4772]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4772,4782]}}},{"diffOp":{"insert":{"range":[1873,1878]}}},{"diffOp":{"equal":{"range":[3523,3539]}}},{"diffOp":{"delete":{"range":[231,232]}}},{"diffOp":{"insert":{"range":[1873,1878]}}},{"diffOp":{"equal":{"range":[3539,3555]}}},{"diffOp":{"delete":{"range":[231,232]}}},{"diffOp":{"insert":{"range":[1873,1878]}}},{"diffOp":{"equal":{"range":[3555,3588]}}},{"diffOp":{"insert":{"range":[4782,4786]}}},{"diffOp":{"equal":{"range":[4786,4792]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4792,4834]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4834,4838]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[4615,4620]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4838,4884]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4681,4694]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4884,4945]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4767,4772]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4945,5010]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[5010,5055]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4834,4838]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[4615,4620]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[5055,5098]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4681,4694]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[5098,5173]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4767,4772]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[5173,5238]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[5238,5283]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4834,4838]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[4615,4620]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[5283,5349]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4681,4694]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[5349,5400]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4767,4772]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[5400,5466]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[5466,5512]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4834,4838]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[5512,5514]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[0,3]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[5514,5578]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[231,234]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[5578,5642]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[5642,5703]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[1397,1428]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[5703,5747]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[5747,5770]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[5770,5825]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[5825,5871]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[5871,5929]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[1545,1550]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[5929,5978]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[5978,6003]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4078,4081]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[6003,6024]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[6024,6074]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[6074,6130]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[4078,4081]}}},{"diffOp":{"delete":{"range":[234,238]}}},{"diffOp":{"insert":{"range":[238,240]}}},{"diffOp":{"equal":{"range":[6130,6153]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}},{"diffOp":{"equal":{"range":[5512,5513]}}},{"diffOp":{"delete":{"range":[3915,3917]}}},{"diffOp":{"insert":{"range":[1873,1874]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"lib\\logger.ts"},"span":null,"sourceCode":"/**\r\n * Secure logging utility that prevents exposure of sensitive data\r\n * - Never logs tokens, secrets, or environment variables\r\n * - Never logs full error stacks in production\r\n * - Only logs to server-side console (never to client)\r\n */\r\n\r\ntype LogLevel = \"info\" | \"warn\" | \"error\" | \"debug\";\r\n\r\ninterface LogContext {\r\n  timestamp: string;\r\n  level: LogLevel;\r\n  message: string;\r\n  context?: Record<string, unknown>;\r\n}\r\n\r\n/**\r\n * List of patterns that indicate sensitive data\r\n */\r\nconst SENSITIVE_PATTERNS = [\r\n  /ghp_[a-zA-Z0-9]+/g, // GitHub personal token\r\n  /github_pat_[a-zA-Z0-9]+/g, // GitHub long-lived token\r\n  /ghs_[a-zA-Z0-9]+/g, // GitHub app token\r\n  /ghu_[a-zA-Z0-9]+/g, // GitHub user token\r\n  /GITHUB_TOKEN\\s*[:=]\\s*[^\\s,}]+/gi, // Environment variable assignment\r\n  /Authorization:\\s*[^\\s]+/gi, // Authorization header\r\n  /password\\s*[:=]\\s*[^\\s,}]+/gi, // Password fields\r\n  /secret\\s*[:=]\\s*[^\\s,}]+/gi, // Secret fields\r\n  /api[_-]?key\\s*[:=]\\s*[^\\s,}]+/gi, // API keys\r\n  /token\\s*[:=]\\s*[^\\s,}]+/gi, // Token fields\r\n];\r\n\r\n/**\r\n * Mask sensitive data in strings\r\n */\r\nfunction maskSensitiveData(str: string): string {\r\n  if (typeof str !== \"string\") {\r\n    return String(str);\r\n  }\r\n\r\n  let masked = str;\r\n\r\n  for (const pattern of SENSITIVE_PATTERNS) {\r\n    masked = masked.replace(pattern, \"***REDACTED***\");\r\n  }\r\n\r\n  return masked;\r\n}\r\n\r\n/**\r\n * Clean error object - remove sensitive data and limit stack trace\r\n */\r\nfunction cleanError(error: unknown): Record<string, unknown> {\r\n  if (error instanceof Error) {\r\n    const cleaned: Record<string, unknown> = {\r\n      name: error.name,\r\n      message: maskSensitiveData(error.message),\r\n    };\r\n\r\n    // Only include stack in development\r\n    if (process.env.NODE_ENV === \"development\" && error.stack) {\r\n      cleaned.stack = error.stack;\r\n    }\r\n\r\n    return cleaned;\r\n  }\r\n\r\n  if (typeof error === \"object\" && error !== null) {\r\n    const cleaned: Record<string, unknown> = {};\r\n    for (const [key, value] of Object.entries(error)) {\r\n      if (key.toLowerCase().includes(\"token\") || key.toLowerCase().includes(\"secret\")) {\r\n        cleaned[key] = \"***REDACTED***\";\r\n      } else if (typeof value === \"string\") {\r\n        cleaned[key] = maskSensitiveData(value);\r\n      } else {\r\n        cleaned[key] = value;\r\n      }\r\n    }\r\n    return cleaned;\r\n  }\r\n\r\n  return { message: String(error) };\r\n}\r\n\r\n/**\r\n * Clean context object - mask sensitive data\r\n */\r\nfunction cleanContext(context: Record<string, unknown>): Record<string, unknown> {\r\n  const cleaned: Record<string, unknown> = {};\r\n\r\n  for (const [key, value] of Object.entries(context)) {\r\n    // Skip sensitive keys entirely\r\n    if (\r\n      key.toLowerCase().includes(\"token\") ||\r\n      key.toLowerCase().includes(\"secret\") ||\r\n      key.toLowerCase().includes(\"password\") ||\r\n      key.toLowerCase().includes(\"api_key\") ||\r\n      key.toLowerCase().includes(\"apikey\")\r\n    ) {\r\n      cleaned[key] = \"***REDACTED***\";\r\n      continue;\r\n    }\r\n\r\n    // Mask sensitive data in strings\r\n    if (typeof value === \"string\") {\r\n      cleaned[key] = maskSensitiveData(value);\r\n    } else if (value instanceof Error) {\r\n      cleaned[key] = cleanError(value);\r\n    } else if (typeof value === \"object\" && value !== null) {\r\n      // Recursively clean nested objects\r\n      cleaned[key] = cleanContext(value as Record<string, unknown>);\r\n    } else {\r\n      cleaned[key] = value;\r\n    }\r\n  }\r\n\r\n  return cleaned;\r\n}\r\n\r\n/**\r\n * Format log message for console output\r\n */\r\nfunction formatLogMessage(logContext: LogContext): string {\r\n  const prefix = `[${logContext.timestamp}] [${logContext.level.toUpperCase()}]`;\r\n  const contextStr = logContext.context ? ` ${JSON.stringify(logContext.context)}` : \"\";\r\n  return `${prefix} ${logContext.message}${contextStr}`;\r\n}\r\n\r\n/**\r\n * Internal logging function\r\n */\r\nfunction log(level: LogLevel, message: string, error?: unknown, context?: Record<string, unknown>) {\r\n  // Never log in non-server environments\r\n  if (typeof window !== \"undefined\") {\r\n    return;\r\n  }\r\n\r\n  // During build/prerender, avoid using the current time before dynamic access\r\n  // to prevent Next.js 16 build errors.\r\n  const timestamp = process.env.NEXT_PHASE === \"phase-production-build\" \r\n    ? \"BUILD_TIME\" \r\n    : new Date().toISOString();\r\n    \r\n  const logContext: LogContext = {\r\n    timestamp,\r\n    level,\r\n    message: maskSensitiveData(message),\r\n    context: context ? cleanContext(context) : undefined,\r\n  };\r\n\r\n  const formattedMessage = formatLogMessage(logContext);\r\n\r\n  switch (level) {\r\n    case \"error\":\r\n      if (error) {\r\n        const cleanedError = cleanError(error);\r\n        console.error(formattedMessage, cleanedError);\r\n      } else {\r\n        console.error(formattedMessage);\r\n      }\r\n      break;\r\n    case \"warn\":\r\n      console.warn(formattedMessage);\r\n      break;\r\n    case \"debug\":\r\n      if (process.env.NODE_ENV === \"development\") {\r\n        console.debug(formattedMessage);\r\n      }\r\n      break;\r\n    // case \"info\":\r\n    default:\r\n      console.log(formattedMessage);\r\n  }\r\n}\r\n\r\n/**\r\n * Public logger API\r\n */\r\nexport const logger = {\r\n  /**\r\n   * Log error message with optional error object and context\r\n   * @example\r\n   * logger.error(\"Failed to fetch article\", error, { articleId: \"123\" })\r\n   */\r\n  error: (message: string, error?: unknown, context?: Record<string, unknown>) => {\r\n    log(\"error\", message, error, context);\r\n  },\r\n\r\n  /**\r\n   * Log warning message with optional context\r\n   * @example\r\n   * logger.warn(\"Rate limit approaching\", { remaining: 10 })\r\n   */\r\n  warn: (message: string, context?: Record<string, unknown>) => {\r\n    log(\"warn\", message, undefined, context);\r\n  },\r\n\r\n  /**\r\n   * Log info message with optional context\r\n   * @example\r\n   * logger.info(\"Article created\", { articleId: \"123\", title: \"Example\" })\r\n   */\r\n  info: (message: string, context?: Record<string, unknown>) => {\r\n    log(\"info\", message, undefined, context);\r\n  },\r\n\r\n  /**\r\n   * Log debug message with optional context (only in development)\r\n   * @example\r\n   * logger.debug(\"Cache hit\", { key: \"articles\" })\r\n   */\r\n  debug: (message: string, context?: Record<string, unknown>) => {\r\n    log(\"debug\", message, undefined, context);\r\n  },\r\n};\r\n\r\n/**\r\n * Helper to ensure sensitive data never leaks in error messages\r\n */\r\nexport function createSafeErrorMessage(error: unknown): string {\r\n  const isProduction = process.env.NODE_ENV === \"production\";\r\n\r\n  if (error instanceof Error) {\r\n    // In production, return generic message\r\n    if (isProduction) {\r\n      // Log the actual error server-side for debugging\r\n      logger.error(\"Operation failed\", error);\r\n      return \"An error occurred. Please try again later.\";\r\n    }\r\n\r\n    // In development, include safe error details\r\n    return error.message;\r\n  }\r\n\r\n  if (isProduction) {\r\n    logger.error(\"Unknown error occurred\", error);\r\n    return \"An error occurred. Please try again later.\";\r\n  }\r\n\r\n  return String(error);\r\n}\r\n"},"tags":[],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"import { Octokit } from \"@octokit/rest\";\nimport getenv from \"./env\";\n\nconst { GITHUB_OWNER, GITHUB_REPO, GITHUB_TOKEN } = getenv();\n\n\nconst octokit = new Octokit({\n  auth: GITHUB_TOKEN ??\"placeholder\",\n});\n\nexport default octokit;\n","ops":[{"diffOp":{"equal":{"range":[0,133]}}},{"diffOp":{"delete":{"range":[133,134]}}},{"diffOp":{"equal":{"range":[134,184]}}},{"diffOp":{"insert":{"range":[184,185]}}},{"diffOp":{"equal":{"range":[185,187]}}},{"diffOp":{"insert":{"range":[184,185]}}},{"diffOp":{"equal":{"range":[187,206]}}},{"equalLines":{"line_count":7}},{"diffOp":{"equal":{"range":[206,231]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"lib\\octokit.ts"},"span":null,"sourceCode":"import { Octokit } from \"@octokit/rest\";\nimport getenv from \"./env\";\n\nconst { GITHUB_OWNER, GITHUB_REPO, GITHUB_TOKEN } = getenv();\n\n\nconst octokit = new Octokit({\n  auth: GITHUB_TOKEN??\"placeholder\",\n});\n\nexport const githubRepoInfo = {\n  owner: GITHUB_OWNER,\n  repo: GITHUB_REPO,\n  ARTICLES_PATH: \"articles\",\n  POSTS_PATH: \"posts\",\n  MEDIA_PATH: \"media\",\n};\n\nexport default octokit;\n"},"tags":[],"source":null},{"category":"assist/source/organizeImports","severity":"error","description":"The imports and exports are not sorted.","message":[{"elements":[],"content":"The imports and exports are not sorted."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Safe fix: Organize Imports (Biome)"}]]},{"diff":{"dictionary":"\"use client\";\nimport { ThemeProvider } from \"next-themes\";\nimport { NuqsAdapter } from \"nuqs/adapters/next/app\";\nimport { type ReactNode, Suspense, ViewTransition } from \"react\";\n\nimport { Toaster } from \"sonner\";Toaster } from \"reactsonner\";\n\nconst Providers = ({ children }: { children: ReactNode }) => {\nexport default Providers;\n","ops":[{"diffOp":{"equal":{"range":[0,112]}}},{"diffOp":{"equal":{"range":[112,138]}}},{"diffOp":{"insert":{"range":[138,148]}}},{"diffOp":{"equal":{"range":[148,178]}}},{"diffOp":{"delete":{"range":[178,213]}}},{"diffOp":{"equal":{"range":[112,122]}}},{"diffOp":{"delete":{"range":[138,146]}}},{"diffOp":{"insert":{"range":[213,220]}}},{"diffOp":{"equal":{"range":[220,229]}}},{"diffOp":{"delete":{"range":[229,234]}}},{"diffOp":{"insert":{"range":[234,240]}}},{"diffOp":{"equal":{"range":[240,242]}}},{"diffOp":{"equal":{"range":[242,306]}}},{"equalLines":{"line_count":31}},{"diffOp":{"equal":{"range":[306,333]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"lib\\providers.tsx"},"span":[14,58],"sourceCode":"\"use client\";\nimport { ThemeProvider } from \"next-themes\";\nimport { NuqsAdapter } from \"nuqs/adapters/next/app\";\nimport { type ReactNode, ViewTransition } from \"react\";\n\nimport { Toaster } from \"sonner\";\nimport { Suspense } from \"react\";\n\nconst Providers = ({ children }: { children: ReactNode }) => {\n  return (\n    <ThemeProvider\n      attribute=\"class\"\n      defaultTheme=\"system\"\n      enableSystem\n      disableTransitionOnChange\n    >\n      <Suspense fallback={null}>\n        <NuqsAdapter>\n          <ViewTransition>{children}</ViewTransition>\n        </NuqsAdapter>\n      </Suspense>\n      <Toaster\n          position=\"top-right\"\n          richColors\n          closeButton\n          duration={4000}\n          theme=\"system\"\n          // toastOptions={{\n          //   style: {\n          //     borderRadius: \"0.5rem\",\n          //     background: \"hsl(var(--background))\",\n          //     color: \"hsl(var(--foreground))\",\n          //     border: \"1px solid hsl(var(--border))\",\n          //   },\n          //   className: \"text-sm\",\n          // }}\n        />\n    </ThemeProvider>\n  );\n};\n\nexport default Providers;\n"},"tags":["fixable"],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"\"use client\";\nimport { ThemeProvider } from \"next-themes\";\nimport { NuqsAdapter } from \"nuqs/adapters/next/app\";      </Suspense>\n      <Toaster\n          position=\"top-right\"\nrichColors\ncloseButton\nduration={4000}\ntheme=\"system\"\n// toastOptions={{\n//   style: {\n//     borderRadius: \"0.5rem\",\n//     background: \"hsl(var(--background))\",\n//     color: \"hsl(var(--foreground))\",\n//     border: \"1px solid hsl(var(--border))\",\n//   },\n//   className: \"text-sm\",\n// }}\n/>\n    </ThemeProvider>\n  );\nexport default Providers;\n","ops":[{"diffOp":{"equal":{"range":[0,112]}}},{"equalLines":{"line_count":17}},{"diffOp":{"equal":{"range":[112,145]}}},{"diffOp":{"delete":{"range":[145,155]}}},{"diffOp":{"insert":{"range":[145,153]}}},{"diffOp":{"equal":{"range":[155,176]}}},{"diffOp":{"delete":{"range":[145,155]}}},{"diffOp":{"insert":{"range":[145,153]}}},{"diffOp":{"equal":{"range":[176,187]}}},{"diffOp":{"delete":{"range":[145,155]}}},{"diffOp":{"insert":{"range":[145,153]}}},{"diffOp":{"equal":{"range":[187,199]}}},{"diffOp":{"delete":{"range":[145,155]}}},{"diffOp":{"insert":{"range":[145,153]}}},{"diffOp":{"equal":{"range":[199,215]}}},{"diffOp":{"delete":{"range":[145,155]}}},{"diffOp":{"insert":{"range":[145,153]}}},{"diffOp":{"equal":{"range":[215,230]}}},{"diffOp":{"delete":{"range":[145,155]}}},{"diffOp":{"insert":{"range":[145,153]}}},{"diffOp":{"equal":{"range":[230,249]}}},{"diffOp":{"delete":{"range":[145,155]}}},{"diffOp":{"insert":{"range":[145,153]}}},{"diffOp":{"equal":{"range":[249,263]}}},{"diffOp":{"delete":{"range":[145,155]}}},{"diffOp":{"insert":{"range":[145,153]}}},{"diffOp":{"equal":{"range":[263,294]}}},{"diffOp":{"delete":{"range":[145,155]}}},{"diffOp":{"insert":{"range":[145,153]}}},{"diffOp":{"equal":{"range":[294,339]}}},{"diffOp":{"delete":{"range":[145,155]}}},{"diffOp":{"insert":{"range":[145,153]}}},{"diffOp":{"equal":{"range":[339,379]}}},{"diffOp":{"delete":{"range":[145,155]}}},{"diffOp":{"insert":{"range":[145,153]}}},{"diffOp":{"equal":{"range":[379,426]}}},{"diffOp":{"delete":{"range":[145,155]}}},{"diffOp":{"insert":{"range":[145,153]}}},{"diffOp":{"equal":{"range":[426,434]}}},{"diffOp":{"delete":{"range":[145,155]}}},{"diffOp":{"insert":{"range":[145,153]}}},{"diffOp":{"equal":{"range":[434,461]}}},{"diffOp":{"delete":{"range":[145,155]}}},{"diffOp":{"insert":{"range":[145,153]}}},{"diffOp":{"equal":{"range":[461,467]}}},{"diffOp":{"delete":{"range":[145,153]}}},{"diffOp":{"insert":{"range":[112,118]}}},{"diffOp":{"equal":{"range":[467,495]}}},{"equalLines":{"line_count":1}},{"diffOp":{"equal":{"range":[495,522]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"lib\\providers.tsx"},"span":null,"sourceCode":"\"use client\";\nimport { ThemeProvider } from \"next-themes\";\nimport { NuqsAdapter } from \"nuqs/adapters/next/app\";\nimport { type ReactNode, ViewTransition } from \"react\";\n\nimport { Toaster } from \"sonner\";\nimport { Suspense } from \"react\";\n\nconst Providers = ({ children }: { children: ReactNode }) => {\n  return (\n    <ThemeProvider\n      attribute=\"class\"\n      defaultTheme=\"system\"\n      enableSystem\n      disableTransitionOnChange\n    >\n      <Suspense fallback={null}>\n        <NuqsAdapter>\n          <ViewTransition>{children}</ViewTransition>\n        </NuqsAdapter>\n      </Suspense>\n      <Toaster\n          position=\"top-right\"\n          richColors\n          closeButton\n          duration={4000}\n          theme=\"system\"\n          // toastOptions={{\n          //   style: {\n          //     borderRadius: \"0.5rem\",\n          //     background: \"hsl(var(--background))\",\n          //     color: \"hsl(var(--foreground))\",\n          //     border: \"1px solid hsl(var(--border))\",\n          //   },\n          //   className: \"text-sm\",\n          // }}\n        />\n    </ThemeProvider>\n  );\n};\n\nexport default Providers;\n"},"tags":[],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"/**\r\n\n * Content sanitization utilities for preventing XSS attacks */\r\n\r\n\n\n * Sanitize user input text - remove all HTML tags and scriptsexport function sanitizeText(text: string): string {  if (!text || typeof text !== \"string\") {    return \"\";  }  // Remove all HTML tags  let sanitized = text.replace(/<[^>]*>/g, \"\");  // Decode HTML entities  sanitized = sanitized    .replace(/&lt;/g, \"<\")    .replace(/&gt;/g, \">\")    .replace(/&amp;/g, \"&\")    .replace(/&quot;/g, '\"')    .replace(/&#39;/g, \"'\");  // Remove script-like patterns    .replace(/javascript:/gi, \"\")    .replace(/on\\w+\\s*=/gi, \"\")    .replace(/eval\\(/gi, \"\");  return sanitized.trim();} * Validate URL is safe (not javascript: or data: URI)export function isValidUrl(url: string): boolean {  if (!url || typeof url !== \"string\") {    return false;  try {    const parsed = new URL(url);    // Only allow http and https protocols    return parsed.protocol === \"http:\" || parsed.protocol === \"https:\";  } catch { * Sanitize markdown content - prevent dangerous patternsexport function sanitizeMarkdown(content: string): string {  if (!content || typeof content !== \"string\") {  let sanitized = content;  // Remove script tags  sanitized = sanitized.replace(/<script[^>]*>.*?<\\/script>/gi, \"\");  // Remove event handlers  sanitized = sanitized.replace(/on\\w+\\s*=\\s*[\"'][^\"']*[\"']/gi, \"\");  sanitized = sanitized.replace(/on\\w+\\s*=\\s*[^\\s>]*/gi, \"\");  // Remove data attributes with javascript  sanitized = sanitized.replace(/data:text\\/html/gi, \"\");  // Remove iframe tags  sanitized = sanitized.replace(/<iframe[^>]*>.*?<\\/iframe>/gi, \"\");  // Remove style tags with expressions\n    /style\\s*=\\s*[\"'][^\"']*javascript[^\"']*[\"']/gi,\"\",\n  );  return sanitized; * Validate and sanitize emailexport function sanitizeEmail(email: string): string {  if (!email || typeof email !== \"string\") {  const sanitized = email.toLowerCase().trim();  // Basic email regex  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;  if (!emailRegex.test(sanitized)) { * Sanitize tag valuesexport function sanitizeTag(tag: string): string {  if (!tag || typeof tag !== \"string\") {  // Remove HTML, trim, lowercase  let sanitized = tag    .replace(/<[^>]*>/g, \"\")    .trim()    .toLowerCase();  // Remove special characters except hyphens and underscores  sanitized = sanitized.replace(/[^a-z0-9\\-_]/g, \"\");  // Limit length  return sanitized.substring(0, 50); * Sanitize array of tagsexport function sanitizeTags(tags: unknown[]): string[] {  if (!Array.isArray(tags)) {    return [];  return tags    .filter((tag): tag is string => typeof tag === \"string\" && tag.length > 0)    .map(sanitizeTag)    .filter((tag) => tag.length > 0);","ops":[{"diffOp":{"equal":{"range":[0,3]}}},{"diffOp":{"delete":{"range":[3,5]}}},{"diffOp":{"insert":{"range":[5,6]}}},{"diffOp":{"equal":{"range":[6,66]}}},{"diffOp":{"delete":{"range":[3,5]}}},{"diffOp":{"insert":{"range":[5,6]}}},{"diffOp":{"equal":{"range":[66,69]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[0,3]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[75,137]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[66,69]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[137,189]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[189,231]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[231,245]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[245,248]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[248,273]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[273,320]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[320,345]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[345,368]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[368,394]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[394,420]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[420,447]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[447,475]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[475,503]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[503,535]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[345,368]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[535,568]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[568,599]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[599,628]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[628,654]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[654,655]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[0,3]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[655,709]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[66,69]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[709,759]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[759,799]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[799,816]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[245,248]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[816,823]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[823,855]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[855,897]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[897,968]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[968,979]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[799,816]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[968,971]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[654,655]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[0,3]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[979,1036]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[66,69]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[1036,1095]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[1095,1143]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[231,245]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[968,971]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[1143,1169]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[1169,1192]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[1192,1260]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[1260,1286]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[1286,1354]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[1354,1415]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[1415,1458]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[1458,1515]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[1515,1538]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[1538,1606]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[1606,1645]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[73,74]}}},{"diffOp":{"equal":{"range":[1354,1386]}}},{"diffOp":{"insert":{"range":[1645,1650]}}},{"diffOp":{"equal":{"range":[1650,1697]}}},{"diffOp":{"delete":{"range":[66,67]}}},{"diffOp":{"insert":{"range":[1645,1650]}}},{"diffOp":{"equal":{"range":[1697,1699]}}},{"diffOp":{"insert":{"range":[1699,1703]}}},{"diffOp":{"equal":{"range":[1703,1705]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[1705,1724]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[654,655]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[0,3]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[1724,1754]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[66,69]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[1754,1808]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[1808,1852]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[231,245]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[968,971]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[1852,1899]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[1899,1921]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[1921,1971]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[1971,2007]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[231,245]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[968,971]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[1705,1724]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[654,655]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[0,3]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[2007,2029]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[66,69]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[2029,2079]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[2079,2119]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[231,245]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[968,971]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[2119,2152]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[2152,2173]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[2173,2201]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[2201,2212]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[2212,2231]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[2231,2292]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[2292,2345]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[2345,2362]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[2362,2398]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[654,655]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[0,3]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[2398,2423]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[66,69]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[2423,2480]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[2480,2509]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[2509,2523]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[968,971]}}},{"diffOp":{"delete":{"range":[69,73]}}},{"diffOp":{"insert":{"range":[73,75]}}},{"diffOp":{"equal":{"range":[2523,2536]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[2536,2614]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[2614,2635]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[2635,2672]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}},{"diffOp":{"equal":{"range":[654,655]}}},{"diffOp":{"delete":{"range":[69,71]}}},{"diffOp":{"insert":{"range":[1645,1646]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"lib\\sanitize.ts"},"span":null,"sourceCode":"/**\r\n * Content sanitization utilities for preventing XSS attacks\r\n */\r\n\r\n/**\r\n * Sanitize user input text - remove all HTML tags and scripts\r\n */\r\nexport function sanitizeText(text: string): string {\r\n  if (!text || typeof text !== \"string\") {\r\n    return \"\";\r\n  }\r\n\r\n  // Remove all HTML tags\r\n  let sanitized = text.replace(/<[^>]*>/g, \"\");\r\n\r\n  // Decode HTML entities\r\n  sanitized = sanitized\r\n    .replace(/&lt;/g, \"<\")\r\n    .replace(/&gt;/g, \">\")\r\n    .replace(/&amp;/g, \"&\")\r\n    .replace(/&quot;/g, '\"')\r\n    .replace(/&#39;/g, \"'\");\r\n\r\n  // Remove script-like patterns\r\n  sanitized = sanitized\r\n    .replace(/javascript:/gi, \"\")\r\n    .replace(/on\\w+\\s*=/gi, \"\")\r\n    .replace(/eval\\(/gi, \"\");\r\n\r\n  return sanitized.trim();\r\n}\r\n\r\n/**\r\n * Validate URL is safe (not javascript: or data: URI)\r\n */\r\nexport function isValidUrl(url: string): boolean {\r\n  if (!url || typeof url !== \"string\") {\r\n    return false;\r\n  }\r\n\r\n  try {\r\n    const parsed = new URL(url);\r\n    // Only allow http and https protocols\r\n    return parsed.protocol === \"http:\" || parsed.protocol === \"https:\";\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Sanitize markdown content - prevent dangerous patterns\r\n */\r\nexport function sanitizeMarkdown(content: string): string {\r\n  if (!content || typeof content !== \"string\") {\r\n    return \"\";\r\n  }\r\n\r\n  let sanitized = content;\r\n\r\n  // Remove script tags\r\n  sanitized = sanitized.replace(/<script[^>]*>.*?<\\/script>/gi, \"\");\r\n\r\n  // Remove event handlers\r\n  sanitized = sanitized.replace(/on\\w+\\s*=\\s*[\"'][^\"']*[\"']/gi, \"\");\r\n  sanitized = sanitized.replace(/on\\w+\\s*=\\s*[^\\s>]*/gi, \"\");\r\n\r\n  // Remove data attributes with javascript\r\n  sanitized = sanitized.replace(/data:text\\/html/gi, \"\");\r\n\r\n  // Remove iframe tags\r\n  sanitized = sanitized.replace(/<iframe[^>]*>.*?<\\/iframe>/gi, \"\");\r\n\r\n  // Remove style tags with expressions\r\n  sanitized = sanitized.replace(/style\\s*=\\s*[\"'][^\"']*javascript[^\"']*[\"']/gi, \"\");\r\n\r\n  return sanitized;\r\n}\r\n\r\n/**\r\n * Validate and sanitize email\r\n */\r\nexport function sanitizeEmail(email: string): string {\r\n  if (!email || typeof email !== \"string\") {\r\n    return \"\";\r\n  }\r\n\r\n  const sanitized = email.toLowerCase().trim();\r\n\r\n  // Basic email regex\r\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n  if (!emailRegex.test(sanitized)) {\r\n    return \"\";\r\n  }\r\n\r\n  return sanitized;\r\n}\r\n\r\n/**\r\n * Sanitize tag values\r\n */\r\nexport function sanitizeTag(tag: string): string {\r\n  if (!tag || typeof tag !== \"string\") {\r\n    return \"\";\r\n  }\r\n\r\n  // Remove HTML, trim, lowercase\r\n  let sanitized = tag\r\n    .replace(/<[^>]*>/g, \"\")\r\n    .trim()\r\n    .toLowerCase();\r\n\r\n  // Remove special characters except hyphens and underscores\r\n  sanitized = sanitized.replace(/[^a-z0-9\\-_]/g, \"\");\r\n\r\n  // Limit length\r\n  return sanitized.substring(0, 50);\r\n}\r\n\r\n/**\r\n * Sanitize array of tags\r\n */\r\nexport function sanitizeTags(tags: unknown[]): string[] {\r\n  if (!Array.isArray(tags)) {\r\n    return [];\r\n  }\r\n\r\n  return tags\r\n    .filter((tag): tag is string => typeof tag === \"string\" && tag.length > 0)\r\n    .map(sanitizeTag)\r\n    .filter((tag) => tag.length > 0);\r\n}\r\n"},"tags":[],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"import { isValidUrl, sanitizeTags, sanitizeText } from \"@/lib/sanitize\";\nimport { z } from \"zod\";\n// Reusable validators with strong security constraints\nconst titleValidator = z\n\t  .string()\n.trim()\n.min(1, \"Title is required\")\n.max(200, \"Title must be less than 200 characters\")\n.refine(\n\t\t    (val) => !/^[123456789.]*$/.test(val),\n\"Title cannot be only numbers and dots\",\n)\n.transform((val) => sanitizeText(val));\n\nconst descriptionValidator = z\n.min(1, \"Description is required\")\n.max(500, \"Description must be less than 500 characters\")\n.refine((val) => val.length >= 3, \"Description must be at least 3 characters\")\n.transform((val) => sanitizeText(val));\n\nconst contentValidator = z\n.min(1, \"Content is required\")\n.max(500000, \"Content is too large (max 500KB)\")\n(val) => val.trim().length > 0,\n\"Content cannot be empty or only whitespace\",\n);\n\nconst coverImageValidator = z\n.url(\"Cover image must be a valid URL\")\n(val) => isValidUrl(val),\n\"Cover image URL is not secure (must be https)\",\n.optional();\n\nconst tagsValidator = z\n.array(\nz\n\t\t\t      .min(1, \"Tag cannot be empty\")\n.max(50, \"Tag must be less than 50 characters\")\n.regex(\n\t\t\t\t        /^[a-zA-Z0-9\\-_]+$/,\n\"Tags can only contain letters, numbers, hyphens, and underscores\",\n),\n.max(10, \"Maximum 10 tags allowed\")\n.default([])\n.transform((val) => sanitizeTags(val));\n\nconst authorValidator = z\n.max(100, \"Author name must be less than 100 characters\")\n.optional()\n.transform((val) => (val ? sanitizeText(val) : undefined));\n\nconst langValidator = z\n.enum([\"fr\", \"en\"], { message: \"Language must be 'fr' or 'en'\" })\n.default(\"en\");\n\nconst publishedValidator = z.boolean().default(false); */\nexport const CreateArticleSchema = z.object({\ntitle: titleValidator,\ndescription: descriptionValidator,\ncontent: contentValidator,\nlang: langValidator,\ncoverImage: coverImageValidator,\ntags: tagsValidator,\nauthor: authorValidator,\npublished: publishedValidator,\n});\n */\nexport const UpdateArticleSchema = z.object({\ntitle: titleValidator.optional(),\ndescription: descriptionValidator.optional(),\ncontent: contentValidator.optional(),\nlang: langValidator.optional(),\ntags: tagsValidator.optional(),\npublished: publishedValidator.optional(),\n});\n\nexport type CreateArticleInput = z.infer<typeof CreateArticleSchema>;\nexport type UpdateArticleInput = z.infer<typeof UpdateArticleSchema>;\n","ops":[{"diffOp":{"equal":{"range":[0,98]}}},{"equalLines":{"line_count":4}},{"diffOp":{"equal":{"range":[98,179]}}},{"diffOp":{"delete":{"range":[179,180]}}},{"diffOp":{"insert":{"range":[180,182]}}},{"diffOp":{"equal":{"range":[182,192]}}},{"diffOp":{"delete":{"range":[179,180]}}},{"diffOp":{"insert":{"range":[180,182]}}},{"diffOp":{"equal":{"range":[192,200]}}},{"diffOp":{"delete":{"range":[179,180]}}},{"diffOp":{"insert":{"range":[180,182]}}},{"diffOp":{"equal":{"range":[200,229]}}},{"diffOp":{"delete":{"range":[179,180]}}},{"diffOp":{"insert":{"range":[180,182]}}},{"diffOp":{"equal":{"range":[229,281]}}},{"diffOp":{"delete":{"range":[179,180]}}},{"diffOp":{"insert":{"range":[180,182]}}},{"diffOp":{"equal":{"range":[281,290]}}},{"diffOp":{"delete":{"range":[290,292]}}},{"diffOp":{"insert":{"range":[292,296]}}},{"diffOp":{"equal":{"range":[296,335]}}},{"diffOp":{"delete":{"range":[290,292]}}},{"diffOp":{"insert":{"range":[292,296]}}},{"diffOp":{"equal":{"range":[335,376]}}},{"diffOp":{"delete":{"range":[290,291]}}},{"diffOp":{"insert":{"range":[292,294]}}},{"diffOp":{"equal":{"range":[376,378]}}},{"diffOp":{"delete":{"range":[290,291]}}},{"diffOp":{"insert":{"range":[292,294]}}},{"diffOp":{"equal":{"range":[378,450]}}},{"diffOp":{"delete":{"range":[290,291]}}},{"diffOp":{"insert":{"range":[292,294]}}},{"diffOp":{"equal":{"range":[182,192]}}},{"diffOp":{"delete":{"range":[290,291]}}},{"diffOp":{"insert":{"range":[292,294]}}},{"diffOp":{"equal":{"range":[192,200]}}},{"diffOp":{"delete":{"range":[290,291]}}},{"diffOp":{"insert":{"range":[292,294]}}},{"diffOp":{"equal":{"range":[450,485]}}},{"diffOp":{"delete":{"range":[290,291]}}},{"diffOp":{"insert":{"range":[292,294]}}},{"diffOp":{"equal":{"range":[485,543]}}},{"diffOp":{"delete":{"range":[290,291]}}},{"diffOp":{"insert":{"range":[292,294]}}},{"diffOp":{"equal":{"range":[543,622]}}},{"diffOp":{"delete":{"range":[290,291]}}},{"diffOp":{"insert":{"range":[292,294]}}},{"diffOp":{"equal":{"range":[622,690]}}},{"diffOp":{"delete":{"range":[290,291]}}},{"diffOp":{"insert":{"range":[292,294]}}},{"diffOp":{"equal":{"range":[182,192]}}},{"diffOp":{"delete":{"range":[290,291]}}},{"diffOp":{"insert":{"range":[292,294]}}},{"diffOp":{"equal":{"range":[690,721]}}},{"diffOp":{"delete":{"range":[290,291]}}},{"diffOp":{"insert":{"range":[292,294]}}},{"diffOp":{"equal":{"range":[721,770]}}},{"diffOp":{"delete":{"range":[290,291]}}},{"diffOp":{"insert":{"range":[292,294]}}},{"diffOp":{"equal":{"range":[281,290]}}},{"diffOp":{"delete":{"range":[290,292]}}},{"diffOp":{"insert":{"range":[292,296]}}},{"diffOp":{"equal":{"range":[770,802]}}},{"diffOp":{"delete":{"range":[290,292]}}},{"diffOp":{"insert":{"range":[292,296]}}},{"diffOp":{"equal":{"range":[802,848]}}},{"diffOp":{"delete":{"range":[290,291]}}},{"diffOp":{"insert":{"range":[292,294]}}},{"diffOp":{"equal":{"range":[848,882]}}},{"diffOp":{"delete":{"range":[290,291]}}},{"diffOp":{"insert":{"range":[292,294]}}},{"diffOp":{"equal":{"range":[182,192]}}},{"diffOp":{"delete":{"range":[290,291]}}},{"diffOp":{"insert":{"range":[292,294]}}},{"diffOp":{"equal":{"range":[882,922]}}},{"diffOp":{"delete":{"range":[290,291]}}},{"diffOp":{"insert":{"range":[292,294]}}},{"diffOp":{"equal":{"range":[281,290]}}},{"diffOp":{"delete":{"range":[290,292]}}},{"diffOp":{"insert":{"range":[292,296]}}},{"diffOp":{"equal":{"range":[922,948]}}},{"diffOp":{"delete":{"range":[290,292]}}},{"diffOp":{"insert":{"range":[292,296]}}},{"diffOp":{"equal":{"range":[948,997]}}},{"diffOp":{"delete":{"range":[290,291]}}},{"diffOp":{"insert":{"range":[292,294]}}},{"diffOp":{"equal":{"range":[376,378]}}},{"diffOp":{"delete":{"range":[290,291]}}},{"diffOp":{"insert":{"range":[292,294]}}},{"diffOp":{"equal":{"range":[997,1035]}}},{"diffOp":{"delete":{"range":[290,291]}}},{"diffOp":{"insert":{"range":[292,294]}}},{"diffOp":{"equal":{"range":[1035,1043]}}},{"diffOp":{"delete":{"range":[290,292]}}},{"diffOp":{"insert":{"range":[292,296]}}},{"diffOp":{"equal":{"range":[1043,1045]}}},{"diffOp":{"delete":{"range":[1045,1048]}}},{"diffOp":{"insert":{"range":[1048,1054]}}},{"diffOp":{"equal":{"range":[182,192]}}},{"diffOp":{"delete":{"range":[1045,1048]}}},{"diffOp":{"insert":{"range":[1048,1054]}}},{"diffOp":{"equal":{"range":[192,200]}}},{"diffOp":{"delete":{"range":[1045,1048]}}},{"diffOp":{"insert":{"range":[1048,1054]}}},{"diffOp":{"equal":{"range":[1054,1085]}}},{"diffOp":{"delete":{"range":[1045,1048]}}},{"diffOp":{"insert":{"range":[1048,1054]}}},{"diffOp":{"equal":{"range":[1085,1133]}}},{"diffOp":{"delete":{"range":[1045,1048]}}},{"diffOp":{"insert":{"range":[1048,1054]}}},{"diffOp":{"equal":{"range":[1133,1141]}}},{"diffOp":{"delete":{"range":[1141,1145]}}},{"diffOp":{"insert":{"range":[1145,1153]}}},{"diffOp":{"equal":{"range":[1153,1174]}}},{"diffOp":{"delete":{"range":[1141,1145]}}},{"diffOp":{"insert":{"range":[1145,1153]}}},{"diffOp":{"equal":{"range":[1174,1242]}}},{"diffOp":{"delete":{"range":[1141,1144]}}},{"diffOp":{"insert":{"range":[1145,1151]}}},{"diffOp":{"equal":{"range":[1242,1245]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[376,378]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[1245,1281]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[1281,1294]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[1294,1361]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[182,192]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[192,200]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[1361,1419]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[1419,1431]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[1431,1516]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[1516,1582]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[1582,1653]}}},{"equalLines":{"line_count":3}},{"diffOp":{"equal":{"range":[1653,1703]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[1703,1726]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[1726,1761]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[1761,1788]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[1788,1809]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[1809,1842]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[1842,1863]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[1863,1888]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[1888,1923]}}},{"equalLines":{"line_count":2}},{"diffOp":{"equal":{"range":[1923,1973]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[1973,2007]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[2007,2053]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[2053,2091]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[2091,2123]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[1809,1842]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[2123,2155]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[1863,1888]}}},{"diffOp":{"delete":{"range":[1141,1142]}}},{"diffOp":{"insert":{"range":[1145,1147]}}},{"diffOp":{"equal":{"range":[2155,2342]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"lib\\validation\\article.schema.ts"},"span":null,"sourceCode":"import { isValidUrl, sanitizeTags, sanitizeText } from \"@/lib/sanitize\";\nimport { z } from \"zod\";\n\n/**\n * Strict validation schemas for articles\n */\n\n// Reusable validators with strong security constraints\nconst titleValidator = z\n\t.string()\n\t.trim()\n\t.min(1, \"Title is required\")\n\t.max(200, \"Title must be less than 200 characters\")\n\t.refine(\n\t\t(val) => !/^[123456789.]*$/.test(val),\n\t\t\"Title cannot be only numbers and dots\",\n\t)\n\t.transform((val) => sanitizeText(val));\n\nconst descriptionValidator = z\n\t.string()\n\t.trim()\n\t.min(1, \"Description is required\")\n\t.max(500, \"Description must be less than 500 characters\")\n\t.refine((val) => val.length >= 3, \"Description must be at least 3 characters\")\n\t.transform((val) => sanitizeText(val));\n\nconst contentValidator = z\n\t.string()\n\t.min(1, \"Content is required\")\n\t.max(500000, \"Content is too large (max 500KB)\")\n\t.refine(\n\t\t(val) => val.trim().length > 0,\n\t\t\"Content cannot be empty or only whitespace\",\n\t);\n\nconst coverImageValidator = z\n\t.string()\n\t.url(\"Cover image must be a valid URL\")\n\t.refine(\n\t\t(val) => isValidUrl(val),\n\t\t\"Cover image URL is not secure (must be https)\",\n\t)\n\t.optional();\n\nconst tagsValidator = z\n\t.array(\n\t\tz\n\t\t\t.string()\n\t\t\t.trim()\n\t\t\t.min(1, \"Tag cannot be empty\")\n\t\t\t.max(50, \"Tag must be less than 50 characters\")\n\t\t\t.regex(\n\t\t\t\t/^[a-zA-Z0-9\\-_]+$/,\n\t\t\t\t\"Tags can only contain letters, numbers, hyphens, and underscores\",\n\t\t\t),\n\t)\n\t.max(10, \"Maximum 10 tags allowed\")\n\t.default([])\n\t.transform((val) => sanitizeTags(val));\n\nconst authorValidator = z\n\t.string()\n\t.trim()\n\t.max(100, \"Author name must be less than 100 characters\")\n\t.optional()\n\t.transform((val) => (val ? sanitizeText(val) : undefined));\n\nconst langValidator = z\n\t.enum([\"fr\", \"en\"], { message: \"Language must be 'fr' or 'en'\" })\n\t.default(\"en\");\n\nconst publishedValidator = z.boolean().default(false);\n\n/**\n * Create article schema with strict validation\n */\nexport const CreateArticleSchema = z.object({\n\ttitle: titleValidator,\n\tdescription: descriptionValidator,\n\tcontent: contentValidator,\n\tlang: langValidator,\n\tcoverImage: coverImageValidator,\n\ttags: tagsValidator,\n\tauthor: authorValidator,\n\tpublished: publishedValidator,\n});\n\n/**\n * Update article schema - all fields optional but still validated\n */\nexport const UpdateArticleSchema = z.object({\n\ttitle: titleValidator.optional(),\n\tdescription: descriptionValidator.optional(),\n\tcontent: contentValidator.optional(),\n\tlang: langValidator.optional(),\n\tcoverImage: coverImageValidator,\n\ttags: tagsValidator.optional(),\n\tauthor: authorValidator,\n\tpublished: publishedValidator.optional(),\n});\n\nexport type CreateArticleInput = z.infer<typeof CreateArticleSchema>;\nexport type UpdateArticleInput = z.infer<typeof UpdateArticleSchema>;\n"},"tags":[],"source":null},{"category":"assist/source/organizeImports","severity":"error","description":"The imports and exports are not sorted.","message":[{"elements":[],"content":"The imports and exports are not sorted."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Safe fix: Organize Imports (Biome)"}]]},{"diff":{"dictionary":"import { isValidUrl, sanitizeTags, sanitizeTextz } from \"@/lib/sanitizezod\";\nimport { \n\n/**export type CreateArticleInput = z.infer<typeof CreateArticleSchema>;\nexport type UpdateArticleInput = z.infer<typeof UpdateArticleSchema>;\n","ops":[{"diffOp":{"equal":{"range":[0,9]}}},{"diffOp":{"delete":{"range":[9,47]}}},{"diffOp":{"insert":{"range":[47,48]}}},{"diffOp":{"equal":{"range":[48,57]}}},{"diffOp":{"delete":{"range":[57,71]}}},{"diffOp":{"insert":{"range":[71,74]}}},{"diffOp":{"equal":{"range":[74,76]}}},{"diffOp":{"equal":{"range":[76,86]}}},{"diffOp":{"delete":{"range":[71,72]}}},{"diffOp":{"insert":{"range":[9,47]}}},{"diffOp":{"equal":{"range":[48,57]}}},{"diffOp":{"delete":{"range":[71,74]}}},{"diffOp":{"insert":{"range":[57,71]}}},{"diffOp":{"equal":{"range":[74,76]}}},{"diffOp":{"equal":{"range":[86,91]}}},{"equalLines":{"line_count":98}},{"diffOp":{"equal":{"range":[91,231]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"lib\\validation\\article.schema.ts"},"span":[0,72],"sourceCode":"import { isValidUrl, sanitizeTags, sanitizeText } from \"@/lib/sanitize\";\nimport { z } from \"zod\";\n\n/**\n * Strict validation schemas for articles\n */\n\n// Reusable validators with strong security constraints\nconst titleValidator = z\n\t.string()\n\t.trim()\n\t.min(1, \"Title is required\")\n\t.max(200, \"Title must be less than 200 characters\")\n\t.refine(\n\t\t(val) => !/^[123456789.]*$/.test(val),\n\t\t\"Title cannot be only numbers and dots\",\n\t)\n\t.transform((val) => sanitizeText(val));\n\nconst descriptionValidator = z\n\t.string()\n\t.trim()\n\t.min(1, \"Description is required\")\n\t.max(500, \"Description must be less than 500 characters\")\n\t.refine((val) => val.length >= 3, \"Description must be at least 3 characters\")\n\t.transform((val) => sanitizeText(val));\n\nconst contentValidator = z\n\t.string()\n\t.min(1, \"Content is required\")\n\t.max(500000, \"Content is too large (max 500KB)\")\n\t.refine(\n\t\t(val) => val.trim().length > 0,\n\t\t\"Content cannot be empty or only whitespace\",\n\t);\n\nconst coverImageValidator = z\n\t.string()\n\t.url(\"Cover image must be a valid URL\")\n\t.refine(\n\t\t(val) => isValidUrl(val),\n\t\t\"Cover image URL is not secure (must be https)\",\n\t)\n\t.optional();\n\nconst tagsValidator = z\n\t.array(\n\t\tz\n\t\t\t.string()\n\t\t\t.trim()\n\t\t\t.min(1, \"Tag cannot be empty\")\n\t\t\t.max(50, \"Tag must be less than 50 characters\")\n\t\t\t.regex(\n\t\t\t\t/^[a-zA-Z0-9\\-_]+$/,\n\t\t\t\t\"Tags can only contain letters, numbers, hyphens, and underscores\",\n\t\t\t),\n\t)\n\t.max(10, \"Maximum 10 tags allowed\")\n\t.default([])\n\t.transform((val) => sanitizeTags(val));\n\nconst authorValidator = z\n\t.string()\n\t.trim()\n\t.max(100, \"Author name must be less than 100 characters\")\n\t.optional()\n\t.transform((val) => (val ? sanitizeText(val) : undefined));\n\nconst langValidator = z\n\t.enum([\"fr\", \"en\"], { message: \"Language must be 'fr' or 'en'\" })\n\t.default(\"en\");\n\nconst publishedValidator = z.boolean().default(false);\n\n/**\n * Create article schema with strict validation\n */\nexport const CreateArticleSchema = z.object({\n\ttitle: titleValidator,\n\tdescription: descriptionValidator,\n\tcontent: contentValidator,\n\tlang: langValidator,\n\tcoverImage: coverImageValidator,\n\ttags: tagsValidator,\n\tauthor: authorValidator,\n\tpublished: publishedValidator,\n});\n\n/**\n * Update article schema - all fields optional but still validated\n */\nexport const UpdateArticleSchema = z.object({\n\ttitle: titleValidator.optional(),\n\tdescription: descriptionValidator.optional(),\n\tcontent: contentValidator.optional(),\n\tlang: langValidator.optional(),\n\tcoverImage: coverImageValidator,\n\ttags: tagsValidator.optional(),\n\tauthor: authorValidator,\n\tpublished: publishedValidator.optional(),\n});\n\nexport type CreateArticleInput = z.infer<typeof CreateArticleSchema>;\nexport type UpdateArticleInput = z.infer<typeof UpdateArticleSchema>;\n"},"tags":["fixable"],"source":null},{"category":"assist/source/organizeImports","severity":"error","description":"The imports and exports are not sorted.","message":[{"elements":[],"content":"The imports and exports are not sorted."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Safe fix: Organize Imports (Biome)"}]]},{"diff":{"dictionary":"import { z } from \"zod\";\r\nimport { sanitizeTextisValidUrl, sanitizeEmail, sanitizeTags } from \"@/lib/sanitize\";\r\n\r\n/**\rexport type CreatePostInput = z.infer<typeof CreatePostSchema>;\r\nexport type UpdatePostInput = z.infer<typeof UpdatePostSchema>;\r\n","ops":[{"diffOp":{"equal":{"range":[0,24]}}},{"diffOp":{"equal":{"range":[24,35]}}},{"diffOp":{"delete":{"range":[35,47]}}},{"diffOp":{"insert":{"range":[47,57]}}},{"diffOp":{"equal":{"range":[57,74]}}},{"diffOp":{"delete":{"range":[47,57]}}},{"diffOp":{"insert":{"range":[74,86]}}},{"diffOp":{"equal":{"range":[57,59]}}},{"diffOp":{"delete":{"range":[74,86]}}},{"diffOp":{"insert":{"range":[35,47]}}},{"diffOp":{"equal":{"range":[86,111]}}},{"diffOp":{"equal":{"range":[111,119]}}},{"equalLines":{"line_count":74}},{"diffOp":{"equal":{"range":[119,249]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"lib\\validation\\post.schema.ts"},"span":[0,24],"sourceCode":"import { z } from \"zod\";\r\nimport { sanitizeText, sanitizeEmail, isValidUrl, sanitizeTags } from \"@/lib/sanitize\";\r\n\r\n/**\r\n * Strict validation schemas for posts\r\n */\r\n\r\n// Reusable validators with strong security constraints\r\nconst titleValidator = z\r\n  .string()\r\n  .trim()\r\n  .min(1, \"Title is required\")\r\n  .max(200, \"Title must be less than 200 characters\")\r\n  .refine(\r\n    (val) => !/^[123456789.]*$/.test(val),\r\n    \"Title cannot be only numbers and dots\"\r\n  )\r\n  .transform((val) => sanitizeText(val));\r\n\r\nconst contentValidator = z\r\n  .string()\r\n  .min(1, \"Content is required\")\r\n  .max(500000, \"Content is too large (max 500KB)\")\r\n  .refine(\r\n    (val) => val.trim().length > 0,\r\n    \"Content cannot be empty or only whitespace\"\r\n  );\r\n\r\nconst coverImageValidator = z\r\n  .string()\r\n  .url(\"Cover image must be a valid URL\")\r\n  .refine(\r\n    (val) => isValidUrl(val),\r\n    \"Cover image URL is not secure (must be https)\"\r\n  )\r\n  .optional();\r\n\r\nconst authorValidator = z\r\n  .string()\r\n  .trim()\r\n  .max(100, \"Author name must be less than 100 characters\")\r\n  .optional()\r\n  .transform((val) => (val ? sanitizeText(val) : undefined));\r\n\r\nconst langValidator = z\r\n  .enum([\"fr\", \"en\"], { message: \"Language must be 'fr' or 'en'\" })\r\n  .default(\"en\");\r\n\r\nconst publishedValidator = z.boolean().default(false);\r\n\r\nconst articleValidator = z.string().optional();\r\n\r\n/**\r\n * Create post schema with strict validation\r\n */\r\nexport const CreatePostSchema = z.object({\r\n  title: titleValidator,\r\n  content: contentValidator,\r\n  lang: langValidator,\r\n  author: authorValidator,\r\n  coverImage: coverImageValidator,\r\n  article: articleValidator,\r\n  published: publishedValidator,\r\n});\r\n\r\n/**\r\n * Update post schema - all fields optional but still validated\r\n */\r\nexport const UpdatePostSchema = z.object({\r\n  title: titleValidator.optional(),\r\n  content: contentValidator.optional(),\r\n  lang: langValidator.optional(),\r\n  author: authorValidator,\r\n  coverImage: coverImageValidator,\r\n  article: articleValidator,\r\n  published: publishedValidator.optional(),\r\n});\r\n\r\nexport type CreatePostInput = z.infer<typeof CreatePostSchema>;\r\nexport type UpdatePostInput = z.infer<typeof UpdatePostSchema>;\r\n"},"tags":["fixable"],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"import { z } from \"zod\";\r\n\n \n  sanitizeText,sanitizeEmail,isValidUrl,sanitizeTags,\n} from \"@/lib/sanitize\";\r\n\r\n\n\n/** * Strict validation schemas for posts */// Reusable validators with strong security constraintsconst titleValidator = z  .string()  .trim()  .min(1, \"Title is required\")  .max(200, \"Title must be less than 200 characters\")  .refine(    (val) => !/^[123456789.]*$/.test(val),    \"Title cannot be only numbers and dots\"  )  .transform((val) => sanitizeText(val));const contentValidator = z  .min(1, \"Content is required\")  .max(500000, \"Content is too large (max 500KB)\")    (val) => val.trim().length > 0,    \"Content cannot be empty or only whitespace\"  );const coverImageValidator = z  .url(\"Cover image must be a valid URL\")    (val) => isValidUrl(val),    \"Cover image URL is not secure (must be https)\"  .optional();const authorValidator = z  .max(100, \"Author name must be less than 100 characters\")  .transform((val) => (val ? sanitizeText(val) : undefined));const langValidator = z  .enum([\"fr\", \"en\"], { message: \"Language must be 'fr' or 'en'\" })  .default(\"en\");const publishedValidator = z.boolean().default(false);const articleValidator = z.string().optional(); * Create post schema with strict validationexport const CreatePostSchema = z.object({  title: titleValidator,  content: contentValidator,  lang: langValidator,  author: authorValidator,  coverImage: coverImageValidator,  article: articleValidator,  published: publishedValidator,}); * Update post schema - all fields optional but still validatedexport const UpdatePostSchema = z.object({  title: titleValidator.optional(),  content: contentValidator.optional(),  lang: langValidator.optional(),  published: publishedValidator.optional(),export type CreatePostInput = z.infer<typeof CreatePostSchema>;export type UpdatePostInput = z.infer<typeof UpdatePostSchema>;","ops":[{"diffOp":{"equal":{"range":[0,24]}}},{"diffOp":{"delete":{"range":[24,26]}}},{"diffOp":{"insert":{"range":[26,27]}}},{"diffOp":{"equal":{"range":[0,8]}}},{"diffOp":{"delete":{"range":[27,28]}}},{"diffOp":{"insert":{"range":[28,31]}}},{"diffOp":{"equal":{"range":[31,44]}}},{"diffOp":{"delete":{"range":[27,28]}}},{"diffOp":{"insert":{"range":[28,31]}}},{"diffOp":{"equal":{"range":[44,58]}}},{"diffOp":{"delete":{"range":[27,28]}}},{"diffOp":{"insert":{"range":[28,31]}}},{"diffOp":{"equal":{"range":[58,69]}}},{"diffOp":{"delete":{"range":[27,28]}}},{"diffOp":{"insert":{"range":[28,31]}}},{"diffOp":{"equal":{"range":[69,81]}}},{"diffOp":{"delete":{"range":[27,28]}}},{"diffOp":{"insert":{"range":[81,83]}}},{"diffOp":{"equal":{"range":[83,107]}}},{"diffOp":{"delete":{"range":[107,111]}}},{"diffOp":{"insert":{"range":[111,113]}}},{"diffOp":{"equal":{"range":[113,116]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[116,154]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[154,157]}}},{"diffOp":{"delete":{"range":[107,111]}}},{"diffOp":{"insert":{"range":[111,113]}}},{"diffOp":{"equal":{"range":[157,212]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[212,236]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[236,247]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[247,256]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[256,286]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[286,339]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[339,349]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[349,391]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[391,434]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[81,83]}}},{"diffOp":{"equal":{"range":[434,437]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[437,478]}}},{"diffOp":{"delete":{"range":[107,111]}}},{"diffOp":{"insert":{"range":[111,113]}}},{"diffOp":{"equal":{"range":[478,504]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[236,247]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[504,536]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[536,586]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[339,349]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[586,621]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[621,669]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[81,83]}}},{"diffOp":{"equal":{"range":[669,673]}}},{"diffOp":{"delete":{"range":[107,111]}}},{"diffOp":{"insert":{"range":[111,113]}}},{"diffOp":{"equal":{"range":[673,702]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[236,247]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[702,743]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[339,349]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[743,772]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[772,823]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[81,83]}}},{"diffOp":{"equal":{"range":[669,672]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[823,837]}}},{"diffOp":{"delete":{"range":[107,111]}}},{"diffOp":{"insert":{"range":[111,113]}}},{"diffOp":{"equal":{"range":[837,862]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[236,247]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[247,256]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[862,921]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[823,836]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[921,982]}}},{"diffOp":{"delete":{"range":[107,111]}}},{"diffOp":{"insert":{"range":[111,113]}}},{"diffOp":{"equal":{"range":[982,1005]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1005,1072]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1072,1089]}}},{"diffOp":{"delete":{"range":[107,111]}}},{"diffOp":{"insert":{"range":[111,113]}}},{"diffOp":{"equal":{"range":[1089,1143]}}},{"diffOp":{"delete":{"range":[107,111]}}},{"diffOp":{"insert":{"range":[111,113]}}},{"diffOp":{"equal":{"range":[1143,1190]}}},{"diffOp":{"delete":{"range":[107,111]}}},{"diffOp":{"insert":{"range":[111,113]}}},{"diffOp":{"equal":{"range":[113,116]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1190,1234]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[154,157]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1234,1276]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1276,1300]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1300,1328]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1328,1350]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1350,1376]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1376,1410]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1410,1438]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1438,1470]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1470,1473]}}},{"diffOp":{"delete":{"range":[107,111]}}},{"diffOp":{"insert":{"range":[111,113]}}},{"diffOp":{"equal":{"range":[113,116]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1473,1536]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[154,157]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1536,1578]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1578,1613]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1613,1652]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1652,1685]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1350,1376]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1376,1410]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1410,1438]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1685,1728]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1470,1473]}}},{"diffOp":{"delete":{"range":[107,111]}}},{"diffOp":{"insert":{"range":[111,113]}}},{"diffOp":{"equal":{"range":[1728,1791]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}},{"diffOp":{"equal":{"range":[1791,1854]}}},{"diffOp":{"delete":{"range":[107,109]}}},{"diffOp":{"insert":{"range":[28,29]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"lib\\validation\\post.schema.ts"},"span":null,"sourceCode":"import { z } from \"zod\";\r\nimport { sanitizeText, sanitizeEmail, isValidUrl, sanitizeTags } from \"@/lib/sanitize\";\r\n\r\n/**\r\n * Strict validation schemas for posts\r\n */\r\n\r\n// Reusable validators with strong security constraints\r\nconst titleValidator = z\r\n  .string()\r\n  .trim()\r\n  .min(1, \"Title is required\")\r\n  .max(200, \"Title must be less than 200 characters\")\r\n  .refine(\r\n    (val) => !/^[123456789.]*$/.test(val),\r\n    \"Title cannot be only numbers and dots\"\r\n  )\r\n  .transform((val) => sanitizeText(val));\r\n\r\nconst contentValidator = z\r\n  .string()\r\n  .min(1, \"Content is required\")\r\n  .max(500000, \"Content is too large (max 500KB)\")\r\n  .refine(\r\n    (val) => val.trim().length > 0,\r\n    \"Content cannot be empty or only whitespace\"\r\n  );\r\n\r\nconst coverImageValidator = z\r\n  .string()\r\n  .url(\"Cover image must be a valid URL\")\r\n  .refine(\r\n    (val) => isValidUrl(val),\r\n    \"Cover image URL is not secure (must be https)\"\r\n  )\r\n  .optional();\r\n\r\nconst authorValidator = z\r\n  .string()\r\n  .trim()\r\n  .max(100, \"Author name must be less than 100 characters\")\r\n  .optional()\r\n  .transform((val) => (val ? sanitizeText(val) : undefined));\r\n\r\nconst langValidator = z\r\n  .enum([\"fr\", \"en\"], { message: \"Language must be 'fr' or 'en'\" })\r\n  .default(\"en\");\r\n\r\nconst publishedValidator = z.boolean().default(false);\r\n\r\nconst articleValidator = z.string().optional();\r\n\r\n/**\r\n * Create post schema with strict validation\r\n */\r\nexport const CreatePostSchema = z.object({\r\n  title: titleValidator,\r\n  content: contentValidator,\r\n  lang: langValidator,\r\n  author: authorValidator,\r\n  coverImage: coverImageValidator,\r\n  article: articleValidator,\r\n  published: publishedValidator,\r\n});\r\n\r\n/**\r\n * Update post schema - all fields optional but still validated\r\n */\r\nexport const UpdatePostSchema = z.object({\r\n  title: titleValidator.optional(),\r\n  content: contentValidator.optional(),\r\n  lang: langValidator.optional(),\r\n  author: authorValidator,\r\n  coverImage: coverImageValidator,\r\n  article: articleValidator,\r\n  published: publishedValidator.optional(),\r\n});\r\n\r\nexport type CreatePostInput = z.infer<typeof CreatePostSchema>;\r\nexport type UpdatePostInput = z.infer<typeof UpdatePostSchema>;\r\n"},"tags":[],"source":null},{"category":"format","severity":"error","description":"File content differs from formatting output","message":[{"elements":[],"content":"File content differs from formatting output"}],"advices":{"advices":[{"diff":{"dictionary":"import type { NextConfig } from \"next\";\n\nconst nextConfig: NextConfig = {\n  \n  reactCompiler: true,\n  typedRoutes: true,\n  poweredByHeader: false,\nexport default nextConfig;\n","ops":[{"diffOp":{"equal":{"range":[0,76]}}},{"diffOp":{"delete":{"range":[76,79]}}},{"diffOp":{"equal":{"range":[79,146]}}},{"equalLines":{"line_count":76}},{"diffOp":{"equal":{"range":[146,174]}}}]}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"next.config.ts"},"span":null,"sourceCode":"import type { NextConfig } from \"next\";\n\nconst nextConfig: NextConfig = {\n  \n  reactCompiler: true,\n  typedRoutes: true,\n  poweredByHeader: false,\n  output: \"standalone\",\n  compress: true,\n  cacheComponents: true,\n  experimental: {\n    viewTransition: true,\n    serverActions: {\n      bodySizeLimit: \"3mb\",\n    },\n  },\n  images: {\n    remotePatterns: [\n      {\n        protocol: \"https\",\n        hostname: \"raw.githubusercontent.com\",\n        pathname: \"/**\",\n      },\n      {\n        protocol: \"https\",\n        hostname: \"avatars.githubusercontent.com\",\n        pathname: \"/**\",\n      },\n      {\n        protocol: \"https\",\n        hostname: \"picsum.photos\",\n        pathname: \"/**\",\n      },\n    ],\n  },\n  async headers() {\n    return [\n      {\n        source: \"/:path*\",\n        headers: [\n          {\n            key: \"Content-Security-Policy\",\n            value: [\n              \"default-src 'self'\",\n              \"script-src 'self' 'unsafe-inline' 'unsafe-eval'\",\n              \"style-src 'self' 'unsafe-inline'\",\n              \"img-src 'self' https: data:\",\n              \"font-src 'self' data:\",\n              \"connect-src 'self' https://api.github.com\",\n              \"frame-ancestors 'none'\",\n              \"base-uri 'self'\",\n              \"form-action 'self'\",\n            ].join(\"; \"),\n          },\n          {\n            key: \"X-Content-Type-Options\",\n            value: \"nosniff\",\n          },\n          {\n            key: \"X-Frame-Options\",\n            value: \"SAMEORIGIN\",\n          },\n          {\n            key: \"X-XSS-Protection\",\n            value: \"1; mode=block\",\n          },\n          {\n            key: \"Referrer-Policy\",\n            value: \"strict-origin-when-cross-origin\",\n          },\n          {\n            key: \"Permissions-Policy\",\n            value: \"geolocation=(), microphone=(), camera=()\",\n          },\n          {\n            key: \"Strict-Transport-Security\",\n            value: \"max-age=31536000; includeSubDomains; preload\",\n          },\n        ],\n      },\n    ];\n  },\n};\n\nexport default nextConfig;\n"},"tags":[],"source":null},{"category":"parse","severity":"error","description":"Expected an array, an object, or a literal but instead found the end of the file.","message":[{"elements":[],"content":"Expected an array, an object, or a literal but instead found the end of the file."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Expected an array, an object, or a literal here."}]]},{"frame":{"path":null,"span":[0,0],"sourceCode":""}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"reports.json"},"span":[0,0],"sourceCode":""},"tags":[],"source":null},{"category":"parse","severity":"error","description":"Expected an array, an object, or a literal but instead found the end of the file.","message":[{"elements":[],"content":"Expected an array, an object, or a literal but instead found the end of the file."}],"advices":{"advices":[{"log":["info",[{"elements":[],"content":"Expected an array, an object, or a literal here."}]]},{"frame":{"path":null,"span":[0,0],"sourceCode":""}}]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"reports.json"},"span":[0,0],"sourceCode":""},"tags":[],"source":null},{"category":"format","severity":"error","description":"Code formatting aborted due to parsing errors. To format code with errors, enable the 'formatter.formatWithErrors' option.","message":[{"elements":[],"content":"Code formatting aborted due to parsing errors. To format code with errors, enable the 'formatter.formatWithErrors' option."}],"advices":{"advices":[]},"verboseAdvices":{"advices":[]},"location":{"path":{"file":"reports.json"},"span":null,"sourceCode":null},"tags":[],"source":null}],"command":"ci"}[0m
